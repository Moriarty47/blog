<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <link rel="icon" href="/blog/images/m.ico"><link rel="stylesheet" media="print" href="/blog/print.css"><title>LOFT</title><meta name="description" content="LOFT">
    <link rel="preload" href="/blog/assets/style-52786e27.css" as="style"><link rel="stylesheet" href="/blog/assets/style-52786e27.css">
    <link rel="modulepreload" href="/blog/assets/app-bf7bc9cc.js"><link rel="modulepreload" href="/blog/assets/framework-5411b43d.js"><link rel="modulepreload" href="/blog/assets/gc.html-92db9a5b.js"><link rel="modulepreload" href="/blog/assets/gc.html-879bbaaa.js"><link rel="prefetch" href="/blog/assets/index.html-ae2f7e7a.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-09607301.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-0629a64a.js" as="script"><link rel="prefetch" href="/blog/assets/QA.html-df081e4e.js" as="script"><link rel="prefetch" href="/blog/assets/githubproxy.html-383ad34a.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-9dbcffc4.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-72366d4d.js" as="script"><link rel="prefetch" href="/blog/assets/advance.html-bd76e31a.js" as="script"><link rel="prefetch" href="/blog/assets/compress.html-19f867fc.js" as="script"><link rel="prefetch" href="/blog/assets/concept.html-5d747e0d.js" as="script"><link rel="prefetch" href="/blog/assets/fingerprint.html-74df5d80.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-caac1a24.js" as="script"><link rel="prefetch" href="/blog/assets/miniWebpack.html-640bc47e.js" as="script"><link rel="prefetch" href="/blog/assets/mpa.html-dc91e647.js" as="script"><link rel="prefetch" href="/blog/assets/package.html-c27afd58.js" as="script"><link rel="prefetch" href="/blog/assets/perfermance.html-2783f9cc.js" as="script"><link rel="prefetch" href="/blog/assets/resolve.html-b0ca34d9.js" as="script"><link rel="prefetch" href="/blog/assets/sourcecode.html-5e4272b7.js" as="script"><link rel="prefetch" href="/blog/assets/ssr.html-d18e6a7e.js" as="script"><link rel="prefetch" href="/blog/assets/watch.html-91a1440b.js" as="script"><link rel="prefetch" href="/blog/assets/ES10.html-b9a36ee0.js" as="script"><link rel="prefetch" href="/blog/assets/ES11.html-4b772d99.js" as="script"><link rel="prefetch" href="/blog/assets/ES12.html-b273fef0.js" as="script"><link rel="prefetch" href="/blog/assets/ES13.html-a4694136.js" as="script"><link rel="prefetch" href="/blog/assets/ES7.html-b1fd333a.js" as="script"><link rel="prefetch" href="/blog/assets/ES8.html-70de0ef1.js" as="script"><link rel="prefetch" href="/blog/assets/ES9.html-ad995181.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-b3c200c4.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-8c49129c.js" as="script"><link rel="prefetch" href="/blog/assets/mathematicalNotation.html-280346a4.js" as="script"><link rel="prefetch" href="/blog/assets/this.html-be64c28d.js" as="script"><link rel="prefetch" href="/blog/assets/1-two-sum.html-f3a55376.js" as="script"><link rel="prefetch" href="/blog/assets/14-longest-common-prefix.html-465081db.js" as="script"><link rel="prefetch" href="/blog/assets/15-3sum.html-7e96aef9.js" as="script"><link rel="prefetch" href="/blog/assets/18-4sum.html-f5377a98.js" as="script"><link rel="prefetch" href="/blog/assets/6-zigzag-conversion.html-02434e20.js" as="script"><link rel="prefetch" href="/blog/assets/array.html-1f7213e1.js" as="script"><link rel="prefetch" href="/blog/assets/class.html-5c53e6c7.js" as="script"><link rel="prefetch" href="/blog/assets/destructuring.html-3d95d00d.js" as="script"><link rel="prefetch" href="/blog/assets/function.html-5b1890fd.js" as="script"><link rel="prefetch" href="/blog/assets/let-const.html-f4c74b49.js" as="script"><link rel="prefetch" href="/blog/assets/module.html-2eb7c0e9.js" as="script"><link rel="prefetch" href="/blog/assets/object.html-1e8d1a47.js" as="script"><link rel="prefetch" href="/blog/assets/promise.html-b0d01336.js" as="script"><link rel="prefetch" href="/blog/assets/proxy.html-6cce4ed5.js" as="script"><link rel="prefetch" href="/blog/assets/reflect.html-d0dee0d2.js" as="script"><link rel="prefetch" href="/blog/assets/string.html-a33f1c81.js" as="script"><link rel="prefetch" href="/blog/assets/symbol.html-d3d9d977.js" as="script"><link rel="prefetch" href="/blog/assets/architecture.html-bb003c77.js" as="script"><link rel="prefetch" href="/blog/assets/concept.html-19390284.js" as="script"><link rel="prefetch" href="/blog/assets/implementation.html-f677d051.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-37c96fc2.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-2c7734b5.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-2a7064dc.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-472548ee.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-bbff9a7b.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-537e5be5.js" as="script"><link rel="prefetch" href="/blog/assets/QA.html-a69c1aa2.js" as="script"><link rel="prefetch" href="/blog/assets/githubproxy.html-15702a66.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-3397593f.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-e247f25c.js" as="script"><link rel="prefetch" href="/blog/assets/advance.html-ce0e3ae7.js" as="script"><link rel="prefetch" href="/blog/assets/compress.html-18eb6643.js" as="script"><link rel="prefetch" href="/blog/assets/concept.html-c25f52f1.js" as="script"><link rel="prefetch" href="/blog/assets/fingerprint.html-2d7c877c.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-f3398cb3.js" as="script"><link rel="prefetch" href="/blog/assets/miniWebpack.html-7b84d436.js" as="script"><link rel="prefetch" href="/blog/assets/mpa.html-eef62d46.js" as="script"><link rel="prefetch" href="/blog/assets/package.html-e2375368.js" as="script"><link rel="prefetch" href="/blog/assets/perfermance.html-c8dd4b3c.js" as="script"><link rel="prefetch" href="/blog/assets/resolve.html-088c6ba8.js" as="script"><link rel="prefetch" href="/blog/assets/sourcecode.html-d56c3ff3.js" as="script"><link rel="prefetch" href="/blog/assets/ssr.html-f6260664.js" as="script"><link rel="prefetch" href="/blog/assets/watch.html-899fa7db.js" as="script"><link rel="prefetch" href="/blog/assets/ES10.html-7774aa09.js" as="script"><link rel="prefetch" href="/blog/assets/ES11.html-ba657adf.js" as="script"><link rel="prefetch" href="/blog/assets/ES12.html-891ac07a.js" as="script"><link rel="prefetch" href="/blog/assets/ES13.html-8baa9a07.js" as="script"><link rel="prefetch" href="/blog/assets/ES7.html-b39e40d3.js" as="script"><link rel="prefetch" href="/blog/assets/ES8.html-6543214d.js" as="script"><link rel="prefetch" href="/blog/assets/ES9.html-2379df8e.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-79c64d37.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-0d3d37f3.js" as="script"><link rel="prefetch" href="/blog/assets/mathematicalNotation.html-ac26ff78.js" as="script"><link rel="prefetch" href="/blog/assets/this.html-f3621cf1.js" as="script"><link rel="prefetch" href="/blog/assets/1-two-sum.html-3ff91204.js" as="script"><link rel="prefetch" href="/blog/assets/14-longest-common-prefix.html-073b04b3.js" as="script"><link rel="prefetch" href="/blog/assets/15-3sum.html-eb2e5c75.js" as="script"><link rel="prefetch" href="/blog/assets/18-4sum.html-946c996f.js" as="script"><link rel="prefetch" href="/blog/assets/6-zigzag-conversion.html-d320ed4d.js" as="script"><link rel="prefetch" href="/blog/assets/array.html-f54cd776.js" as="script"><link rel="prefetch" href="/blog/assets/class.html-b1d437e8.js" as="script"><link rel="prefetch" href="/blog/assets/destructuring.html-700158ce.js" as="script"><link rel="prefetch" href="/blog/assets/function.html-01981adc.js" as="script"><link rel="prefetch" href="/blog/assets/let-const.html-164e398b.js" as="script"><link rel="prefetch" href="/blog/assets/module.html-09065d86.js" as="script"><link rel="prefetch" href="/blog/assets/object.html-4e725ea9.js" as="script"><link rel="prefetch" href="/blog/assets/promise.html-ef7029a9.js" as="script"><link rel="prefetch" href="/blog/assets/proxy.html-69408401.js" as="script"><link rel="prefetch" href="/blog/assets/reflect.html-82e27965.js" as="script"><link rel="prefetch" href="/blog/assets/string.html-682b4bea.js" as="script"><link rel="prefetch" href="/blog/assets/symbol.html-1d32cc56.js" as="script"><link rel="prefetch" href="/blog/assets/architecture.html-9e3e39e0.js" as="script"><link rel="prefetch" href="/blog/assets/concept.html-c7b8ce71.js" as="script"><link rel="prefetch" href="/blog/assets/implementation.html-937cb1be.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-0018c0ee.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-b2423981.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-be216922.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-78eccbaa.js" as="script"><link rel="prefetch" href="/blog/assets/Playground-3eb19026.js" as="script"><link rel="prefetch" href="/blog/assets/index-e3112853.js" as="script"><link rel="prefetch" href="/blog/assets/CodeLink-dd177f41.js" as="script"><link rel="prefetch" href="/blog/assets/CodeTool-4b08e5c5.js" as="script"><link rel="prefetch" href="/blog/assets/index-4bed0a7c.js" as="script"><link rel="prefetch" href="/blog/assets/index-7d6bcf76.js" as="script"><link rel="prefetch" href="/blog/assets/index-37fe586b.js" as="script"><link rel="prefetch" href="/blog/assets/index-94db7077.js" as="script"><link rel="prefetch" href="/blog/assets/katex-21dcf7db.js" as="script"><link rel="prefetch" href="/blog/assets/mermaid.core-905ae0d6.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container page-indent"><!--[--><header class="navbar" style="visibility:unset;"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><!----><span class="site-name can-hide">LOFT</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="LOFT"><!--[--><!--]--> LOFT <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/playground" class="" aria-label="游乐场"><!--[--><!--]--> 游乐场 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="文章"><span class="title">文章</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="文章"><span class="title">文章</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/JSBooks/ECMAScript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/Leetcode/Array/1-two-sum.md" class="" aria-label="Leetcode"><!--[--><!--]--> Leetcode <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/Bundler/" class="" aria-label="构建工具"><!--[--><!--]--> 构建工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/Tutorial/" class="" aria-label="解决方案及教程"><!--[--><!--]--> 解决方案及教程 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="更多"><span class="title">更多</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="更多"><span class="title">更多</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/resume" class="" aria-label="简历"><!--[--><!--]--> 简历 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换颜色"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="LOFT"><!--[--><!--]--> LOFT <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/playground" class="" aria-label="游乐场"><!--[--><!--]--> 游乐场 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="文章"><span class="title">文章</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="文章"><span class="title">文章</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/JSBooks/ECMAScript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/Leetcode/Array/1-two-sum.md" class="" aria-label="Leetcode"><!--[--><!--]--> Leetcode <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/Bundler/" class="" aria-label="构建工具"><!--[--><!--]--> 构建工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/Tutorial/" class="" aria-label="解决方案及教程"><!--[--><!--]--> 解决方案及教程 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="更多"><span class="title">更多</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="更多"><span class="title">更多</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/resume" class="" aria-label="简历"><!--[--><!--]--> 简历 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">JavaScript <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">ECMAScript新特性 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/JSBooks/ECMAScript" class="sidebar-item" aria-label="新特性简介"><!--[--><!--]--> 新特性简介 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item collapsible">ES6新特性 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/blog/JSBooks/ECMAScript/ES6/let-const.md" class="sidebar-item" aria-label="let,const 声明"><!--[--><!--]--> let,const 声明 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/symbol.md" class="sidebar-item" aria-label="Symbol 基本数据类型"><!--[--><!--]--> Symbol 基本数据类型 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/string.md" class="sidebar-item" aria-label="字符串扩展"><!--[--><!--]--> 字符串扩展 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/destructuring.md" class="sidebar-item" aria-label="变量的解构赋值"><!--[--><!--]--> 变量的解构赋值 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/array.md" class="sidebar-item" aria-label="Array 扩展"><!--[--><!--]--> Array 扩展 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/object.md" class="sidebar-item" aria-label="Object 扩展"><!--[--><!--]--> Object 扩展 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/function.md" class="sidebar-item" aria-label="Function 扩展"><!--[--><!--]--> Function 扩展 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/class.md" class="sidebar-item" aria-label="Class 类"><!--[--><!--]--> Class 类 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/proxy.md" class="sidebar-item" aria-label="Proxy"><!--[--><!--]--> Proxy <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/reflect.md" class="sidebar-item" aria-label="Reflect"><!--[--><!--]--> Reflect <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/promise.md" class="sidebar-item" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES6/module.md" class="sidebar-item" aria-label="Module"><!--[--><!--]--> Module <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/blog/JSBooks/ECMAScript/ES7.md" class="sidebar-item" aria-label="ES7新特性"><!--[--><!--]--> ES7新特性 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES8.md" class="sidebar-item" aria-label="ES8新特性"><!--[--><!--]--> ES8新特性 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES9.md" class="sidebar-item" aria-label="ES9新特性"><!--[--><!--]--> ES9新特性 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES10.md" class="sidebar-item" aria-label="ES10新特性"><!--[--><!--]--> ES10新特性 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES11.md" class="sidebar-item" aria-label="ES11新特性"><!--[--><!--]--> ES11新特性 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES12.md" class="sidebar-item" aria-label="ES12新特性"><!--[--><!--]--> ES12新特性 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/ECMAScript/ES13.md" class="sidebar-item" aria-label="ES13新特性"><!--[--><!--]--> ES13新特性 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item active">JavaScript基础 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/JSBooks/JavaScript" class="router-link-active sidebar-item" aria-label="JavaScript实现"><!--[--><!--]--> JavaScript实现 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/JavaScript/this.md" class="sidebar-item" aria-label="this指向"><!--[--><!--]--> this指向 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/JavaScript/gc.md" class="sidebar-item active" aria-label="垃圾回收机制"><!--[--><!--]--> 垃圾回收机制 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/JavaScript/Vue原理/index.md" class="sidebar-item" aria-label="Vue原理"><!--[--><!--]--> Vue原理 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item">React <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/JSBooks/JavaScript/React/concept.md" class="sidebar-item" aria-label="理念"><!--[--><!--]--> 理念 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/JavaScript/React/architecture.md" class="sidebar-item" aria-label="架构"><!--[--><!--]--> 架构 <!--[--><!--]--></a><!----></li><li><a href="/blog/JSBooks/JavaScript/React/implementation.md" class="sidebar-item" aria-label="实现"><!--[--><!--]--> 实现 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/blog/JSBooks/JavaScript/mathematicalNotation.md" class="sidebar-item" aria-label="数学标记"><!--[--><!--]--> 数学标记 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><!----><!--[--><!-- name="fade-slide-y" --><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><!--[--><div><h2 id="javascript-垃圾回收-garbage-collection" tabindex="-1"><a class="header-anchor" href="#javascript-垃圾回收-garbage-collection" aria-hidden="true">#</a> JavaScript 垃圾回收(Garbage Collection)</h2><p>通常情况下，垃圾回收分为 <strong>手动回收</strong> 和 <strong>自动回收</strong> 两种策略。</p><h3 id="调用栈中的数据回收" tabindex="-1"><a class="header-anchor" href="#调用栈中的数据回收" aria-hidden="true">#</a> 调用栈中的数据回收</h3><p>JavaScript 引擎会通过向下移动 ESP(记录当前执行状态的指针)来销毁该函数保存在栈中的执行上下文。</p><h3 id="堆中的数据回收" tabindex="-1"><a class="header-anchor" href="#堆中的数据回收" aria-hidden="true">#</a> 堆中的数据回收</h3><p>在 V8 引擎中，会把堆分为 <strong>新生区</strong>(存放生存时间短的对象) 和 <strong>老生区</strong>(存放生存时间久的对象) 两个区域。V8 使用两个不同的垃圾回收器进行高效垃圾回收。主垃圾回收器负责老生区的垃圾回收，副垃圾回收器负责新生区的垃圾回收。后续垃圾回收使用 GC 缩写代替。</p><p>主副垃圾回收器有共同的执行 GC 流程：</p><ol><li>标记空间中的活动对象(正在使用的对象)与非活动对象(可进行 GC 的对象)；</li><li>在所有标记完成之后，回收所有非活动对象的占用内存(即统一清理所有被标记为可回收的对象)；</li><li>内存整理，一般情况下，频繁回收对象，内存会产生大量不连续的空间(即内存碎片)，此时如果需要分配较大连续内存时，有可能出现内存不足的情况。因此需要整理内存碎片。</li></ol><h4 id="新生区中的垃圾回收" tabindex="-1"><a class="header-anchor" href="#新生区中的垃圾回收" aria-hidden="true">#</a> 新生区中的垃圾回收</h4><p>新生区中使用 Scavenge 算法。将新生区空间对半划分为 <em>对象(from)区域</em> 和 <em>空闲(to)区域</em>，新加入的对象会存放到对象区域，当对象区域快写满时，执行一次 GC 操作。</p><p>副垃圾回收器会把存活的对象复制到空闲区域，同时对它们进行排序，相当于完成内存整理操作。复制完成后，将对象区域和空闲区域角色互换，即原来的空闲区域变为对象区域，原来的对象区域变为空闲区域，这样就完成了整个 GC 操作。角色互换的操作让新生区的两块区域可以无限重复使用。</p><p>为了执行效率，一般新生区的空间设置不大，为 1~8 M 左右，因此很容易被存活的对象装满整个区域，此时 V8 引擎引入了 <strong>对象晋升</strong> 策略，即经过两次 GC 依然存活的对象，”晋升“到老生区。</p><h4 id="老生区中的垃圾回收" tabindex="-1"><a class="header-anchor" href="#老生区中的垃圾回收" aria-hidden="true">#</a> 老生区中的垃圾回收</h4><p>老生区中使用 Mark-Sweep 算法，即标记-清除算法。</p><p>从一组根元素开始，递归遍历根元素，在遍历过程中，能到达的元素被标记为活动对象，不可到达的元素被标记为可回收对象，标记完成后进行清除过程。</p><p>清除完成后，会产生大量不连续的内存碎片，碎片过多会导致分配较大连续内存时内存不足，此时是使用 Mark-Compact 即标记-整理算法，标记过程与前面相同，标记完成后，让所有存活的对象都向一端移动，然后清理掉边界以外的内存，从而清理出连续的内存块。</p><h4 id="全停顿行为" tabindex="-1"><a class="header-anchor" href="#全停顿行为" aria-hidden="true">#</a> 全停顿行为</h4><p>JavaScript 运行在主线程上，执行 GC 算法时，需要将正在执行的 JavaScript 脚本暂停，待 GC 完成后在恢复脚本执行。这种行为即为全停顿。</p><p>新生区的 GC，基本不会有全停顿，但老生区占用空间大，执行 GC 可能会长时间占用主线程，此时就会造成页面卡顿现象。</p><p>V8 采用 Incremental Marking 算法，即增量标记算法。将标记过程细分为小的子标记过程，让 GC 标记与 JavaScript 应用逻辑交替进行，直到标记阶段完成。</p><p>将大任务分割成小任务，小任务执行时间短，穿插在 JavaScript 任务中执行，从而尽可能减少卡顿现象。这个设计思路与 React Fiber 很像。</p><h4 id="早期的-gc-机制-引用计数" tabindex="-1"><a class="header-anchor" href="#早期的-gc-机制-引用计数" aria-hidden="true">#</a> 早期的 GC 机制 - 引用计数</h4><p>引擎维护一张引用表，保存内存里资源的引用次数，如果一个资源的引用次数为 0，则表示该资源内存可以被回收。</p><p>由于这个机制的缺点是不能回收循环引用，因此被废弃。</p><h3 id="内存泄露-memory-leak" tabindex="-1"><a class="header-anchor" href="#内存泄露-memory-leak" aria-hidden="true">#</a> 内存泄露(Memory leak)</h3><p>当不在用到的对象内存没有及时被回收时，我们称为内存泄露。</p><h4 id="原因" tabindex="-1"><a class="header-anchor" href="#原因" aria-hidden="true">#</a> 原因</h4><ol><li>数据缓存大小超限；</li><li>浏览器队列消费不及时，导致一些作用域变量不能及时释放；</li><li>隐式全局变量。意外定义了全局变量。最好规范定义变量；</li><li>定时器引用未清除；</li><li>不正确的使用闭包。闭包内变量的间接/错误引用；</li><li>事件重复监听；</li><li>未清理的 <code>console</code> 输出，也可能造成内存泄露。</li></ol><h4 id="避免内存泄露的方法" tabindex="-1"><a class="header-anchor" href="#避免内存泄露的方法" aria-hidden="true">#</a> 避免内存泄露的方法</h4><ol><li>尽量减少全局变量的使用，避免意外定义全局变量；</li><li>闭包内的变量引用(如 Dom 元素)，要及时清理；</li><li>定时器引用及时清除；</li><li>使用 <code>WeakSet</code> 和 <code>Weakmap</code> 结构，它们都是弱引用，不影响 GC 机制；</li><li>生成环境，及时清理 <code>console</code> 输出。</li></ol></div><!--]--><!--[--><!--]--></div><!-- <PageMeta v-if="useMeta" /> --><!----><!--[--><!--[--><!--]--><div class="footer"><p> MIT Licensed | Copyright © 2020-present <a href="https://github.com/moriarty47" target="_blank" rel="noopener noreferrer"> Moriarty47 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z" data-darkreader-inline-fill="" style="--darkreader-inline-fill:currentColor;"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9" data-darkreader-inline-fill="" style="--darkreader-inline-fill:currentColor;"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!--]--></main><!--]--><div class="page-catalog-container"><h5 class="tip">FLOOR</h5><ul><!--[--><!--[--><li class="page-catalog-menu page-catalog-menu-depth_2"><a aria-current="page" href="/blog/JSBooks/JavaScript/gc.html#javascript-垃圾回收-garbage-collection" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="JavaScript 垃圾回收(Garbage Collection)"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;" title="JavaScript 垃圾回收(Garbage Collection)"><!--[-->JavaScript 垃圾回收(Garbage Collection)<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu page-catalog-menu-depth_3"><a aria-current="page" href="/blog/JSBooks/JavaScript/gc.html#调用栈中的数据回收" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="调用栈中的数据回收"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;" title="调用栈中的数据回收"><!--[-->调用栈中的数据回收<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu page-catalog-menu-depth_3"><a aria-current="page" href="/blog/JSBooks/JavaScript/gc.html#堆中的数据回收" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="堆中的数据回收"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;" title="堆中的数据回收"><!--[-->堆中的数据回收<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu page-catalog-menu-depth_4"><a aria-current="page" href="/blog/JSBooks/JavaScript/gc.html#新生区中的垃圾回收" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="新生区中的垃圾回收"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;" title="新生区中的垃圾回收"><!--[-->新生区中的垃圾回收<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu page-catalog-menu-depth_4"><a aria-current="page" href="/blog/JSBooks/JavaScript/gc.html#老生区中的垃圾回收" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="老生区中的垃圾回收"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;" title="老生区中的垃圾回收"><!--[-->老生区中的垃圾回收<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu page-catalog-menu-depth_4"><a aria-current="page" href="/blog/JSBooks/JavaScript/gc.html#全停顿行为" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="全停顿行为"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;" title="全停顿行为"><!--[-->全停顿行为<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu page-catalog-menu-depth_4"><a aria-current="page" href="/blog/JSBooks/JavaScript/gc.html#早期的-gc-机制-引用计数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="早期的 GC 机制 - 引用计数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;" title="早期的 GC 机制 - 引用计数"><!--[-->早期的 GC 机制 - 引用计数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu page-catalog-menu-depth_3"><a aria-current="page" href="/blog/JSBooks/JavaScript/gc.html#内存泄露-memory-leak" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="内存泄露(Memory leak)"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;" title="内存泄露(Memory leak)"><!--[-->内存泄露(Memory leak)<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu page-catalog-menu-depth_4"><a aria-current="page" href="/blog/JSBooks/JavaScript/gc.html#原因" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="原因"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;" title="原因"><!--[-->原因<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu page-catalog-menu-depth_4"><a aria-current="page" href="/blog/JSBooks/JavaScript/gc.html#避免内存泄露的方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="避免内存泄露的方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;" title="避免内存泄露的方法"><!--[-->避免内存泄露的方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--><!--]--></ul></div><!--]--></div><!----><!--]--></div>
    <div id="modal-container"></div>
    <div id="ctxmenu-container"></div>
    <script type="module" src="/blog/assets/app-bf7bc9cc.js" defer></script>
  </body>
</html>
