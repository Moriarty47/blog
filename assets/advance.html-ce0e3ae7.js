import{_ as c,M as l,p as r,q as u,N as t,V as e,Q as n,t as s,a0 as o}from"./framework-5411b43d.js";const i="/blog/assets/pipeline-eb73b989.png",k={},d=n("h2",{id:"进阶用法",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#进阶用法","aria-hidden":"true"},"#"),s(" 进阶用法")],-1),g=n("h3",{id:"自动清理构建目录",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#自动清理构建目录","aria-hidden":"true"},"#"),s(" 自动清理构建目录")],-1),m=n("p",null,"避免构建前每次都需要手动删除 dist",-1),A=n("ul",null,[n("li",null,"使用 npm scripts")],-1),y=n("pre",{class:"language-json"},[n("code",null,[n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"scripts"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"build"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"rm -rf ./dist && webpack"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"build2"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"rimraf ./dist && webpack"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1),f=n("ul",null,[n("li",null,"使用 CleanWebpackPlugin 插件。默认 删除 output 指定的输出目录")],-1),h=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"entry"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./src/index.js'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'dist'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'bundle.js'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"CleanWebpackPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),_=o('<h3 id="postcss-插件-autoprefixer-自动补齐-css3-前缀" tabindex="-1"><a class="header-anchor" href="#postcss-插件-autoprefixer-自动补齐-css3-前缀" aria-hidden="true">#</a> PostCSS 插件 autoprefixer 自动补齐 CSS3 前缀</h3><p>CSS3 属性为什么需要前缀？</p><ul><li>各个浏览器实现有差别，需要进行区分</li><li><ul><li>Trident(-ms)</li></ul></li><li><ul><li>Geko(-moz)</li></ul></li><li><ul><li>Webkit(-webkit)</li></ul></li><li><ul><li>Presto(-o)</li></ul></li></ul>',3),x={href:"https://caniuse.com",target:"_blank",rel:"noopener noreferrer"},C=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"module"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"rules"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.(le|c)ss$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"use"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
          `),n("span",{class:"token string"},"'style-loader'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token string"},"'css-loader'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token string"},"'less-loader'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token literal-property property"},"loader"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'postcss-loader'"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token literal-property property"},"options"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
              `),n("span",{class:"token function-variable function"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"["),s(`
                `),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'autoprefixer'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
                  `),n("span",{class:"token literal-property property"},"browsers"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'last 2 version'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'>1%'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'ios 7'"),n("span",{class:"token punctuation"},"]"),s(`
                `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
              `),n("span",{class:"token punctuation"},"]"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
          `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"]"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),b=o('<h3 id="移动端-css-px-自动转换-rem" tabindex="-1"><a class="header-anchor" href="#移动端-css-px-自动转换-rem" aria-hidden="true">#</a> 移动端 CSS px 自动转换 rem</h3><p>移动设备浏览器分辨率不同。 早期使用 CSS 媒体查询实现响应式布局，缺点是需要写多套适配样式代码。</p><p>rem 是什么？</p><ul><li><p>W3C 对 rem 的定义为 font-size of the root element(根元素的字体大小)</p></li><li><ul><li>rem 是相对单位</li></ul></li><li><ul><li>px 是绝对单位</li></ul></li></ul>',4),D={href:"https://github.com/amfe/lib-flexible",target:"_blank",rel:"noopener noreferrer"},B=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"module"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"rules"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.(le|c)ss$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"use"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
          `),n("span",{class:"token string"},"'style-loader'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token string"},"'css-loader'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token string"},"'less-loader'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token literal-property property"},"loader"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'postcss-loader'"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token literal-property property"},"options"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
              `),n("span",{class:"token function-variable function"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"["),s(`
                `),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'autoprefixer'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
                  `),n("span",{class:"token literal-property property"},"browsers"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'last 2 version'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'>1%'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'ios 7'"),n("span",{class:"token punctuation"},"]"),s(`
                `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
              `),n("span",{class:"token punctuation"},"]"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
          `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token literal-property property"},"loader"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'px2rem-loader'"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token literal-property property"},"options"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
              `),n("span",{class:"token literal-property property"},"remUnit"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},","),s(`
              `),n("span",{class:"token literal-property property"},"remPrecesion"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
          `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"]"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),w=n("pre",{class:"language-html"},[n("code",null,[n("span",{class:"token doctype"},[n("span",{class:"token punctuation"},"<!"),n("span",{class:"token doctype-tag"},"DOCTYPE"),s(),n("span",{class:"token name"},"html"),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("html")]),s(),n("span",{class:"token attr-name"},"lang"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("zh"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("head")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("meta")]),s(),n("span",{class:"token attr-name"},"charset"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("UTF-8"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("meta")]),s(),n("span",{class:"token attr-name"},"name"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("viewport"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"content"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("width=device-width, initial-scale=1.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("title")]),n("span",{class:"token punctuation"},">")]),s("search"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("title")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"type"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("text/javascript"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
      `),n("span",{class:"token comment"},"// lib-flexible 库代码"),s(`
    `)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("head")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("body")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("div")]),s(),n("span",{class:"token attr-name"},"id"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("root"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("div")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("body")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("html")]),n("span",{class:"token punctuation"},">")]),s(`

`)])],-1),F=o('<h3 id="静态资源内联" tabindex="-1"><a class="header-anchor" href="#静态资源内联" aria-hidden="true">#</a> 静态资源内联</h3><ul><li>代码</li><li><ul><li>页面框架的初始化脚本</li></ul></li><li><ul><li>上报相关打点</li></ul></li><li><ul><li>CSS 内联避免页面闪动</li></ul></li><li>请求</li><li><ul><li>减少 HTTP 网络请求数</li></ul></li><li><ul><li>小图片或字体内联(url-loader)</li></ul></li></ul><p><strong>意义</strong></p><ul><li>工程维护 常见场景： <ol><li>对于多页面应用(MPA)中的许多重复内容如 meta 信息等，借助 html-webpack-plugin 将 meta 信息内联进去；</li><li>小图片、字体等文件转换为 base64 并内联源代码中。</li></ol></li><li>页面加载性能 减少 HTTP 网络请求数</li><li>页面加载体验 我们都知道浏览器解析 HTML 源码是从上到下解析，因此我们会把 CSS 放到头部，JS 放置到底部。以 SSR 场景为例，如果不将打包出来的 CSS 内联进 HTML 里面，HTML 出来的时候页面的结构已经有了，但是还需要发送一次请求去请求 css，这个时候就会出现页面闪烁，网络情况差的时候更加明显。</li></ul><h4 id="html-js-内联引入" tabindex="-1"><a class="header-anchor" href="#html-js-内联引入" aria-hidden="true">#</a> HTML / JS 内联引入</h4>',5),j=n("p",null,"使用 ejs 语法结合 raw-loader 实现内联",-1),E=n("pre",{class:"language-html"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s("$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'raw-loader!babel-loader!./meta.html'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}")])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s("$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'raw-loader!babel-loader!../node_modules/lib-flexible'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}")])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`
`)])],-1),v=n("p",null,"实现自定义 loader",-1),S=n("pre",{class:"language-javascript"},[n("code",null,[s(`
`),n("span",{class:"token keyword"},"const"),s(" fs "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'fs'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" path "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'path'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"getContent"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("matched"),n("span",{class:"token punctuation"},","),s(" reg"),n("span",{class:"token punctuation"},","),s(" resourcePath")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" result "),n("span",{class:"token operator"},"="),s(" matched"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"match"),n("span",{class:"token punctuation"},"("),s("reg"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" relativePath "),n("span",{class:"token operator"},"="),s(" result "),n("span",{class:"token operator"},"&&"),s(" result"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" absolutePath "),n("span",{class:"token operator"},"="),s(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),s("path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"dirname"),n("span",{class:"token punctuation"},"("),s("resourcePath"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" relativePath"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" fs"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"readFileSync"),n("span",{class:"token punctuation"},"("),s("absolutePath"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'utf-8'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

module`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function-variable function"},"exports"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"function"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"content"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" htmlReg "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},'<link.*?href=".*?\\__inline">'),n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-flags"},"gmi")]),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" jsReg "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},'<script.*?src=".*?\\?__inline".*?>.*?<\\/script>'),n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-flags"},"gmi")]),n("span",{class:"token punctuation"},";"),s(`

  content `),n("span",{class:"token operator"},"="),s(" content"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),s("jsReg"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"matched"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" jsContent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"getContent"),n("span",{class:"token punctuation"},"("),s("matched"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},'src="(.*)\\?__inline'),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("resourcePath"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},'<script type="text/javascript">'),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("jsContent"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"<\/script>"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),s("htmlReg"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"matched"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" htmlContent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"getContent"),n("span",{class:"token punctuation"},"("),s("matched"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},'href="(.*)\\?__inline'),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("resourcePath"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" htmlContent"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"module.exports = "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),n("span",{class:"token constant"},"JSON"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"stringify"),n("span",{class:"token punctuation"},"("),s("content"),n("span",{class:"token punctuation"},")"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])],-1),P=n("p",null,"模板文件中使用",-1),q=n("pre",{class:"language-html"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("link")]),s(),n("span",{class:"token attr-name"},"href"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("./meta.html?__inline"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"type"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("text/javascript"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"src"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("../node_modules//lib-flexible/flexible.js?__inline"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"}),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`
`)])],-1),M=n("h4",{id:"css-内联引入",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#css-内联引入","aria-hidden":"true"},"#"),s(" CSS 内联引入")],-1),I=n("p",null,"核心思路: 将页面打包过程的产生的所有 CSS 提取成一个独立的文件，然后将这个 CSS 文件内联进 HTML head 标签内，需要使用 mini-css-extract-plugin 和 html-inline-css-webpack-plugin 实现。",-1),T=n("p",null,"style-loader",-1),O=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"module"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"rules"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.(le|c)ss$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"use"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
          `),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token literal-property property"},"loader"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'style-loader'"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token literal-property property"},"options"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
              `),n("span",{class:"token literal-property property"},"insertAt"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'top'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// 样式插入到<head>中"),s(`
              `),n("span",{class:"token literal-property property"},"singleton"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// 将所有的style标签合并成一个"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
          `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token string"},"'css-loader'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token string"},"'less-loader'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token literal-property property"},"loader"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'postcss-loader'"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token literal-property property"},"options"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
              `),n("span",{class:"token function-variable function"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"["),s(`
                `),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'autoprefixer'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
                  `),n("span",{class:"token literal-property property"},"browsers"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'last 2 version'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'>1%'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'ios 7'"),n("span",{class:"token punctuation"},"]"),s(`
                `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
              `),n("span",{class:"token punctuation"},"]"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
          `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token literal-property property"},"loader"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'px2rem-loader'"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token literal-property property"},"options"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
              `),n("span",{class:"token literal-property property"},"remUnit"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},","),s(`
              `),n("span",{class:"token literal-property property"},"remPrecesion"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
          `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"]"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),N=n("p",null,"html-inline-css-webpack-plugin 需要放在 html-webpack-plugin 后面",-1),R=n("pre",{class:"language-javascript"},[n("code",null,[s("  module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"MiniCssExtractPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'[name]__[contenthash:8].css'"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"HtmlWebpackPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"HTMLInlineCSSWebpackPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),z=n("h4",{id:"图片、字体内联",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#图片、字体内联","aria-hidden":"true"},"#"),s(" 图片、字体内联")],-1),W=n("p",null,"使用 url-loader",-1),L=n("pre",{class:"language-javascript"},[n("code",null,[s("  module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"module"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"rules"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},".(png|jpg|gif|jpeg)$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"use"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
            `),n("span",{class:"token punctuation"},"{"),s(`
              `),n("span",{class:"token literal-property property"},"loader"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'url-loader'"),n("span",{class:"token punctuation"},","),s(`
              `),n("span",{class:"token literal-property property"},"options"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'[name]_[hash:8].[ext]'"),n("span",{class:"token punctuation"},","),s(`
                `),n("span",{class:"token literal-property property"},"limit"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"10240"),s(`
              `),n("span",{class:"token punctuation"},"}"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
          `),n("span",{class:"token punctuation"},"]"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},".(woff|woff2|eot|ttf|otf)$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"use"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
            `),n("span",{class:"token punctuation"},"{"),s(`
              `),n("span",{class:"token literal-property property"},"loader"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'url-loader'"),n("span",{class:"token punctuation"},","),s(`
              `),n("span",{class:"token literal-property property"},"options"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'[name]_[hash:8][ext]'"),n("span",{class:"token punctuation"},","),s(`
                `),n("span",{class:"token literal-property property"},"limit"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"10240"),s(`
              `),n("span",{class:"token punctuation"},"}"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
          `),n("span",{class:"token punctuation"},"]"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"]"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),H=n("p",null,"缺点：不能个性化设置某张图片自动编码",-1),U=n("p",null,[s("实现自定义 loader ，对使用"),n("code",null,"?__inline"),s("语法进行自动编码。 核心代码如下：")],-1),$=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"loader"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"content"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" options "),n("span",{class:"token operator"},"="),s(" loaderUtils"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getOptions"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token function"},"validateOptions"),n("span",{class:"token punctuation"},"("),s("schema"),n("span",{class:"token punctuation"},","),s(" options"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'File Loader'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"baseDataPath"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'options'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" hasInlineFlag "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\?__inline$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"test"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("resource"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("hasInlineFlag"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" file "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("resourcePath"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Get MIME type"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" mimetype "),n("span",{class:"token operator"},"="),s(" options"),n("span",{class:"token punctuation"},"."),s("mimetype "),n("span",{class:"token operator"},"||"),s(" mime"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getType"),n("span",{class:"token punctuation"},"("),s("file"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),s(" content "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'string'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      content `),n("span",{class:"token operator"},"="),s(" Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),s("content"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"module.exports = "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),n("span",{class:"token constant"},"JSON"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"stringify"),n("span",{class:"token punctuation"},"("),s(`
      `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"data:"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("mimetype "),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"''"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},";base64,"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("content"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'base64'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1),J=o('<h3 id="source-map" tabindex="-1"><a class="header-anchor" href="#source-map" aria-hidden="true">#</a> source map</h3><p>通过 source map 定位到源代码</p><p>开发环境开启，线上环境关闭</p><p>线上排查问题时可将 source map 上传到错误监控系统，用于排查问题。</p><table><thead><tr><th style="text-align:left;">类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">eval</td><td style="text-align:left;">使用 eval 包裹模块代码</td></tr><tr><td style="text-align:left;">source map</td><td style="text-align:left;">生成.map 文件</td></tr><tr><td style="text-align:left;">cheap</td><td style="text-align:left;">不包含列信息</td></tr><tr><td style="text-align:left;">inline</td><td style="text-align:left;">将.map 作为 DataURI 嵌入，不单独生成.map 文件</td></tr><tr><td style="text-align:left;">module</td><td style="text-align:left;">包含 loader 的 source map</td></tr></tbody></table><table><thead><tr><th style="text-align:left;">devtool</th><th style="text-align:left;">首次构建</th><th style="text-align:left;">二次构建</th><th style="text-align:left;">是否适合生产环境</th><th style="text-align:left;">定位的代码</th></tr></thead><tbody><tr><td style="text-align:left;">(none)</td><td style="text-align:left;">+++</td><td style="text-align:left;">+++</td><td style="text-align:left;">yes</td><td style="text-align:left;">最终输出的代码</td></tr><tr><td style="text-align:left;">eval</td><td style="text-align:left;">+++</td><td style="text-align:left;">+++</td><td style="text-align:left;">no</td><td style="text-align:left;">webpack 生成的代码(单独模块)</td></tr><tr><td style="text-align:left;">cheap-eval-source-map</td><td style="text-align:left;">+</td><td style="text-align:left;">++</td><td style="text-align:left;">no</td><td style="text-align:left;">经过 loader 转换后的代码(只能看到行)</td></tr><tr><td style="text-align:left;">cheap-module-eval-source-map</td><td style="text-align:left;">O</td><td style="text-align:left;">++</td><td style="text-align:left;">no</td><td style="text-align:left;">源代码(只能看到行)</td></tr><tr><td style="text-align:left;">eval-source-map</td><td style="text-align:left;">--</td><td style="text-align:left;">+</td><td style="text-align:left;">no</td><td style="text-align:left;">源代码</td></tr><tr><td style="text-align:left;">cheap-source-map</td><td style="text-align:left;">+</td><td style="text-align:left;">O</td><td style="text-align:left;">yes</td><td style="text-align:left;">经过 loader 转化后的代码(只能看到行)</td></tr><tr><td style="text-align:left;">cheap-module-source-map</td><td style="text-align:left;">O</td><td style="text-align:left;">-</td><td style="text-align:left;">yes</td><td style="text-align:left;">源代码(只能看到行)</td></tr><tr><td style="text-align:left;">inline-cheap-source-map</td><td style="text-align:left;">+</td><td style="text-align:left;">O</td><td style="text-align:left;">no</td><td style="text-align:left;">经过 loader 转换后的代码(只能看到行)</td></tr><tr><td style="text-align:left;">inline-cheap-module-source-map</td><td style="text-align:left;">O</td><td style="text-align:left;">-</td><td style="text-align:left;">no</td><td style="text-align:left;">源代码(只能看到行)</td></tr><tr><td style="text-align:left;">source-map</td><td style="text-align:left;">--</td><td style="text-align:left;">--</td><td style="text-align:left;">yes</td><td style="text-align:left;">源代码</td></tr><tr><td style="text-align:left;">inline-source-map</td><td style="text-align:left;">--</td><td style="text-align:left;">--</td><td style="text-align:left;">no</td><td style="text-align:left;">源代码</td></tr><tr><td style="text-align:left;">hidden-source-map</td><td style="text-align:left;">--</td><td style="text-align:left;">--</td><td style="text-align:left;">yes</td><td style="text-align:left;">源代码</td></tr></tbody></table><h3 id="提取页面公共资源" tabindex="-1"><a class="header-anchor" href="#提取页面公共资源" aria-hidden="true">#</a> 提取页面公共资源</h3><p>基础库分离。</p>',8),G=n("p",null,"使用 html-webpack-externals-plugin 例如：将 react、react-dom 基础包通过 cdn 引入，不打入 bundle 中。",-1),V=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" HtmlWebpackExternalsPlugin "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'html-webpack-externals-plugin'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"HtmlWebpackExternalsPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"externals"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token literal-property property"},"module"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'react'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"entry"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'//11.url.cn/now/lib/15.1.0/react-with-addons.min.js?_bid=3123'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"global"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'React'"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token literal-property property"},"module"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'react-dom'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"entry"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'//11.url.cn/now/lib/15.1.0/react-dom.min.js?_bid=3123'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"global"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'ReactDOM'"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"]"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1),K=n("p",null,"利用 SplitChunksPlugin 进行公共脚本分离 Webpack 4 内置，替代 CommonsChunkPlugin 插件",-1),Q=n("ul",null,[n("li",null,"async 异步引入的库进行分离(默认)"),n("li",null,"initial 同步引入的库进行分离"),n("li",null,"all 所有引入的库进行分离(推荐)")],-1),Y=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
 `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"splitChunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"chunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'async'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"minSize"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"30000"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"maxSize"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"minChunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"maxAsyncRequests"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"maxInitialRequests"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"automaticNameDelimiter"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'~'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"cacheGroups"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"vendors"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"[\\\\/]node_modules[\\\\/]"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"priority"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token operator"},"-"),n("span",{class:"token number"},"10"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
 `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1),X=n("ul",null,[n("li",null,"分离基础包")],-1),Z=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"splitChunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"cacheGroups"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"commons"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"(react|react-dom)"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'vendors'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"chunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'all'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1),nn=n("ul",null,[n("li",null,"提取页面公共文件")],-1),sn=n("p",null,"minChunks：设置最小引用次数 minSize：分离包体积的大小",-1),tn=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"splitChunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"minSize"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"cacheGroups"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"commons"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'commons'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"chunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'all'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"minChunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"2"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1),an=o('<h3 id="优化构建时命令行的显示日志" tabindex="-1"><a class="header-anchor" href="#优化构建时命令行的显示日志" aria-hidden="true">#</a> 优化构建时命令行的显示日志</h3><p>统计信息 stats</p><table-center><table><thead><tr><th style="text-align:left;">预设值</th><th style="text-align:left;">可选项</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">errors-only</td><td style="text-align:left;">none</td><td style="text-align:left;">只在发生错误时输出</td></tr><tr><td style="text-align:left;">minimal</td><td style="text-align:left;">none</td><td style="text-align:left;">只在发生错误或有新的编译时输出</td></tr><tr><td style="text-align:left;">none</td><td style="text-align:left;">false</td><td style="text-align:left;">没有输出</td></tr><tr><td style="text-align:left;">normal</td><td style="text-align:left;">true</td><td style="text-align:left;">标准输出</td></tr><tr><td style="text-align:left;">verbose</td><td style="text-align:left;">none</td><td style="text-align:left;">全部输出</td></tr></tbody></table></table-center><p>插件优化 friendly-errors-webpack-plugin</p><ul><li>success</li><li>warning</li><li>error</li></ul>',5),en=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"FriendlyErrorsWebpackPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"stats"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'errors-only'"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1),on=n("h3",{id:"构建异常和中断处理",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#构建异常和中断处理","aria-hidden":"true"},"#"),s(" 构建异常和中断处理")],-1),pn=n("li",null,[n("p",null,"如何判断构建是否成功？ 在 CI/CD 的 pipeline 或者发布系统需要知道当前构建状态"),n("p",null,"每次构建完成后输入 echo $? 获取错误码"),n("p",null,"webpack4 之前的版本构建失败不会抛出错误码(error code)"),n("p",null,"Node.js 中的 process.exit 规范"),n("ul",null,[n("li",null,"0 表示成功完成，回调函数中，err 为 null"),n("li",null,"非 0 表示执行失败，回调函数中，err 不为 null，err.code 为传给 exit 的数字")])],-1),ln=n("p",null,"如何主动捕获并处理构建错误？",-1),cn=n("p",null,"compiler 在每次构建结束后触发 done hook",-1),rn=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token comment"},"// webpack 4"),s(`
    `),n("span",{class:"token keyword"},"function"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("hooks"),n("span",{class:"token punctuation"},"."),s("done"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"tap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'done'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token parameter"},"stats"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" errors "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(" stats"),n("span",{class:"token punctuation"},"."),s("compilation"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("errors "),n("span",{class:"token operator"},"&&"),s(" errors"),n("span",{class:"token punctuation"},"."),s(`length
        `),n("span",{class:"token operator"},"&&"),s(" process"),n("span",{class:"token punctuation"},"."),s("argv"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"indexOf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'--watch'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token operator"},"-"),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
          console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Build error.'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
          process`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1),un=n("p",null,"process.exit 主动处理构建报错",-1),kn=o('<h3 id="tree-shaking-原理分析及使用" tabindex="-1"><a class="header-anchor" href="#tree-shaking-原理分析及使用" aria-hidden="true">#</a> Tree Shaking 原理分析及使用</h3><h4 id="dce-dead-code-elimination" tabindex="-1"><a class="header-anchor" href="#dce-dead-code-elimination" aria-hidden="true">#</a> DCE(Dead Code Elimination)</h4><p>死码消除（Dead code elimination）是一种编译最优化技术，它的用途是移除对程序运行结果没有任何影响的代码。</p><ul><li>可以减少程序的大小；</li><li>可以避免程序在运行中进行不相关的运算行为，减少它运行的时间。</li></ul><p>不会被运行到的代码（unreachable code）以及只会影响到无关程序运行结果的变量（Dead Variables），都是死码（Dead code）的范畴。</p><ul><li>代码不会被执行，不可到达</li><li>代码执行的结果不会被用到</li><li>代码只会影响死变量(只写不读)</li></ul><h4 id="tree-shaking-原理" tabindex="-1"><a class="header-anchor" href="#tree-shaking-原理" aria-hidden="true">#</a> Tree Shaking 原理</h4><p>一个模块可能有多个方法，只要其中的某个方法使用到了，则整个文件都会被打包到 bundle 中去，tree shaking 就是只把用到的方法打包到 bundle 中，没有使用到的方法会在 uglify 阶段被擦除掉。</p><p>webpack 默认支持，produciton 模式下默认开启，在 .babelrc 中设置 modules: false 即可</p><p><strong>必须是 ES6 语法，不支持 CJS</strong></p><p>利用 ES6 模块的特点</p><ul><li>只能作为模块顶层的语句出现</li><li>import 的模块名只能是字符串变量</li><li>import binding 是 immutable 的</li></ul><h3 id="scope-hoisting-原理分析和使用" tabindex="-1"><a class="header-anchor" href="#scope-hoisting-原理分析和使用" aria-hidden="true">#</a> Scope Hoisting 原理分析和使用</h3><p>现象：构建后的代码存在大量的闭包代码</p><ul><li>大量函数闭包包裹代码，导致代码体积增大(模块越多越明显)</li><li>运行代码时创建的函数作用域变多，内存开销变大</li></ul><h4 id="模块转化分析" tabindex="-1"><a class="header-anchor" href="#模块转化分析" aria-hidden="true">#</a> 模块转化分析</h4><ul><li>被 webpack 转换后的模块会带上一层包裹</li><li><code>import</code> 会被转换成 <code>__webpack_require__</code></li></ul>',17),dn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 模块代码"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" helloworld "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./helloworld'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},"'../../common'"),n("span",{class:"token punctuation"},";"),s(`

document`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"helloworld"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 模块初始化函数"),s(`
`),n("span",{class:"token comment"},"/* 0 */"),s(`
`),n("span",{class:"token doc-comment comment"},[s("/***/ (function(module, __webpack_exports__, __webpack_require__) "),n("span",{class:"token punctuation"},"{"),s(`

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */`)]),s(),n("span",{class:"token keyword"},"var"),s(" _common_WEBPACK_IMPORTED_MODULE_0__ "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"__webpack_require__"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/* harmony import */"),s(),n("span",{class:"token keyword"},"var"),s(" _helloworld_WEBPACK_IMPORTED_MODULE_1__ "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"__webpack_require__"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

document`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"Object"),n("span",{class:"token punctuation"},"("),s("_helloworld__WEBPACK_IMPORTED_MODULE_1__"),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"helloworld"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token doc-comment comment"},[s("/***/ "),n("span",{class:"token punctuation"},"}"),s(`)
`)])])],-1),gn=o('<h4 id="webpack-模块机制" tabindex="-1"><a class="header-anchor" href="#webpack-模块机制" aria-hidden="true">#</a> webpack 模块机制</h4><ul><li>打包出来的是一个 IIFE (匿名闭包)</li><li>modules 是一个数组，每一项是一个模块初始化函数</li><li><code>__webpack_require__</code> 用来加载模块，返回 <code>module.exports</code></li><li>通过 <code>WEBPACK_REQUIRE_METHOD(0)</code> 启动程序</li></ul>',2),mn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"funciton"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"modules"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"var"),s(" installedModules "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"__webpack_require__"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"moduleId"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("installedModules"),n("span",{class:"token punctuation"},"["),s("moduleId"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token keyword"},"return"),s(" installedModules"),n("span",{class:"token punctuation"},"["),s("moduleId"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),s("exports"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"var"),s(" module "),n("span",{class:"token operator"},"="),s(" installedModules"),n("span",{class:"token punctuation"},"["),s("moduleId"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"i"),n("span",{class:"token operator"},":"),s(" moduleId"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"l"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"exports"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    modules`),n("span",{class:"token punctuation"},"["),s("moduleId"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"call"),n("span",{class:"token punctuation"},"("),s("module"),n("span",{class:"token punctuation"},"."),s("exports"),n("span",{class:"token punctuation"},","),s(" module"),n("span",{class:"token punctuation"},","),s(" module"),n("span",{class:"token punctuation"},"."),s("exports"),n("span",{class:"token punctuation"},","),s(" __webpack_requrie__"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    module`),n("span",{class:"token punctuation"},"."),s("l "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" module"),n("span",{class:"token punctuation"},"."),s("exports"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"__webpack_require__"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s(`
  `),n("span",{class:"token comment"},"/* 0 module */"),s(`
  `),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("module"),n("span",{class:"token punctuation"},","),s(" __webpack_exports__"),n("span",{class:"token punctuation"},","),s(" __webpack_require__")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// ..."),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token comment"},"/* 1 module */"),s(`
  `),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("module"),n("span",{class:"token punctuation"},","),s(" __webpack_exports__"),n("span",{class:"token punctuation"},","),s(" __webpack_require__")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// ..."),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token comment"},"/* ... */"),s(`
  `),n("span",{class:"token comment"},"/* n module */"),s(`
  `),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("module"),n("span",{class:"token punctuation"},","),s(" __webpack_exports__"),n("span",{class:"token punctuation"},","),s(" __webpack_require__")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// ..."),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),An=n("h4",{id:"scope-hoisting-原理分析",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#scope-hoisting-原理分析","aria-hidden":"true"},"#"),s(" Scope Hoisting 原理分析")],-1),yn=n("p",null,"原理：将所有模块的代码按照引用顺序放在一个函数作用域里，然后适当的重命名一些变量以防止变量名冲突",-1),fn=n("p",null,"对比：通过 scope hoisting 可以减少函数声明代码和内存开销",-1),hn=n("p",null,"webpack 默认支持，produciton 模式下默认开启",-1),_n=n("p",null,[n("strong",null,"必须是 ES6 语法，不支持 CJS")],-1),xn=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},[s("webpack"),n("span",{class:"token punctuation"},"."),s("optimize"),n("span",{class:"token punctuation"},"."),s("ModuleConcatenationPlugin")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),Cn=o('<h3 id="代码分割" tabindex="-1"><a class="header-anchor" href="#代码分割" aria-hidden="true">#</a> 代码分割</h3><p>对于大的 Web 应用来说，将所有代码都放在一个文件中显然是不够有效的，特别当你的某些代码是在某些特殊时候才会被使用到，webpack 可以将你的代码库分割成 chunks(代码块)，当代码运行到需要它们的时候才会进行加载。</p><p>适用于</p><ul><li>抽离相同代码到一个共享块</li><li>脚本懒加载，使得初始下载的代码更小 <ul><li>CommonJS: require.ensure</li><li>ES6: 动态 import (可能需要 babel 转换) <ul><li>@babel/plugin-syntax-dynamic-import</li></ul></li></ul></li></ul><h3 id="eslint-必要性" tabindex="-1"><a class="header-anchor" href="#eslint-必要性" aria-hidden="true">#</a> ESLint 必要性</h3><p>提前暴露一些潜在问题</p><p>Airbnb: eslint-config-airbnb / eslint-config-airbnb-base 等</p><h4 id="制定团队的-eslint-规范" tabindex="-1"><a class="header-anchor" href="#制定团队的-eslint-规范" aria-hidden="true">#</a> 制定团队的 ESLint 规范</h4><ul><li>不重复造轮子，基于 eslint:recommend 配置并改进</li><li>能够帮助发现代码错误的规则，全部开区</li><li>帮助保持团队的代码风格统一，而不是限制开发体验</li></ul>',9),bn={href:"https://eslint.org/docs/latest/rules",target:"_blank",rel:"noopener noreferrer"},Dn={href:"https://eslint.vuejs.org/rules/",target:"_blank",rel:"noopener noreferrer"},Bn={href:"https://typescript-eslint.io/rules/",target:"_blank",rel:"noopener noreferrer"},wn=n("h4",{id:"eslint-如何落地",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#eslint-如何落地","aria-hidden":"true"},"#"),s(" ESLint 如何落地？")],-1),Fn=n("p",null,"与 CI/CD 系统集成",-1),jn=n("p",null,[n("img",{src:i,alt:"CI/CD"})],-1),En=n("p",null,"本地开发阶段阶段增加 precommit 钩子",-1),vn=n("p",null,[s("安装 husky "),n("code",null,"npm install --save-dev husky")],-1),Sn=n("p",null,"增加 npm script 通过 lint-staged 增量检查修改的文件",-1),Pn=n("pre",{class:"language-json"},[n("code",null,[n("span",{class:"token comment"},"// package.json"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"scripts"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"precommit"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"lint-staged"'),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"lint-staged"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"linters"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token property"},'"*.{js,scss}"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"eslint --fix"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"git add"'),n("span",{class:"token punctuation"},"]"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1),qn=n("p",null,"和 webpack 集成",-1),Mn=n("p",null,"使用 eslint-loader，构建时检查 JS 规范",-1),In=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"module"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"rules"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.js$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"exclude"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"node_modules"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"use"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
          `),n("span",{class:"token string"},'"babel-loader"'),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token string"},'"eslint-loader"'),s(`
        `),n("span",{class:"token punctuation"},"]"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1),Tn=n("h3",{id:"webpack-打包库和组件",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#webpack-打包库和组件","aria-hidden":"true"},"#"),s(" webpack 打包库和组件")],-1),On=n("li",null,[n("p",null,"打包压缩版和非压缩版本")],-1),Nn=n("p",null,"支持 AMD / CJS / ESM 模块引入，script 直接引入",-1),Rn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// AMD"),s(`
`),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'large-number'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"function"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"largeNumebr"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  largeNumber`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'999'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// CJS"),s(`
`),n("span",{class:"token keyword"},"const"),s(" largeNumber "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'large-number'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
largeNumber`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'999'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// ESM"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"as"),s(" largeNumber "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'large-number'"),n("span",{class:"token punctuation"},";"),s(`
largeNumber`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'999'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// HTML script"),s(`
`),n("span",{class:"token operator"},"<"),s("script src"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},'"path/to/large-number.js"'),n("span",{class:"token operator"},">"),n("span",{class:"token operator"},"<"),n("span",{class:"token operator"},"/"),s("script"),n("span",{class:"token operator"},">"),s(`
`)])],-1),zn=n("h4",{id:"打包输出库的名称",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#打包输出库的名称","aria-hidden":"true"},"#"),s(" 打包输出库的名称")],-1),Wn=n("ul",null,[n("li",null,"未压缩版 large-number.js"),n("li",null,"压缩版 large-number.min.js")],-1),Ln=n("pre",{class:"language-yaml"},[n("code",null,[n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),s(`/dist
  `),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),s("large"),n("span",{class:"token punctuation"},"-"),s(`number.js
  `),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),s("large"),n("span",{class:"token punctuation"},"-"),s(`number.min.js
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),s(`/src
  `),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),s(`index.js
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),s(`index.js
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),s(`webpack.config.js
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),s(`package.json
`)])],-1),Hn=n("h4",{id:"暴露库",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#暴露库","aria-hidden":"true"},"#"),s(" 暴露库")],-1),Un=n("p",null,"配置示例",-1),$n=n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"mode"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'none'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"entry"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token string-property property"},"'large-number'"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./src/index.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string-property property"},"'large-number.min'"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./src/index.js'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'[name].js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"libraryExport"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'default'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"library"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'largeNumber'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// 指定库的全局变量"),s(`
    `),n("span",{class:"token literal-property property"},"libraryTarget"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'umd'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// 支持库引入的方式"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"minimize"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"minimizer"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TerserPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"include"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.min\\.js$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),Jn=n("p",null,"设置入口文件",-1),Gn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// package.json"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token string-property property"},'"version"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"0.0.1"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token string-property property"},'"description"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"description"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token string-property property"},'"main"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"index.js"'),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// index.js"),s(`
`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("process"),n("span",{class:"token punctuation"},"."),s("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"NODE_ENV"),s(),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'production'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./dist/large-number.min.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
  module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./dist/large-number.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1);function Vn(Kn,Qn){const a=l("CodeTool"),p=l("ExternalLinkIcon");return r(),u("div",null,[d,g,m,A,t(a,{class:"language-json","data-ext":"json",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%7B%0A%20%20%22scripts%22%3A%20%7B%0A%20%20%20%20%22build%22%3A%20%22rm%20-rf%20.%2Fdist%20%26%26%20webpack%22%2C%0A%20%20%20%20%22build2%22%3A%20%22rimraf%20.%2Fdist%20%26%26%20webpack%22%2C%0A%20%20%7D%2C%0A%7D%0A",ext:"json"},{default:e(()=>[y]),_:1}),f,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20entry%3A%20'.%2Fsrc%2Findex.js'%2C%0A%20%20output%3A%20%7B%0A%20%20%20%20path%3A%20path.join(__dirname%2C%20'dist')%2C%0A%20%20%20%20filename%3A%20'bundle.js'%2C%0A%20%20%7D%2C%0A%20%20plugins%3A%20%5B%0A%20%20%20%20new%20CleanWebpackPlugin()%0A%20%20%5D%0A%7D%3B%0A",ext:"javascript"},{default:e(()=>[h]),_:1}),_,n("p",null,[s("根据 "),n("a",x,[s("Can I Use"),t(p)]),s(" 规则")]),t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20module%3A%20%7B%0A%20%20%20%20rules%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20test%3A%20%2F%5C.(le%7Cc)ss%24%2F%2C%0A%20%20%20%20%20%20%20%20use%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20'style-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20'css-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20'less-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20loader%3A%20'postcss-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20plugins%3A%20()%20%3D%3E%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require('autoprefixer')(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20browsers%3A%20%5B'last%202%20version'%2C%20'%3E1%25'%2C%20'ios%207'%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%5D%0A%20%20%7D%0A%7D%3B%0A",ext:"javascript"},{default:e(()=>[C]),_:1}),b,n("p",null,[s("px2rem-loader 和 页面渲染时根元素的 font-size 值大小(可以使用"),n("a",D,[s("lib-flexible"),t(p)]),s(")结合使用")]),t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20module%3A%20%7B%0A%20%20%20%20rules%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20test%3A%20%2F%5C.(le%7Cc)ss%24%2F%2C%0A%20%20%20%20%20%20%20%20use%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20'style-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20'css-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20'less-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20loader%3A%20'postcss-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20plugins%3A%20()%20%3D%3E%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require('autoprefixer')(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20browsers%3A%20%5B'last%202%20version'%2C%20'%3E1%25'%2C%20'ios%207'%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20loader%3A%20'px2rem-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20remUnit%3A%2016%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20remPrecesion%3A%208%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%5D%0A%20%20%7D%0A%7D%3B%0A",ext:"javascript"},{default:e(()=>[B]),_:1}),t(a,{class:"language-html","data-ext":"html",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%3C!DOCTYPE%20html%3E%0A%3Chtml%20lang%3D%22zh%22%3E%0A%20%20%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset%3D%22UTF-8%22%20%2F%3E%0A%20%20%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1.0%22%20%2F%3E%0A%20%20%20%20%3Ctitle%3Esearch%3C%2Ftitle%3E%0A%20%20%20%20%3Cscript%20type%3D%22text%2Fjavascript%22%3E%0A%20%20%20%20%20%20%2F%2F%20lib-flexible%20%E5%BA%93%E4%BB%A3%E7%A0%81%0A%20%20%20%20%3C%2Fscript%3E%0A%20%20%3C%2Fhead%3E%0A%20%20%3Cbody%3E%0A%20%20%20%20%3Cdiv%20id%3D%22root%22%3E%3C%2Fdiv%3E%0A%20%20%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A%0A",ext:"html"},{default:e(()=>[w]),_:1}),F,n("ul",null,[n("li",null,[j,t(a,{class:"language-html","data-ext":"html",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%3Cscript%3E%24%7Brequire('raw-loader!babel-loader!.%2Fmeta.html')%7D%3C%2Fscript%3E%0A%3Cscript%3E%24%7Brequire('raw-loader!babel-loader!..%2Fnode_modules%2Flib-flexible')%7D%3C%2Fscript%3E%0A",ext:"html"},{default:e(()=>[E]),_:1})]),n("li",null,[v,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%0Aconst%20fs%20%3D%20require('fs')%3B%0Aconst%20path%20%3D%20require('path')%3B%0A%0Aconst%20getContent%20%3D%20(matched%2C%20reg%2C%20resourcePath)%20%3D%3E%20%7B%0A%20%20%20%20const%20result%20%3D%20matched.match(reg)%3B%0A%20%20%20%20const%20relativePath%20%3D%20result%20%26%26%20result%5B1%5D%3B%0A%20%20%20%20const%20absolutePath%20%3D%20path.join(path.dirname(resourcePath)%2C%20relativePath)%3B%0A%20%20%20%20return%20fs.readFileSync(absolutePath%2C%20'utf-8')%3B%0A%7D%3B%0A%0Amodule.exports%20%3D%20function(content)%20%7B%0A%20%20const%20htmlReg%20%3D%20%2F%3Clink.*%3Fhref%3D%22.*%3F%5C__inline%22%3E%2Fgmi%3B%0A%20%20const%20jsReg%20%3D%20%2F%3Cscript.*%3Fsrc%3D%22.*%3F%5C%3F__inline%22.*%3F%3E.*%3F%3C%5C%2Fscript%3E%2Fgmi%3B%0A%0A%20%20content%20%3D%20content.replace(jsReg%2C%20(matched)%20%3D%3E%20%7B%0A%20%20%20%20const%20jsContent%20%3D%20getContent(matched%2C%20%2Fsrc%3D%22(.*)%5C%3F__inline%2F%2C%20this.resourcePath)%3B%0A%20%20%20%20return%20%60%3Cscript%20type%3D%22text%2Fjavascript%22%3E%24%7BjsContent%7D%3C%2Fscript%3E%60%3B%0A%20%20%7D).replace(htmlReg%2C%20(matched)%20%3D%3E%20%7B%0A%20%20%20%20const%20htmlContent%20%3D%20getContent(matched%2C%20%2Fhref%3D%22(.*)%5C%3F__inline%2F%2C%20this.resourcePath)%3B%0A%20%20%20%20return%20htmlContent%3B%0A%20%20%7D)%3B%0A%0A%20%20return%20%60module.exports%20%3D%20%24%7BJSON.stringify(content)%7D%60%3B%0A%7D%0A%0A",ext:"javascript"},{default:e(()=>[S]),_:1}),P,t(a,{class:"language-html","data-ext":"html",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%3Clink%20href%3D%22.%2Fmeta.html%3F__inline%22%20%2F%3E%0A%3Cscript%20type%3D%22text%2Fjavascript%22%20src%3D%22..%2Fnode_modules%2F%2Flib-flexible%2Fflexible.js%3F__inline%22%3E%3C%2Fscript%3E%0A",ext:"html"},{default:e(()=>[q]),_:1})])]),M,I,n("ul",null,[n("li",null,[T,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20module%3A%20%7B%0A%20%20%20%20rules%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20test%3A%20%2F%5C.(le%7Cc)ss%24%2F%2C%0A%20%20%20%20%20%20%20%20use%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20loader%3A%20'style-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertAt%3A%20'top'%2C%20%2F%2F%20%E6%A0%B7%E5%BC%8F%E6%8F%92%E5%85%A5%E5%88%B0%3Chead%3E%E4%B8%AD%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20singleton%3A%20true%2C%20%2F%2F%20%E5%B0%86%E6%89%80%E6%9C%89%E7%9A%84style%E6%A0%87%E7%AD%BE%E5%90%88%E5%B9%B6%E6%88%90%E4%B8%80%E4%B8%AA%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20'css-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20'less-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20loader%3A%20'postcss-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20plugins%3A%20()%20%3D%3E%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require('autoprefixer')(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20browsers%3A%20%5B'last%202%20version'%2C%20'%3E1%25'%2C%20'ios%207'%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20loader%3A%20'px2rem-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20remUnit%3A%2016%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20remPrecesion%3A%208%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%5D%0A%20%20%7D%0A%7D%3B%0A",ext:"javascript"},{default:e(()=>[O]),_:1})]),n("li",null,[N,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%20%20module.exports%20%3D%20%7B%0A%20%20%20%20plugins%3A%20%5B%0A%20%20%20%20%20%20new%20MiniCssExtractPlugin(%7B%0A%20%20%20%20%20%20%20%20filename%3A%20'%5Bname%5D__%5Bcontenthash%3A8%5D.css'%2C%0A%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20new%20HtmlWebpackPlugin()%2C%0A%20%20%20%20%20%20new%20HTMLInlineCSSWebpackPlugin()%0A%20%20%20%20%5D%0A%20%20%7D%3B%0A",ext:"javascript"},{default:e(()=>[R]),_:1})])]),z,W,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%20%20module.exports%20%3D%20%7B%0A%20%20%20%20module%3A%20%7B%0A%20%20%20%20%20%20rules%3A%20%5B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20test%3A%20%2F.(png%7Cjpg%7Cgif%7Cjpeg)%24%2F%2C%0A%20%20%20%20%20%20%20%20%20%20use%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20loader%3A%20'url-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20'%5Bname%5D_%5Bhash%3A8%5D.%5Bext%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20limit%3A%2010240%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20test%3A%20%2F.(woff%7Cwoff2%7Ceot%7Cttf%7Cotf)%24%2F%2C%0A%20%20%20%20%20%20%20%20%20%20use%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20loader%3A%20'url-loader'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20'%5Bname%5D_%5Bhash%3A8%5D%5Bext%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20limit%3A%2010240%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%5D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A",ext:"javascript"},{default:e(()=>[L]),_:1}),H,U,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"export%20default%20function%20loader(content)%20%7B%0A%20%20const%20options%20%3D%20loaderUtils.getOptions(this)%20%7C%7C%20%7B%7D%3B%0A%0A%20%20validateOptions(schema%2C%20options%2C%20%7B%0A%20%20%20%20name%3A%20'File%20Loader'%2C%0A%20%20%20%20baseDataPath%3A%20'options'%2C%0A%20%20%7D)%3B%0A%0A%20%20const%20hasInlineFlag%20%3D%20%2F%5C%3F__inline%24%2F.test(this.resource)%3B%0A%0A%20%20if%20(hasInlineFlag)%20%7B%0A%20%20%20%20const%20file%20%3D%20this.resourcePath%3B%0A%20%20%20%20%2F%2F%20Get%20MIME%20type%0A%20%20%20%20const%20mimetype%20%3D%20options.mimetype%20%7C%7C%20mime.getType(file)%3B%0A%0A%20%20%20%20if%20(typeof%20content%20%3D%3D%3D%20'string')%20%7B%0A%20%20%20%20%20%20content%20%3D%20Buffer.from(content)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%60module.exports%20%3D%20%24%7BJSON.stringify(%0A%20%20%20%20%20%20%60data%3A%24%7Bmimetype%20%7C%7C%20''%7D%3Bbase64%2C%24%7Bcontent.toString('base64')%7D%60%0A%20%20%20%20)%7D%60%3B%0A%20%20%7D%0A%7D%0A",ext:"javascript"},{default:e(()=>[$]),_:1}),J,n("ul",null,[n("li",null,[G,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"const%20HtmlWebpackExternalsPlugin%20%3D%20require('html-webpack-externals-plugin')%3B%0A%0Amodule.exports%20%3D%20%7B%0A%20%20plugins%3A%20%5B%0A%20%20%20%20new%20HtmlWebpackExternalsPlugin(%7B%0A%20%20%20%20%20%20externals%3A%20%5B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20module%3A%20'react'%2C%0A%20%20%20%20%20%20%20%20%20%20entry%3A%20'%2F%2F11.url.cn%2Fnow%2Flib%2F15.1.0%2Freact-with-addons.min.js%3F_bid%3D3123'%2C%0A%20%20%20%20%20%20%20%20%20%20global%3A%20'React'%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20module%3A%20'react-dom'%2C%0A%20%20%20%20%20%20%20%20%20%20entry%3A%20'%2F%2F11.url.cn%2Fnow%2Flib%2F15.1.0%2Freact-dom.min.js%3F_bid%3D3123'%2C%0A%20%20%20%20%20%20%20%20%20%20global%3A%20'ReactDOM'%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%5D%0A%20%20%20%20%7D)%0A%20%20%5D%0A%7D%0A",ext:"javascript"},{default:e(()=>[V]),_:1})]),n("li",null,[K,Q,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20optimization%3A%20%7B%0A%20%20splitChunks%3A%20%7B%0A%20%20%20%20chunks%3A%20'async'%2C%0A%20%20%20%20minSize%3A%2030000%2C%0A%20%20%20%20maxSize%3A%200%2C%0A%20%20%20%20minChunks%3A%201%2C%0A%20%20%20%20maxAsyncRequests%3A%205%2C%0A%20%20%20%20maxInitialRequests%3A%203%2C%0A%20%20%20%20automaticNameDelimiter%3A%20'~'%2C%0A%20%20%20%20name%3A%20true%2C%0A%20%20%20%20cacheGroups%3A%20%7B%0A%20%20%20%20%20%20vendors%3A%20%7B%0A%20%20%20%20%20%20%20%20test%3A%20%2F%5B%5C%5C%2F%5Dnode_modules%5B%5C%5C%2F%5D%2F%2C%0A%20%20%20%20%20%20%20%20priority%3A%20-10%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%7D%0A%7D%0A",ext:"javascript"},{default:e(()=>[Y]),_:1}),X,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20optimization%3A%20%7B%0A%20%20%20%20splitChunks%3A%20%7B%0A%20%20%20%20%20%20cacheGroups%3A%20%7B%0A%20%20%20%20%20%20%20%20commons%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20test%3A%20%2F(react%7Creact-dom)%2F%2C%0A%20%20%20%20%20%20%20%20%20%20name%3A%20'vendors'%2C%0A%20%20%20%20%20%20%20%20%20%20chunks%3A%20'all'%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A",ext:"javascript"},{default:e(()=>[Z]),_:1}),nn,sn,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20optimization%3A%20%7B%0A%20%20%20%20splitChunks%3A%20%7B%0A%20%20%20%20%20%20minSize%3A%200%2C%0A%20%20%20%20%20%20cacheGroups%3A%20%7B%0A%20%20%20%20%20%20%20%20commons%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20name%3A%20'commons'%2C%0A%20%20%20%20%20%20%20%20%20%20chunks%3A%20'all'%2C%0A%20%20%20%20%20%20%20%20%20%20minChunks%3A%202%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A",ext:"javascript"},{default:e(()=>[tn]),_:1})])]),an,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20plugins%3A%20%5B%0A%20%20%20%20new%20FriendlyErrorsWebpackPlugin()%2C%0A%20%20%5D%2C%0A%20%20stats%3A%20'errors-only'%0A%7D%0A",ext:"javascript"},{default:e(()=>[en]),_:1}),on,n("ul",null,[pn,n("li",null,[ln,cn,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20plugins%3A%20%5B%0A%20%20%20%20%2F%2F%20webpack%204%0A%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20this.hooks.done.tap('done'%2C%20stats%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20%7B%20errors%20%7D%20%3D%20stats.compilation%3B%0A%20%20%20%20%20%20%20%20if%20(errors%20%26%26%20errors.length%0A%20%20%20%20%20%20%20%20%26%26%20process.argv.indexOf('--watch')%20%3D%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.log('Build%20error.')%3B%0A%20%20%20%20%20%20%20%20%20%20process.exit(1)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%5D%2C%0A%7D%0A",ext:"javascript"},{default:e(()=>[rn]),_:1}),un])]),kn,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%2F%2F%20%E6%A8%A1%E5%9D%97%E4%BB%A3%E7%A0%81%0Aimport%20%7B%20helloworld%20%7D%20from%20'.%2Fhelloworld'%3B%0Aimport%20'..%2F..%2Fcommon'%3B%0A%0Adocument.write(helloworld())%3B%0A%0A%2F%2F%20%E6%A8%A1%E5%9D%97%E5%88%9D%E5%A7%8B%E5%8C%96%E5%87%BD%E6%95%B0%0A%2F*%200%20*%2F%0A%2F***%2F%20(function(module%2C%20__webpack_exports__%2C%20__webpack_require__)%20%7B%0A%0A%22use%20strict%22%3B%0A__webpack_require__.r(__webpack_exports__)%3B%0A%2F*%20harmony%20import%20*%2F%20var%20_common_WEBPACK_IMPORTED_MODULE_0__%20%3D%20__webpack_require__(1)%3B%0A%2F*%20harmony%20import%20*%2F%20var%20_helloworld_WEBPACK_IMPORTED_MODULE_1__%20%3D%20__webpack_require__(2)%3B%0A%0Adocument.write(Object(_helloworld__WEBPACK_IMPORTED_MODULE_1__%5B%22helloworld%22%5D)())%3B%0A%2F***%2F%20%7D)%0A",ext:"javascript"},{default:e(()=>[dn]),_:1}),gn,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"(funciton(modules)%20%7B%0A%20%20var%20installedModules%20%3D%20%7B%7D%3B%0A%0A%20%20function%20__webpack_require__(moduleId)%20%7B%0A%20%20%20%20if%20(installedModules%5BmoduleId%5D)%0A%20%20%20%20%20%20return%20installedModules%5BmoduleId%5D.exports%3B%0A%20%20%20%20var%20module%20%3D%20installedModules%5BmoduleId%5D%20%3D%20%7B%0A%20%20%20%20%20%20i%3A%20moduleId%2C%0A%20%20%20%20%20%20l%3A%20false%2C%0A%20%20%20%20%20%20exports%3A%20%7B%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20modules%5BmoduleId%5D.call(module.exports%2C%20module%2C%20module.exports%2C%20__webpack_requrie__)%3B%0A%20%20%20%20module.l%20%3D%20true%3B%0A%20%20%20%20return%20module.exports%3B%0A%20%20%7D%0A%20%20__webpack_require__(0)%3B%0A%7D)(%5B%0A%20%20%2F*%200%20module%20*%2F%0A%20%20(function%20(module%2C%20__webpack_exports__%2C%20__webpack_require__)%20%7B%0A%20%20%20%20%2F%2F%20...%0A%20%20%7D)%2C%0A%20%20%2F*%201%20module%20*%2F%0A%20%20(function%20(module%2C%20__webpack_exports__%2C%20__webpack_require__)%20%7B%0A%20%20%20%20%2F%2F%20...%0A%20%20%7D)%2C%0A%20%20%2F*%20...%20*%2F%0A%20%20%2F*%20n%20module%20*%2F%0A%20%20(function%20(module%2C%20__webpack_exports__%2C%20__webpack_require__)%20%7B%0A%20%20%20%20%2F%2F%20...%0A%20%20%7D)%2C%0A%5D)%3B%0A",ext:"javascript"},{default:e(()=>[mn]),_:1}),An,yn,fn,hn,_n,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20plugins%3A%20%5B%0A%20%20%20%20new%20webpack.optimize.ModuleConcatenationPlugin()%0A%20%20%5D%0A%7D%3B%0A",ext:"javascript"},{default:e(()=>[xn]),_:1}),Cn,n("p",null,[n("a",bn,[s("ESLint Rules"),t(p)])]),n("p",null,[n("a",Dn,[s("Vue Rules"),t(p)])]),n("p",null,[n("a",Bn,[s("TypeScript Rules"),t(p)])]),wn,n("ul",null,[n("li",null,[Fn,jn,En,vn,Sn,t(a,{class:"language-json","data-ext":"json",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%2F%2F%20package.json%0A%7B%0A%20%20%22scripts%22%3A%20%7B%0A%20%20%20%20%22precommit%22%3A%20%22lint-staged%22%0A%20%20%7D%2C%0A%20%20%22lint-staged%22%3A%20%7B%0A%20%20%20%20%22linters%22%3A%20%7B%0A%20%20%20%20%20%20%22*.%7Bjs%2Cscss%7D%22%3A%20%5B%22eslint%20--fix%22%2C%20%22git%20add%22%5D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A",ext:"json"},{default:e(()=>[Pn]),_:1})]),n("li",null,[qn,Mn,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20module%3A%20%7B%0A%20%20%20%20rules%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20test%3A%20%2F%5C.js%24%2F%2C%0A%20%20%20%20%20%20%20%20exclude%3A%20%2Fnode_modules%2F%2C%0A%20%20%20%20%20%20%20%20use%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%22babel-loader%22%2C%0A%20%20%20%20%20%20%20%20%20%20%22eslint-loader%22%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%0A%7D%0A",ext:"javascript"},{default:e(()=>[In]),_:1})])]),Tn,n("ul",null,[On,n("li",null,[Nn,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%2F%2F%20AMD%0Arequire(%5B'large-number'%5D%2C%20function(largeNumebr)%20%7B%0A%20%20largeNumber.add('999'%2C%201)%3B%0A%7D)%3B%0A%2F%2F%20CJS%0Aconst%20largeNumber%20%3D%20require('large-number')%3B%0AlargeNumber.add('999'%2C%201)%3B%0A%2F%2F%20ESM%0Aimport%20*%20as%20largeNumber%20from%20'large-number'%3B%0AlargeNumber.add('999'%2C%201)%3B%0A%2F%2F%20HTML%20script%0A%3Cscript%20src%3D%22path%2Fto%2Flarge-number.js%22%3E%3C%2Fscript%3E%0A",ext:"javascript"},{default:e(()=>[Rn]),_:1})])]),zn,Wn,t(a,{class:"language-yaml","data-ext":"yml",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%7C-%2Fdist%0A%20%20%7C-large-number.js%0A%20%20%7C-large-number.min.js%0A%7C-%2Fsrc%0A%20%20%7C-index.js%0A%7C-index.js%0A%7C-webpack.config.js%0A%7C-package.json%0A",ext:"yaml"},{default:e(()=>[Ln]),_:1}),Hn,Un,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"module.exports%20%3D%20%7B%0A%20%20mode%3A%20'none'%2C%0A%20%20entry%3A%20%7B%0A%20%20%20%20'large-number'%3A%20'.%2Fsrc%2Findex.js'%2C%0A%20%20%20%20'large-number.min'%3A%20'.%2Fsrc%2Findex.js'%2C%0A%20%20%7D%2C%0A%20%20output%3A%20%7B%0A%20%20%20%20filename%3A%20'%5Bname%5D.js'%2C%0A%20%20%20%20libraryExport%3A%20'default'%2C%0A%20%20%20%20library%3A%20'largeNumber'%2C%20%2F%2F%20%E6%8C%87%E5%AE%9A%E5%BA%93%E7%9A%84%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%0A%20%20%20%20libraryTarget%3A%20'umd'%2C%20%2F%2F%20%E6%94%AF%E6%8C%81%E5%BA%93%E5%BC%95%E5%85%A5%E7%9A%84%E6%96%B9%E5%BC%8F%0A%20%20%7D%2C%0A%20%20optimization%3A%20%7B%0A%20%20%20%20minimize%3A%20true%2C%0A%20%20%20%20minimizer%3A%20%5B%0A%20%20%20%20%20%20new%20TerserPlugin(%7B%0A%20%20%20%20%20%20%20%20include%3A%20%2F%5C.min%5C.js%24%2F%2C%0A%20%20%20%20%20%20%7D)%0A%20%20%20%20%5D%0A%20%20%7D%0A%7D%3B%0A",ext:"javascript"},{default:e(()=>[$n]),_:1}),Jn,t(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%2F%2F%20package.json%0A%7B%0A%20%20%22version%22%3A%20%220.0.1%22%2C%0A%20%20%22description%22%3A%20%22description%22%2C%0A%20%20%22main%22%3A%20%22index.js%22%2C%0A%7D%0A%0A%2F%2F%20index.js%0Aif%20(p<wbr>rocess.env.NODE_ENV%20%3D%3D%3D%20'production')%20%7B%0A%20%20module.exports%20%3D%20require('.%2Fdist%2Flarge-number.min.js')%3B%0A%7D%20else%20%7B%0A%20%20module.exports%20%3D%20require('.%2Fdist%2Flarge-number.js')%3B%0A%7D%0A",ext:"javascript"},{default:e(()=>[Gn]),_:1})])}const Xn=c(k,[["render",Vn],["__file","advance.html.vue"]]);export{Xn as default};
