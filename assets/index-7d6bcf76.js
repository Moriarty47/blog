import{_ as C,r as o,C as N,p as B,U as D,N as _,V as R,Z as y,Q as e,w as f,v as V,ah as I,$ as z,T as K,a1 as P,E as U}from"./framework-5411b43d.js";import{N as W,X,O as A}from"./app-bf7bc9cc.js";import{d as E}from"./decrypt-57f39e5e.js";const F={class:"password-wrapper"},H=e("p",{class:"loading"},null,-1),L=e("p",{class:"loading-hint"}," Hold on ... ",-1),M=[H,L],O={class:"msg"},Q=["disabled"],Z={__name:"index",props:{domId:{type:String,default:"#modal-container"},dataKey:String,show:Boolean,content:String},emits:["resolve","close"],setup(r,{expose:g,emit:p}){const i=r,d={default:"Please input the magic word",error:["Noop, try it again?","Wrong password!","What the heck? Try my telephone number."]},k=W(),m=o(null),v=o(null),s=o(!1),c=o(!1),n=o(""),u=o(d.default);function x(){c.value=!0,setTimeout(()=>{c.value=!1},1500)}async function h(){try{const a=await E(i.content,n.value,i.dataKey,!0);p("resolve",a.content)}catch{s.value=!1,x(),u.value=d.error[A(0,2)]}}function b(a){a.preventDefault(),s.value=!0,h()}function T(a){k.value.password.closable!==!1&&a.target===m.value&&p("close")}function S(){s.value=!1,n.value="",u.value=d.default}return N(()=>i.show,(a,l)=>{a&&a!==l&&U(()=>{var t,w;(w=(t=v.value)==null?void 0:t.focus)==null||w.call(t)}),setTimeout(S,100)}),g({onDecrypt:h}),(a,l)=>(B(),D(P,{to:r.domId},[_(K,{name:"pwd-modal",persisted:""},{default:R(()=>[y(e("div",{ref_key:"maskRef",ref:m,class:"password-container",onClick:T},[e("div",F,[e("div",{class:f(["load",{hidden:!s.value}])},M,2),e("header",{class:f(["hint",{hidden:s.value,animate:c.value}])},[_(X,{icon:"Locked","icon-size":24}),e("p",O,V(u.value),1)],2),e("form",{class:f(["password-form",{hidden:s.value}]),onSubmit:b},[y(e("input",{id:"pwd",ref_key:"inputRef",ref:v,"onUpdate:modelValue":l[0]||(l[0]=t=>n.value=t),type:"password",name:"pwd",autofocus:"",class:"password"},null,512),[[I,n.value]]),e("button",{type:"submit",class:"confirm",disabled:!n.value}," Confirm ",8,Q)],34)])],512),[[z,r.show]])]),_:1})],8,["to"]))}},G=C(Z,[["__file","index.vue"]]);export{G as default};
