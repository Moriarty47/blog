import{$ as E,j as re,U as ue,V as de,W as pe,M as ee,C as ye,d as fe,Y as Z}from"./app-bf7bc9cc.js";import{M as ne,I as x,P as te,u as ae,S as ve,C as Q,a as he}from"./Playground-3eb19026.js";import{c as T,p as n,q as t,O as D,P,w as z,U as B,V as I,N as f,Q as k,v as S,R as H,z as u,_ as M,r as w,h as $,G as ke,Z as N,$ as J,ah as me,E as be,M as _e,x as O,s as K}from"./framework-5411b43d.js";import{L as Ce}from"./index-64e9a9fc.js";const ge=V([{key:"newAction",en:"new"},{key:"border1",en:""},{key:"cutAction",en:"cut"},{key:"copyAction",en:"copy"},{key:"pasteAction",en:"paste"},{key:"renameAction",en:"rename"},{key:"shareAction",en:"share"},{key:"border2",en:""},{key:"sortAction",en:"sort"},{key:"viewAction",en:"view"}],"toobarI18n"),xe=V([{key:"newDir",en:"new dir"},{key:"newFile",en:"new file"}],"flyoutI18n"),we=V([{key:"A-Z",en:"A-Z"},{key:"Z-A",en:"Z-A"},{key:"byDate",en:"By date"},{key:"bySize",en:"By size"}],"flyoutI18n"),De=V([{key:"slIcon",en:"Super large icon"},{key:"lIcon",en:"Large icon"},{key:"mIcon",en:"Middle icon"},{key:"sIcon",en:"Small icon"},{key:"list",en:"List"},{key:"detail",en:"Detail"},{key:"flat",en:"Flat"},{key:"content",en:"Content"}],"flyoutI18n");function V(e,c,a="png"){return e.map(s=>{s.ext=s.ext||a;const r=E(`FileExplorerI18n.${c}.${s.key}`);return{...s,icon:s.icon||re[ue(s)],name:r,title:r}})}const Re={class:"fileExplorerToolbar"},Se={class:"flyoutBtn"},Ie=T({__name:"Toolbar",setup(e){const c={newAction:xe,sortAction:we,viewAction:De};function a(s){}return(s,r)=>(n(),t("div",Re,[(n(!0),t(D,null,P(u(ge),o=>(n(),t("div",{key:o.key,class:z(["toobarBtn",{border:!o.en}])},[o.en?(n(),t(D,{key:0},[o.title?(n(),B(te,{key:0,placement:"bottom-start"},{default:I(()=>[f(ne,{menus:c[o.key],onSelect:a},null,8,["menus"])]),reference:I(()=>[k("span",Se,[f(x,{src:o.icon,size:18},null,8,["src"]),k("span",null,S(o.title),1)])]),_:2},1024)):(n(),B(x,{key:1,src:o.icon,size:18},null,8,["src"]))],64)):H("v-if",!0)],2))),128))]))}}),Pe=M(Ie,[["__file","Toolbar.vue"]]);const $e=[{key:"info",icon:"viewinfo.png"},{key:"large",icon:"viewlarge.png"}],[Ae,se]=de(()=>{const{user:e}=ae(),c=w(`Win11 (C:)\\Users\\${e.value.username}`),a=pe(c,{capacity:10}),s=w("large"),r=w(["name","lastModified","type","size"]);function o(v){c.value=v}function g(v){s.value=v}return{currentPath:c,changeCurrentPath:o,pathHistory:a,viewActions:$e,viewType:s,changeViewType:g,viewProperties:r}}),ze=k("button",{type:"submit",style:{display:"none"}},null,-1),Te={class:"pathDirBox"},Me={class:"pathDir locationDir"},Fe=["onClick"],Ee={class:"dir"},Be=T({__name:"Pathbar",props:{path:{default:""}},emits:["pathChange"],setup(e,{emit:c}){const a=e,s=new ee,r=w(!1),o=w(null),g=w(null),v=w(a.path),l=w(a.path),b=$(()=>l.value.split("\\")),d=$(()=>s.getDir(v.value));ke(()=>{v.value!==a.path&&(v.value=a.path,l.value=a.path)}),ye(g,()=>{v.value=l.value,r.value=!1});function m(R){R.preventDefault(),r.value=!1;const h=s.hasDir(v.value);let _;h?_=l.value=v.value:_=v.value=l.value,c("pathChange",_)}function A(R){R.preventDefault(),R.stopPropagation();const h=R.target;if(h.tagName==="INPUT"){const _=h.value.length;h.setSelectionRange(_,_);return}else if(h.tagName==="FORM"){r.value=!0,be(()=>{o.value.focus(),o.value.select()});return}}function L(R){const h=b.value.findIndex(C=>C===R),_=b.value.slice(0,h+1);c("pathChange",_.join("\\"))}return(R,h)=>(n(),t("form",{ref_key:"pathBarRef",ref:g,class:"pathBar noscroll",tabindex:"-1",onSubmit:m,onPointerdown:A},[N(k("input",{ref_key:"inputRef",ref:o,"onUpdate:modelValue":h[0]||(h[0]=_=>v.value=_),type:"text",class:"pathField"},null,512),[[J,r.value],[me,v.value]]),ze,N(k("div",Te,[k("div",Me,[f(x,{src:u(d).info&&u(d).info.icon,size:16},null,8,["src"]),f(x,{class:"dirChev",name:"svg/ChevronRight.svg",size:8})]),(n(!0),t(D,null,P(u(b),(_,C)=>(n(),t("div",{key:_+C,class:"pathDir",onClick:U=>L(_)},[k("span",Ee,S(_),1),f(x,{class:"dirChev",name:"svg/ChevronRight.svg",size:8})],8,Fe))),128))],512),[[J,!r.value]])],544))}}),Le=M(Be,[["__file","Pathbar.vue"]]),He={class:"fileExplorerNavbar"},Ne=["onClick"],Ve=T({__name:"Navbar",setup(e){const{currentPath:c,changeCurrentPath:a,pathHistory:s}=se(),{history:r,undo:o,redo:g,canUndo:v,canRedo:l}=s,b=$(()=>[{key:"arrow-left",action:"LEFT",disabled:!v.value,onClick:o},{key:"arrow-right",action:"RIGHT",disabled:!l.value,onClick:g},{key:"btn-down",action:"HISTORY",disabled:!r.value.length,onClick:R},{key:"arrow-up",action:"BACK",disabled:!d.value,onClick:L}]),d=$(()=>c.value.split("\\").length>1),m=$(()=>r.value.map(h=>({name:h.snapshot,key:h.snapshot})));function A(h){a(h)}function L(){const h=c.value.split("\\");if(h.pop(),!h.length)return;const _=h.join("\\");a(_)}function R(h){a(h)}return(h,_)=>(n(),t("div",He,[(n(!0),t(D,null,P(u(b),C=>(n(),t(D,{key:C.key},[C.action!=="HISTORY"?(n(),t("div",{key:0,class:z(["navBtn",{disabled:C.disabled,history:C.action==="HISTORY"}]),onClick:C.onClick},[f(x,{"use-svg":"",name:C.key,"data-action":C.action,size:14},null,8,["name","data-action"])],10,Ne)):(n(),t("div",{key:1,class:z(["navBtn",{disabled:C.disabled,history:C.action==="HISTORY"}])},[f(te,{placement:"bottom-start"},{default:I(()=>[f(ne,{menus:u(m),onSelect:C.onClick},null,8,["menus","onSelect"])]),reference:I(()=>[f(x,{"use-svg":"",name:C.key,"data-action":C.action,size:14},null,8,["name","data-action"])]),_:2},1024)],2))],64))),128)),f(Le,{path:u(c),onPathChange:A},null,8,["path"]),f(ve,{underline:!1,suffix:!1,prefix:""},{prefix:I(()=>[f(x,{name:"search.png",size:12})]),_:1})]))}}),Ge=M(Ve,[["__file","Navbar.vue"]]),Oe={key:0,class:"dropContent"},Ke=T({__name:"DropdownMenu",props:{menus:null,expandKey:{default:()=>[""]},pinned:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:c}){const a=e,s=w(a.menus.name!==a.expandKey[0]),r=l=>a.pinned&&typeof l.info.quickAcc=="object"&&l.info.quickAcc.pinned,o=$(()=>s.value?"svg/ChevronRight.svg":"svg/ChevronDown.svg");function g(){s.value=!s.value}function v(l){c("select",l)}return(l,b)=>{const d=_e("DropdownMenu",!0);return n(),t("div",{class:z(["dropdownMenu",{collapse:s.value}])},[k("div",{class:z(["dropTitle",{pinned:r(e.menus)}])},[f(x,{class:z([{hide:!e.menus.data},"chevronIcon invert"]),name:u(o),size:10,onClick:g},null,8,["class","name"]),k("div",{class:"menuTitle",onClick:b[0]||(b[0]=m=>v(e.menus))},[f(x,{src:e.menus.info.icon,class:"menuTitleIcon",size:16},null,8,["src"]),k("span",null,S(e.menus.name),1)]),r(e.menus)?(n(),B(x,{key:0,size:16,name:"win/pinned.png"})):H("v-if",!0)],2),e.menus&&e.menus.data&&e.menus.type===1?(n(),t("div",Oe,[s.value?H("v-if",!0):(n(!0),t(D,{key:0},P(e.menus.data,(m,A)=>(n(),B(d,{key:A,menus:m,"expand-key":e.expandKey,pinned:e.pinned,onSelect:v},null,8,["menus","expand-key","pinned"]))),128))])):H("v-if",!0)],2)}}}),j=M(Ke,[["__file","DropdownMenu.vue"]]);function X(e,c,a){const s=parseFloat(getComputedStyle(e).minWidth),r=parseFloat(getComputedStyle(e).maxWidth);let o,g;function v(b){o=b.pageX-g,o<s?o=s:o>r&&(o=r),e.style.setProperty(a,o+"px")}function l(){e.style.transition="",window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",l)}c.addEventListener("mousedown",b=>{b.preventDefault(),b.stopPropagation(),e.style.transition="none",{left:g}=e.getBoundingClientRect(),window.addEventListener("mousemove",v),window.addEventListener("mouseup",l)})}const je={mounted(e,c){e.dataset.vDividerResizeRendered="false";const{handler:a,styleKey:s}=c.value;typeof a=="string"&&(e.dataset.vDividerResizeRendered="true",X(e,e.querySelector(a),s))},updated(e,c){if(e.dataset.vDividerResizeRendered==="true")return;e.dataset.vDividerResizeRendered="true";const{handler:a,styleKey:s}=c.value;X(e,a,s)}},le=je,Ue={class:"table-header"},Ye=k("span",{class:"dividerHandler"},null,-1),qe={class:"table-body"},We=["onClick","onDblclick"],Ze=T({__name:"table",props:{columns:null,data:null},emits:["row-click","row-dblclick"],setup(e,{expose:c,emit:a}){const s=e,r=w(null),o=$(()=>s.columns.map(l=>({...l,width:parseFloat(l.width||"0")+"px"})));function g(l,b){a("row-click",l,b)}function v(l,b){a("row-dblclick",l,b)}return c({ref:r}),(l,b)=>(n(),t("table",{ref_key:"tableRef",ref:r,class:"table"},[k("thead",Ue,[k("tr",null,[(n(!0),t(D,null,P(u(o),d=>N((n(),t("th",{key:d.key,class:"table-column",style:O({"--column-width":d.width})},[K(l.$slots,"header",{col:d},()=>[k("span",{style:O({textAlign:d.align})},S(d.title),5),Ye])],4)),[[u(le),{handler:".dividerHandler",styleKey:"--column-width"}]])),128))])]),k("tbody",qe,[(n(!0),t(D,null,P(s.data,d=>(n(),t("tr",{key:d.id,class:"table-row",onClick:m=>g(m,d),onDblclick:m=>v(m,d)},[K(l.$slots,"row",{row:d,cols:u(o)},()=>[(n(!0),t(D,null,P(u(o),m=>(n(),t("td",{key:m.key,class:"table-column"},[K(l.$slots,"col",{row:d,col:m},()=>[k("span",{style:O({textAlign:m.align})},S(d[m.key]),5)])]))),128))])],40,We))),128))])],512))}}),Qe=M(Ze,[["__file","table.vue"]]),Je={class:"dirNav"},Xe={class:"dirNavContent"},en=["data-type","data-path"],nn={key:1},tn={key:2},an={key:3,style:{"text-align":"right"}},sn=["data-type","data-path","onDblclick"],ln={class:"fileExplorerStatusbar"},on={class:"itemCounts"},cn=k("span",null,S(15)+" 个项目",-1),rn={key:0},un={class:"viewOptions"},dn=["onClick"],pn=T({__name:"Viewbox",setup(e){const{currentPath:c,changeCurrentPath:a,viewActions:s,viewType:r,changeViewType:o,viewProperties:g}=se(),{systemApp:{addApp:v}}=ae(),l=new ee,b=w(null),d=w(null),m=w(0),A=$(()=>Object.values(l.getDir(c.value).data).map(p=>({...p,...p.info}))),L=$(()=>g.value.map((p,i)=>({key:p,title:E(`FileExplorerI18n.${p}`),width:(3-i)*80}))),R=[{key:"查看",label:"查看"},{key:"排序方式",label:"排序方式"},{key:"分组依据",label:"分组依据"},{key:"刷新",label:"刷新"},{key:"itemGroup",label:""},{key:"自定义文件夹...",label:"自定义文件夹..."},{key:"itemGroup",label:""},{key:"在终端中打开",label:"在终端中打开"},{key:"通过 Code 打开",label:"通过 Code 打开"},{key:"itemGroup",label:""},{key:"新建",label:"新建"},{key:"itemGroup",label:""},{key:"属性",label:"属性"}],h=[{key:"打开",label:"打开"},{key:"在新窗口中打开",label:"在新窗口中打开"},{key:"在终端中打开",label:"在终端中打开"},{key:"通过 Code 打开",label:"通过 Code 打开"},{key:"添加到压缩文件",label:"添加到压缩文件"},{key:"itemGroup",label:""},{key:"发送到",label:"发送到"},{key:"itemGroup",label:""},{key:"剪切",label:"剪切"},{key:"复制",label:"复制"},{key:"itemGroup",label:""},{key:"创建快捷方式",label:"创建快捷方式"},{key:"删除",label:"删除"},{key:"重命名",label:"重命名"},{key:"itemGroup",label:""},{key:"属性",label:"属性"}];function _(p){a(p.info.absolutePath)}function C(p,i){if(!i)return;let y=p.target;for(;!y.classList.contains("table-row");)y=y.parentElement;q(y)}function U(p){const i=p.target;if(!i.classList.contains("file")){G();return}q(i)}function Y(p,i){if(p.target.dataset.type==="3"||i!=null&&i.href||i!=null&&i.blob){v({key:i.name,name:i.name,alt:i.name,iconPath:i.icon,href:i.href,file:i.blob});return}if(i){a(i.absolutePath);return}p.target.classList.contains("file")&&a(p.target.dataset.path)}function q(p){p&&(p.parentElement.querySelectorAll(".selected").forEach(i=>i.classList.remove("selected")),p.classList.add("selected"),m.value=1)}function G(){m.value=0}function oe(){if(d.value&&d.value.ref){const i=d.value.ref.querySelectorAll(".table-row.selected");m.value=i.length;return}const p=d.value.querySelectorAll(".file.selected");m.value=p.length}function ie(p){G(),o(p)}function ce(p){const i=(Z[p]||Z[1]).toLowerCase();return E(`FileExplorerI18n.${i}`)||E(`FileExplorerI18n.${i}File`)}function W(p,i){}return(p,i)=>(n(),t(D,null,[f(Ce,{class:"fileExplorerViewbox"},{default:I(()=>[N((n(),t("div",Je,[k("div",Xe,[f(j,{menus:u(l).quickAcc,"expand-key":["Quick Access"],pinned:!0,onSelect:_},null,8,["menus"]),f(j,{menus:u(l).oneDrive,"expand-key":["OneDrive - Personal"],onSelect:_},null,8,["menus"]),f(j,{menus:u(l).root,"expand-key":["This PC"],onSelect:_},null,8,["menus"])])])),[[u(le),{handler:b.value,styleKey:"--dir-nav-width"}]]),k("div",{ref_key:"handleRef",ref:b,class:"adjustHandler"},null,512),f(Q,{class:"contentArea",menus:R,exact:"table,filesGrid","ctx-menu-style":{width:"260px"},onSelect:W},{default:I(()=>[f(Q,{class:z(["contentWrapper",{listContent:u(r)==="info"}]),menus:h,"ctx-menu-style":{width:"260px"},exact:"file,table-column",onSelect:W},{default:I(()=>[u(r)==="info"?(n(),B(Qe,{key:0,ref_key:"contentRef",ref:d,columns:u(L),data:u(A),class:"filesList",onRowClick:C,onRowDblclick:Y},{col:I(({row:y,col:F})=>[F.key==="name"?(n(),t("div",{key:0,class:"file","data-type":y.type,"data-path":y.absolutePath},[f(x,{src:y.lIcon,size:18},null,8,["src"]),k("span",null,S(u(E)(`FileExplorerI18n.${y.name}`)||y.name),1)],8,en)):F.key==="lastModified"?(n(),t("span",nn,S(u(fe)(y.lastModified).format("YYYY-MM-DD HH:mm")),1)):F.key==="type"?(n(),t("span",tn,S(ce(y.type)),1)):(n(),t("span",an,S(y.size?y.size+" KB":""),1))]),_:1},8,["columns","data"])):(n(),t("div",{key:1,ref_key:"contentRef",ref:d,class:"filesGrid",onClick:U},[(n(!0),t(D,null,P(u(A),y=>(n(),t("div",{key:y.name,class:"file","data-type":y.type,"data-path":y.info.absolutePath,onDblclick:F=>Y(F,y)},[f(x,{src:y.info.lIcon,size:94},null,8,["src"]),k("span",null,S(u(E)(`FileExplorerI18n.${y.name}`)||y.name),1)],40,sn))),128))],512)),(n(),B(he,{key:u(c),container:d.value,selector:u(r)==="info"?".table-row":".file",style:{zIndex:1},onOnMove:oe,onUnSelect:G},null,8,["container","selector"]))]),_:1},8,["class"])]),_:1})]),_:1}),k("div",ln,[k("div",on,[cn,m.value?(n(),t("span",rn,"已选择"+S(m.value)+" 个项目",1)):H("v-if",!0)]),k("div",un,[(n(!0),t(D,null,P(u(s),y=>(n(),t("div",{key:y.key,class:z(["iconBtn",{active:u(r)===y.key}]),onClick:F=>ie(y.key)},[f(x,{name:y.icon,size:16},null,8,["name"])],10,dn))),128))])])],64))}}),yn=M(pn,[["__file","Viewbox.vue"]]),fn=T({__name:"index",setup(e){return Ae(),(c,a)=>(n(),t(D,null,[f(Pe),f(Ge),f(yn)],64))}}),bn=M(fn,[["__file","index.vue"]]);export{bn as default};
