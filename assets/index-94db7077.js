import{_ as w,r as s,o as k,p as M,q as E,Q as c}from"./framework-5411b43d.js";const f=[],i=new WeakMap;function b(e){return e?e._isEffect===!0:!1}function T(e,u,t){if(!f.includes(e))try{return f.push(e),u(...t)}finally{f.pop()}}function j(e,u){const t=function(...r){return T(t,e,r)};return t._isEffect=!0,t.deps=[],t.options=u,t}function l(e,u={}){if(b(e))return e;const t=j(e,u);return u.lazy||t(),t}function m(e,u,t){if(f.length===0)return;const r=f[f.length-1];let n=i.get(e);n===void 0&&i.set(e,n=new Map);let o=n.get(t);o===void 0&&n.set(t,o=new Set),o.has(r)||(o.add(r),r.deps.push(o))}function h(e,u,t){let r=i.get(e);if(r===void 0)return;const n=r.get(t);n!==void 0&&n.forEach(o=>{o.options.scheduler!==void 0?o.options.scheduler(l):o()})}const B=new WeakMap,d=new WeakMap;function a(e){if(typeof e!="object")return;let u=B.get(e);return u||(d.has(e)?e:(u=new Proxy(e,{set(t,r,n){const o=t[r];if(n=d.get(n)||n,o!==n)return Reflect.set(t,r,n),h(t,"set",r),!0},get(t,r){let n=Reflect.get(t,r);return R(n)?n.value:(m(t,"get",r),typeof n=="object"?a(n):n)}}),u))}function R(e){return e?e._isRef===!0:!1}function _(e){return typeof e=="object"?a(e):e}function W(e){if(R(e))return e;e=_(e);const u={_isRef:!0,get value(){return m(u,"get","value"),e},set value(t){e=_(t),h(u,"set","value")}};return u}function $(e){let u=!0,t;const r=l(e,{lazy:!0,scheduler(){u=!0}});return{_isRef:!0,get value(){return u&&(t=r(),u=!1),t},set value(o){}}}const z={__name:"index",setup(e){const u=s(null),t=s(null),r=s(null),n=W(0),o=a({name:""}),p=$(()=>`computed count: ${o.name}`);l(()=>{console.log(`count changed: ${n.value}`)});function g(){t.value.innerText=n.value,r.value.innerText=p.value,u.value.value=o.name}function x(){n.value++,t.value.innerText=n.value}function y(v){o.name=v.target.value,r.value.innerText=p.value}return k(g),(v,C)=>(M(),E("div",null,[c("p",{ref_key:"showRef1",ref:t},null,512),c("p",null,[c("button",{onClick:x},"+ 1")]),c("p",{ref_key:"showRef2",ref:r},null,512),c("p",null,[c("input",{ref_key:"mvvmRef",ref:u,type:"text",name:"vue3-mvvm",onInput:y},null,544)])]))}},S=w(z,[["__file","index.vue"]]);export{S as default};
