import{_ as r,M as c,p as d,q as k,N as a,V as e,a0 as l,Q as n,t as s}from"./framework-5411b43d.js";const m={},A=l('<h2 id="module" tabindex="-1"><a class="header-anchor" href="#module" aria-hidden="true">#</a> Module</h2><p>ES6 之前的一些模块加载方案有 CommonJS(用于服务器)和 AMD(用于浏览器)两种。ES6 在语言标准层面实现了模块功能，成为服务器和浏览器的通用模块解决方案。</p><h3 id="静态分析" tabindex="-1"><a class="header-anchor" href="#静态分析" aria-hidden="true">#</a> 静态分析</h3><p>Module 的设计思想是尽量静态化，在编译时就确定模块的依赖关系及输入输出变量。但一些模块需要进行动态加载，这会导致静态分析变得困难。在浏览器中加载模块必须在所有依赖都加载后执行代码。如果没有依赖模块的代码，则必须发送请求并等待网络返回。收到模块代码之后，浏览器必须确定刚收到的模块是否也含有依赖，并递归加载所有依赖，直到所有依赖模块都加载完成。只有所有依赖都加载完成，才会执行入口模块。</p><h3 id="循环依赖" tabindex="-1"><a class="header-anchor" href="#循环依赖" aria-hidden="true">#</a> 循环依赖</h3><p>一个 JavaScript 应用几乎不可能不包含循环依赖，这时模块的加载顺序可能会导致一些副作用。</p>',6),f=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleD'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleB'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'moduleA'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),B=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),b=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleA'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleC'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'moduleB'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),v=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),C=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleB'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleD'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'moduleC'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),g=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),E=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleA'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleC'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'moduleD'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),D=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),h=n("p",null,[n("strong",null,[n("em",null,"当 moduleA 最先加载")]),s("，打印输出为")],-1),_=n("blockquote",null,[n("p",null,'"moduleB"'),n("p",null,'"moduleC"'),n("p",null,'"moduleD"'),n("p",null,'"moduleA"')],-1),y=n("p",null,[n("strong",null,[n("em",null,"当 moduleC 最先加载")]),s("，打印输出为")],-1),x=n("blockquote",null,[n("p",null,'"moduleD"'),n("p",null,'"moduleA"'),n("p",null,'"moduleB"'),n("p",null,'"moduleC"')],-1),F=n("p",null,"从上面两图可以看出加载器会进行深度优先的依赖加载。",-1),j=n("h3",{id:"commonjs",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#commonjs","aria-hidden":"true"},"#"),s(" CommonJS")],-1),w=n("p",null,"CommonJS 规范描述同步声明依赖的模块定义。主要用于服务端实现模块化代码，不能直接在浏览器中运行。要想在浏览器中使用 CommonJS，常用的解决方案是提前把模块文件打包好，把全局属性转换为原生 JavaScript 结构，将模块代码封装在函数闭包中，再通过全面生成的依赖图按顺序进行模块打包，最终形成一个文件。",-1),q=n("p",null,"CommonJS 模块定义示例",-1),S=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// moduleA.js"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" stat"),n("span",{class:"token punctuation"},","),s(" readFileSync "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'fs'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// Desugar into"),s(`
`),n("span",{class:"token keyword"},"const"),s(" fs "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"requrie"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'fs'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" stat "),n("span",{class:"token operator"},"="),s(" fs"),n("span",{class:"token punctuation"},"."),s("stat"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" readFileSync "),n("span",{class:"token operator"},"="),s(" fs"),n("span",{class:"token punctuation"},"."),s("readFileSync"),n("span",{class:"token punctuation"},";"),s(`

module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"readFile"),n("span",{class:"token operator"},":"),s(" readFileSync"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),M=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),z=n("p",null,[s("一个模块不管通过"),n("code",null,"require()"),s("引用多少次，永远都是单例。模块在第一次加载后会被缓存，后续加载会直接获取缓存的模块。")],-1),J=n("p",null,[n("code",null,"module.exports"),s("是一个对象，用于定义模块的公共接口。")],-1),T=n("p",null,"module.exports 示例",-1),N=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// moduleA.js"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'This is module A.'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// moduleB.js"),s(`
`),n("span",{class:"token keyword"},"const"),s(" moduleB "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"requrie"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleA.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("moduleB"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},'// "This is module A."'),s(`
`)])],-1),O=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Q=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// moduleA.js"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"foo"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'foo'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token function"},"bar"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},"'bar'"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// 或者"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports"),n("span",{class:"token punctuation"},"."),s("foo "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'foo'"),n("span",{class:"token punctuation"},";"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function-variable function"},"bar"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},"'bar'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// moduleB.js"),s(`
`),n("span",{class:"token keyword"},"const"),s(" moduleB "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"requrie"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleA.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("moduleB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"bar"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},'// "bar"'),s(`
`)])],-1),R=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),U=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// moduleA.js"),s(`
`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Baz"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(" Baz"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// moduleB.js"),s(`
`),n("span",{class:"token keyword"},"const"),s(" Baz "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"requrie"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleA.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" baz "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Baz"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("baz"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// Baz {}"),s(`
`)])],-1),V=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),G=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// moduleA.js"),s(`
`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Qux"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Qux"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// moduleB.js"),s(`
`),n("span",{class:"token keyword"},"const"),s(" qux "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"requrie"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./moduleA.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("qux"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// Qux {}"),s(`
`)])],-1),I=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),L=l('<h3 id="amd" tabindex="-1"><a class="header-anchor" href="#amd" aria-hidden="true">#</a> AMD</h3><p>由于 CommonJS 以服务端作为目标环境，不需要考虑网络延迟问题，可一次性把所有模块都加载到内存中。而当以浏览器作为目标环境时，需要考虑网络延迟的问题，故有了 AMD 即异步模块定义(Asynchronous Module Definition)。 AMD 一般是让模块声明自己的依赖，在浏览器中按需获取依赖，并在依赖加载完成时立即执行依赖模块。</p><p>AMD 模块的实现核心是用<strong>函数包装模块定义</strong>。这样做的好处有：</p><ul><li>可防止声明全局变量；</li><li>允许加载器库控制何时加载模块；</li><li>便于模块代码的移植(包装函数内部模块代码都是原生 JavaScript 结构)；</li></ul><p>其中包装函数作为全局 define(加载器库定义)的参数。同时 AMD 也支持 require 和 exports 对象，通过使用它们可以在 AMD 模块工厂函数内部定义 CommonJS 风格的模块，AMD 加载器会将它们识别为原生 AMD 结构，而非模块。</p><p>AMD 模块定义示例</p>',6),H=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token function"},"define"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'moduleA'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'moduleB'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'require'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'exports'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token parameter"},[s("moduleB"),n("span",{class:"token punctuation"},","),s(`
  require`),n("span",{class:"token punctuation"},","),s(`
  exports`)]),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" moduleC "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"requrie"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'moduleC'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  exports`),n("span",{class:"token punctuation"},"."),s("doThings "),n("span",{class:"token operator"},"="),s(" moduleC"),n("span",{class:"token punctuation"},"."),s("doThings"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),K=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),P=n("h3",{id:"umd",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#umd","aria-hidden":"true"},"#"),s(" UMD")],-1),W=n("p",null,"UMD 即通用模块定义(Universal Module Definition)。用于统一 CommonJS 和 AMD 生态方案。实际上，UMD 定义的模块会在启动时检测要使用哪个模块系统，然后进行适当配置，并把所有逻辑包装在一个立即执行函数表达式(IIFE)中。",-1),X=n("p",null,"UMD 模块定义示例",-1),Y=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("root"),n("span",{class:"token punctuation"},","),s(" factory")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),s(" define "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'function'"),s(),n("span",{class:"token operator"},"&&"),s(" define"),n("span",{class:"token punctuation"},"."),s("amd"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// AMD, register as anonymous module"),s(`
    `),n("span",{class:"token function"},"define"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'Foo'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" factory"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),s(" module "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'object'"),s(),n("span",{class:"token operator"},"&&"),s(" module"),n("span",{class:"token punctuation"},"."),s("exports"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Node, no support for strict CommonJS"),s(`
    `),n("span",{class:"token comment"},"// used in env Such as Node which support CommonJS with module.exports"),s(`
    module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"factory"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Foo'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Browser context (root should be window)"),s(`
    root`),n("span",{class:"token punctuation"},"."),s("returnExports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"factory"),n("span",{class:"token punctuation"},"("),s("root"),n("span",{class:"token punctuation"},"."),s("Foo"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"Foo"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token comment"},"// return () => {}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),Z=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),$=n("h3",{id:"es6-模块-esm",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#es6-模块-esm","aria-hidden":"true"},"#"),s(" ES6 模块 (ESM)")],-1),nn=n("h4",{id:"script-module-标签",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#script-module-标签","aria-hidden":"true"},"#"),s(" script module 标签")],-1),sn=n("p",null,[s("带有 "),n("code",null,'type="module"'),s(" 属性的 "),n("code",null,"<script>"),s(" 标签会告知浏览器其相关代码应作为模块执行，而非传统脚本执行。")],-1),an=n("p",null,"script module 标签示例",-1),en=n("pre",{class:"language-html"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"type"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("module"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
  `),n("span",{class:"token comment"},"// some module code"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"type"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("module"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"src"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("path/to/module.js"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"}),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`
`)])],-1),tn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),on=n("p",null,[s("浏览器在解析到 "),n("code",null,'<script type="module"><\/script>'),s(" 标签后会立即下载模块文件，但执行时机会延迟到文档解析完成。其在页面中的出现顺序即为它的执行顺序。与 "),n("code",null,"<script defer>"),s(" 一样，修改标签的位置，无论是在 "),n("code",null,"<head>"),s(" 还是 "),n("code",null,"<body>"),s(" 中，都只会影响文件的加载时机，不会影响模块的加载时机。")],-1),cn=n("pre",{class:"language-html"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"type"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("module"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'a'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"var"),s(" a "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'local variable'"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(" foo "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"foo"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'foo'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"type"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("module"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'b'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(" bar "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"bar"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'bar'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'c'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"try"),s(),n("span",{class:"token punctuation"},"{"),s(`
    a`),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"catch"),s(),n("span",{class:"token punctuation"},"("),s("e"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("e"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`
`)])],-1),ln=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),un=l('<p>运行代码可以看到打印顺序为<code>&#39;c&#39;, &#39;a&#39;, &#39;b&#39;</code>。</p><p>模块的加载是异步的，从顶级模块异步递归加载，直到整个依赖图都解析完成。</p><h4 id="模块行为" tabindex="-1"><a class="header-anchor" href="#模块行为" aria-hidden="true">#</a> 模块行为</h4><table><thead><tr><th style="text-align:center;"></th><th style="text-align:left;">ES6 模块行为</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:left;">模块是单例，只能加载一次</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:left;">模块可以定义公共接口，其他模块基于该公共接口进行观察和交互</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:left;">模块可以请求加载(通过 CORS)其他模块</td></tr><tr><td style="text-align:center;">4</td><td style="text-align:left;">模块支持循环依赖</td></tr><tr><td style="text-align:center;">5</td><td style="text-align:left;">模块是异步加载并执行的</td></tr><tr><td style="text-align:center;">6</td><td style="text-align:left;">模块代码只在加载后执行</td></tr><tr><td style="text-align:center;">7</td><td style="text-align:left;">默认在严格模式下执行</td></tr><tr><td style="text-align:center;">8</td><td style="text-align:left;">不共享全局命名空间，每个 ESM 都是单独的私有作用域</td></tr><tr><td style="text-align:center;">9</td><td style="text-align:left;">模块顶级<code>this</code>的值为<code>undefined</code></td></tr><tr><td style="text-align:center;">10</td><td style="text-align:left;">模块中<code>var</code>声明不会添加到<code>window</code>对象上</td></tr></tbody></table><h4 id="模块导出" tabindex="-1"><a class="header-anchor" href="#模块导出" aria-hidden="true">#</a> 模块导出</h4><p>ES6 模块导出有两种：<strong>命名导出</strong> 和 <strong>默认导出</strong>。</p><p>1.命名导出</p><p>将模块作为容器，可以在一个模块中声明多个命名导出。</p>',8),pn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" foo "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'foo'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token punctuation"},"{"),s(" foo "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(" bar "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'bar'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"qux"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Dog"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// 导出别名"),s(`
`),n("span",{class:"token keyword"},"const"),s(" baz "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'baz'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token punctuation"},"{"),s(" baz "),n("span",{class:"token keyword"},"as"),s(" Baz "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),rn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),dn=n("p",null,"2.默认导出",-1),kn=n("p",null,"每个模块只能存在一个默认导出。默认导出和命名导出不冲突，可以在一个模块中同时定义两种导出。",-1),mn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" foo "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'foo'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(" foo"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// OR"),s(`
`),n("span",{class:"token keyword"},"const"),s(" foo "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'foo'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token punctuation"},"{"),s(" foo "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// ES6模块会识别作为别名提供的default关键字，虽然使用命名导出的形式导出，但实际会成为默认导出。"),s(`
`)])],-1),An=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),fn=n("h4",{id:"模块导入",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#模块导入","aria-hidden":"true"},"#"),s(" 模块导入")],-1),Bn=n("p",null,"不同的导出方式对应不同的导入方式。模块标识符可以是相对于当前模块的相对路径，也可以是模块文件的绝对路径，必须是纯字符串，不可以动态拼接(因为 import 是静态执行的，这些只有在运行时才能得到的结果不能使用)。导入对模块而言是只读的，不能直接修改导出的值，但可以修改导出对象的属性。",-1),bn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" foo "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./foo.js'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// OR"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"as"),s(" foo "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./foo.js'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 不需要模块特定的导出，加载和执行模块并利用其副作用"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},"'./foo.js'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},`/* bar.js
  const foo = 'foo';
  const bar = 'bar';
  export { foo, bar }
*/`),s(`
`),n("span",{class:"token comment"},"// 命名导出使用*批量获取并赋值给保存导出集合的别名"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"as"),s(" Bar "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./bar.js'"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("Bar"),n("span",{class:"token punctuation"},"."),s("foo"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 'foo'"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("Bar"),n("span",{class:"token punctuation"},"."),s("bar"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 'bar'"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" foo"),n("span",{class:"token punctuation"},","),s(" bar "),n("span",{class:"token keyword"},"as"),s(" Bar "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./bar.js'"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("foo"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 'foo';"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("Bar"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 'bar';"),s(`
`)])],-1),vn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Cn=n("h4",{id:"模块转移导出",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#模块转移导出","aria-hidden":"true"},"#"),s(" 模块转移导出")],-1),gn=n("p",null,"模块导入的值可以直接通过管道转移到导出。",-1),En=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 外部模块的所有命名导出作为当前模块的命名导出"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./bar.js'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token punctuation"},"{"),s(" foo"),n("span",{class:"token punctuation"},","),s(" bar "),n("span",{class:"token keyword"},"as"),s(" Bar "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./bar.js'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 外部模块的默认导出可直接作为当前模块的默认导出"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./bar.js'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 外部模块的命名导出也可指定为当前模块的默认导出"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token punctuation"},"{"),s(" foo "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./bar.js'"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),Dn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1);function hn(_n,yn){const t=c("CodeTool"),o=c("CodeGroupItem"),u=c("CodeGroup"),i=c("Mermaid"),p=c("ClientOnly");return d(),k("div",null,[A,a(u,null,{default:e(()=>[a(o,{title:"moduleA"},{default:e(()=>[a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"require('.%2FmoduleD')%3B%0Arequire('.%2FmoduleB')%3B%0Aconsole.log('moduleA')%3B%0A",ext:"javascript"},{default:e(()=>[f,B]),_:1})]),_:1}),a(o,{title:"moduleB"},{default:e(()=>[a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"require('.%2FmoduleA')%3B%0Arequire('.%2FmoduleC')%3B%0Aconsole.log('moduleB')%3B%0A",ext:"javascript"},{default:e(()=>[b,v]),_:1})]),_:1}),a(o,{title:"moduleC"},{default:e(()=>[a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"require('.%2FmoduleB')%3B%0Arequire('.%2FmoduleD')%3B%0Aconsole.log('moduleC')%3B%0A",ext:"javascript"},{default:e(()=>[C,g]),_:1})]),_:1}),a(o,{title:"moduleD"},{default:e(()=>[a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"require('.%2FmoduleA')%3B%0Arequire('.%2FmoduleC')%3B%0Aconsole.log('moduleD')%3B%0A",ext:"javascript"},{default:e(()=>[E,D]),_:1})]),_:1})]),_:1}),h,_,a(p,null,{default:e(()=>[a(i,{id:"当moduleA最先加载",no:"",graph:"graph%20LR%0A%20%20A%5B%22moduleA%5Cn%5Cnrequire(D)%5Cnrequire(B)%22%5D%20--%3E%20D%5B%22moduleD%5Cn%5Cnrequire(A)%5Cnrequire(C)%22%5D%0A%20%20A%5B%22moduleA%5Cn%5Cnrequire(D)%5Cnrequire(B)%22%5D%20--%3E%20B1%5B%22moduleB%5Cn%5Cncached%22%5D%0A%0A%20%20D%5B%22moduleD%5Cn%5Cnrequire(A)%5Cnrequire(C)%22%5D%20--%3E%20C%5B%22moduleC%5Cn%5Cnrequire(D)%5Cnrequire(B)%22%5D%0A%20%20D%5B%22moduleD%5Cn%5Cnrequire(A)%5Cnrequire(C)%22%5D%20--%3E%20A1%5B%22moduleA%5Cn%5Cncached%22%5D%0A%0A%20%20C%5B%22moduleC%5Cn%5Cnrequire(D)%5Cnrequire(B)%22%5D%20--%3E%20B%5B%22moduleB%5Cn%5Cnrequire(A)%5Cnrequire(C)%22%5D%0A%20%20C%5B%22moduleC%5Cn%5Cnrequire(D)%5Cnrequire(B)%22%5D%20--%3E%20D1%5B%22moduleD%5Cn%5Cncached%22%5D%0A%0A%20%20B%5B%22moduleB%5Cn%5Cnrequire(A)%5Cnrequire(C)%22%5D%20--%3E%20A1%5B%22moduleA%5Cn%5Cncached%22%5D%0A%20%20B%5B%22moduleB%5Cn%5Cnrequire(A)%5Cnrequire(C)%22%5D%20--%3E%20C1%5B%22moduleC%5Cn%5Cncached%22%5D%0A"})]),_:1}),y,x,a(p,null,{default:e(()=>[a(i,{id:"当moduleC最先加载",no:"",graph:"graph%20LR%0A%20%20C%5B%22moduleC%5Cn%5Cnrequire(B)%5Cnrequire(D)%22%5D%20--%3E%20B%5B%22moduleB%5Cn%5Cnrequire(C)%5Cnrequire(A)%22%5D%0A%20%20C%5B%22moduleC%5Cn%5Cnrequire(B)%5Cnrequire(D)%22%5D%20--%3E%20D1%5B%22moduleD%5Cn%5Cncached%22%5D%0A%0A%20%20B%5B%22moduleB%5Cn%5Cnrequire(C)%5Cnrequire(A)%22%5D%20--%3E%20A%5B%22moduleA%5Cn%5Cnrequire(B)%5Cnrequire(D)%22%5D%0A%20%20B%5B%22moduleB%5Cn%5Cnrequire(C)%5Cnrequire(A)%22%5D%20--%3E%20C1%5B%22moduleC%5Cn%5Cncached%22%5D%0A%0A%20%20A%5B%22moduleA%5Cn%5Cnrequire(B)%5Cnrequire(D)%22%5D%20--%3E%20D%5B%22moduleD%5Cn%5Cnrequire(C)%5Cnrequire(A)%22%5D%0A%20%20A%5B%22moduleA%5Cn%5Cnrequire(B)%5Cnrequire(D)%22%5D%20--%3E%20B1%5B%22moduleB%5Cn%5Cncached%22%5D%0A%0A%20%20D%5B%22moduleD%5Cn%5Cnrequire(C)%5Cnrequire(A)%22%5D%20--%3E%20C1%5B%22moduleC%5Cn%5Cncached%22%5D%0A%20%20D%5B%22moduleD%5Cn%5Cnrequire(C)%5Cnrequire(A)%22%5D%20--%3E%20A1%5B%22moduleA%5Cn%5Cncached%22%5D%0A"})]),_:1}),F,j,w,q,a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F%2F%20moduleA.js%0Aconst%20%7B%20stat%2C%20readFileSync%20%7D%20%3D%20require('fs')%3B%0A%2F%2F%20Desugar%20into%0Aconst%20fs%20%3D%20requrie('fs')%3B%0Aconst%20stat%20%3D%20fs.stat%3B%0Aconst%20readFileSync%20%3D%20fs.readFileSync%3B%0A%0Amodule.exports%20%3D%20%7B%0A%20%20readFile%3A%20readFileSync%2C%0A%7D%3B%0A",ext:"javascript"},{default:e(()=>[S,M]),_:1}),z,J,T,a(u,null,{default:e(()=>[a(o,{title:"字符串"},{default:e(()=>[a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F%2F%20moduleA.js%0Amodule.exports%20%3D%20'This%20is%20module%20A.'%3B%0A%2F%2F%20moduleB.js%0Aconst%20moduleB%20%3D%20requrie('.%2FmoduleA.js')%3B%0Aconsole.log(moduleB)%3B%20%2F%2F%20%22This%20is%20module%20A.%22%0A",ext:"javascript"},{default:e(()=>[N,O]),_:1})]),_:1}),a(o,{title:"对象字面量"},{default:e(()=>[a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F%2F%20moduleA.js%0Amodule.exports%20%3D%20%7B%0A%20%20foo%3A%20'foo'%2C%0A%20%20bar()%20%7B%0A%20%20%20%20return%20'bar'%3B%0A%20%20%7D%2C%0A%7D%3B%0A%2F%2F%20%E6%88%96%E8%80%85%0Amodule.exports.foo%20%3D%20'foo'%3B%0Amodule.exports.bar%20%3D%20function%20()%20%7B%0A%20%20return%20'bar'%3B%0A%7D%3B%0A%2F%2F%20moduleB.js%0Aconst%20moduleB%20%3D%20requrie('.%2FmoduleA.js')%3B%0Aconsole.log(moduleB.bar())%3B%20%2F%2F%20%22bar%22%0A",ext:"javascript"},{default:e(()=>[Q,R]),_:1})]),_:1}),a(o,{title:"class类"},{default:e(()=>[a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F%2F%20moduleA.js%0Aclass%20Baz%20%7B%7D%0Amodule.exports%20%3D%20Baz%3B%0A%2F%2F%20moduleB.js%0Aconst%20Baz%20%3D%20requrie('.%2FmoduleA.js')%3B%0Aconst%20baz%20%3D%20new%20Baz()%3B%0Aconsole.log(baz)%3B%20%2F%2F%20Baz%20%7B%7D%0A",ext:"javascript"},{default:e(()=>[U,V]),_:1})]),_:1}),a(o,{title:"类实例"},{default:e(()=>[a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F%2F%20moduleA.js%0Aclass%20Qux%20%7B%7D%0Amodule.exports%20%3D%20new%20Qux()%3B%0A%2F%2F%20moduleB.js%0Aconst%20qux%20%3D%20requrie('.%2FmoduleA.js')%3B%0Aconsole.log(qux)%3B%20%2F%2F%20Qux%20%7B%7D%0A",ext:"javascript"},{default:e(()=>[G,I]),_:1})]),_:1})]),_:1}),L,a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"define('moduleA'%2C%20%5B'moduleB'%2C%20'require'%2C%20'exports'%5D%2C%20function%20(%0A%20%20moduleB%2C%0A%20%20require%2C%0A%20%20exports%0A)%20%7B%0A%20%20const%20moduleC%20%3D%20requrie('moduleC')%3B%0A%20%20exports.doThings%20%3D%20moduleC.doThings%3B%0A%7D)%3B%0A",ext:"javascript"},{default:e(()=>[H,K]),_:1}),P,W,X,a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"(function%20(root%2C%20factory)%20%7B%0A%20%20if%20(typeof%20define%20%3D%3D%3D%20'function'%20%26%26%20define.amd)%20%7B%0A%20%20%20%20%2F%2F%20AMD%2C%20register%20as%20anonymous%20module%0A%20%20%20%20define(%5B'Foo'%5D%2C%20factory)%3B%0A%20%20%7D%20else%20if%20(typeof%20module%20%3D%3D%3D%20'object'%20%26%26%20module.exports)%20%7B%0A%20%20%20%20%2F%2F%20Node%2C%20no%20support%20for%20strict%20CommonJS%0A%20%20%20%20%2F%2F%20used%20in%20env%20Such%20as%20Node%20which%20support%20CommonJS%20with%20module.exports%0A%20%20%20%20module.exports%20%3D%20factory(require('Foo'))%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20%2F%2F%20Browser%20context%20(root%20should%20be%20window)%0A%20%20%20%20root.returnExports%20%3D%20factory(root.Foo)%3B%0A%20%20%7D%0A%7D)(this%2C%20function%20(Foo)%20%7B%0A%20%20return%20%7B%7D%3B%0A%20%20%2F%2F%20return%20()%20%3D%3E%20%7B%7D%0A%7D)%3B%0A",ext:"javascript"},{default:e(()=>[Y,Z]),_:1}),$,nn,sn,an,a(t,{class:"language-html line-numbers-mode","data-ext":"html",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%3Cscript%20type%3D%22module%22%3E%0A%20%20%2F%2F%20some%20module%20code%0A%3C%2Fscript%3E%0A%0A%3Cscript%20type%3D%22module%22%20src%3D%22path%2Fto%2Fmodule.js%22%3E%3C%2Fscript%3E%0A",ext:"html"},{default:e(()=>[en,tn]),_:1}),on,a(t,{id:"module-script-example",class:"language-html line-numbers-mode","data-ext":"html","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"%3Cscript%20type%3D%22module%22%3E%0A%20%20console.log('a')%3B%0A%20%20var%20a%20%3D%20'local%20variable'%3B%0A%20%20export%20const%20foo%20%3D%20%7B%20foo%3A%20'foo'%20%7D%3B%0A%3C%2Fscript%3E%0A%3Cscript%20type%3D%22module%22%3E%0A%20%20console.log('b')%3B%0A%20%20export%20const%20bar%20%3D%20%7B%20bar%3A%20'bar'%20%7D%3B%0A%3C%2Fscript%3E%0A%3Cscript%3E%0A%20%20console.log('c')%3B%0A%20%20try%20%7B%0A%20%20%20%20a%3B%0A%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20console.log(e)%3B%0A%20%20%7D%0A%3C%2Fscript%3E%0A",ext:"html"},{default:e(()=>[cn,ln]),_:1}),un,a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"const%20foo%20%3D%20'foo'%3B%0Aexport%20%7B%20foo%20%7D%3B%0A%0Aexport%20const%20bar%20%3D%20'bar'%3B%0A%0Aexport%20function%20()%20%7B%7D%0A%0Aexport%20const%20qux%20%3D%20()%20%3D%3E%20%7B%7D%0A%0Aexport%20class%20Dog%20%7B%7D%0A%0A%2F%2F%20%E5%AF%BC%E5%87%BA%E5%88%AB%E5%90%8D%0Aconst%20baz%20%3D%20'baz'%3B%0Aexport%20%7B%20baz%20as%20Baz%20%7D%3B%0A",ext:"javascript"},{default:e(()=>[pn,rn]),_:1}),dn,kn,a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"const%20foo%20%3D%20'foo'%3B%0Aexport%20default%20foo%3B%0A%2F%2F%20OR%0Aconst%20foo%20%3D%20'foo'%3B%0Aexport%20%7B%20foo%20as%20default%20%7D%3B%0A%2F%2F%20ES6%E6%A8%A1%E5%9D%97%E4%BC%9A%E8%AF%86%E5%88%AB%E4%BD%9C%E4%B8%BA%E5%88%AB%E5%90%8D%E6%8F%90%E4%BE%9B%E7%9A%84default%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%8C%E8%99%BD%E7%84%B6%E4%BD%BF%E7%94%A8%E5%91%BD%E5%90%8D%E5%AF%BC%E5%87%BA%E7%9A%84%E5%BD%A2%E5%BC%8F%E5%AF%BC%E5%87%BA%EF%BC%8C%E4%BD%86%E5%AE%9E%E9%99%85%E4%BC%9A%E6%88%90%E4%B8%BA%E9%BB%98%E8%AE%A4%E5%AF%BC%E5%87%BA%E3%80%82%0A",ext:"javascript"},{default:e(()=>[mn,An]),_:1}),fn,Bn,a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"import%20foo%20from%20'.%2Ffoo.js'%3B%0A%2F%2F%20OR%0Aimport%20%7B%20default%20as%20foo%20%7D%20from%20'.%2Ffoo.js'%3B%0A%0A%2F%2F%20%E4%B8%8D%E9%9C%80%E8%A6%81%E6%A8%A1%E5%9D%97%E7%89%B9%E5%AE%9A%E7%9A%84%E5%AF%BC%E5%87%BA%EF%BC%8C%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9D%97%E5%B9%B6%E5%88%A9%E7%94%A8%E5%85%B6%E5%89%AF%E4%BD%9C%E7%94%A8%0Aimport%20'.%2Ffoo.js'%3B%0A%0A%2F*%20bar.js%0A%20%20const%20foo%20%3D%20'foo'%3B%0A%20%20const%20bar%20%3D%20'bar'%3B%0A%20%20export%20%7B%20foo%2C%20bar%20%7D%0A*%2F%0A%2F%2F%20%E5%91%BD%E5%90%8D%E5%AF%BC%E5%87%BA%E4%BD%BF%E7%94%A8*%E6%89%B9%E9%87%8F%E8%8E%B7%E5%8F%96%E5%B9%B6%E8%B5%8B%E5%80%BC%E7%BB%99%E4%BF%9D%E5%AD%98%E5%AF%BC%E5%87%BA%E9%9B%86%E5%90%88%E7%9A%84%E5%88%AB%E5%90%8D%0Aimport%20*%20as%20Bar%20from%20'.%2Fbar.js'%3B%0Aconsole.log(Bar.foo)%3B%20%2F%2F%20'foo'%0Aconsole.log(Bar.bar)%3B%20%2F%2F%20'bar'%0A%0Aimport%20%7B%20foo%2C%20bar%20as%20Bar%20%7D%20from%20'.%2Fbar.js'%3B%0Aconsole.log(foo)%3B%20%2F%2F%20'foo'%3B%0Aconsole.log(Bar)%3B%20%2F%2F%20'bar'%3B%0A",ext:"javascript"},{default:e(()=>[bn,vn]),_:1}),Cn,gn,a(t,{class:"language-javascript line-numbers-mode","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F%2F%20%E5%A4%96%E9%83%A8%E6%A8%A1%E5%9D%97%E7%9A%84%E6%89%80%E6%9C%89%E5%91%BD%E5%90%8D%E5%AF%BC%E5%87%BA%E4%BD%9C%E4%B8%BA%E5%BD%93%E5%89%8D%E6%A8%A1%E5%9D%97%E7%9A%84%E5%91%BD%E5%90%8D%E5%AF%BC%E5%87%BA%0Aexport%20*%20from%20'.%2Fbar.js'%3B%0A%0Aexport%20%7B%20foo%2C%20bar%20as%20Bar%20%7D%20from%20'.%2Fbar.js'%3B%0A%0A%2F%2F%20%E5%A4%96%E9%83%A8%E6%A8%A1%E5%9D%97%E7%9A%84%E9%BB%98%E8%AE%A4%E5%AF%BC%E5%87%BA%E5%8F%AF%E7%9B%B4%E6%8E%A5%E4%BD%9C%E4%B8%BA%E5%BD%93%E5%89%8D%E6%A8%A1%E5%9D%97%E7%9A%84%E9%BB%98%E8%AE%A4%E5%AF%BC%E5%87%BA%0Aexport%20%7B%20default%20%7D%20from%20'.%2Fbar.js'%3B%0A%0A%2F%2F%20%E5%A4%96%E9%83%A8%E6%A8%A1%E5%9D%97%E7%9A%84%E5%91%BD%E5%90%8D%E5%AF%BC%E5%87%BA%E4%B9%9F%E5%8F%AF%E6%8C%87%E5%AE%9A%E4%B8%BA%E5%BD%93%E5%89%8D%E6%A8%A1%E5%9D%97%E7%9A%84%E9%BB%98%E8%AE%A4%E5%AF%BC%E5%87%BA%0Aexport%20%7B%20foo%20as%20default%20%7D%20from%20'.%2Fbar.js'%3B%0A",ext:"javascript"},{default:e(()=>[En,Dn]),_:1})])}const Fn=r(m,[["render",hn],["__file","module.html.vue"]]);export{Fn as default};
