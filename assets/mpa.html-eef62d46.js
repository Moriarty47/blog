import{_ as t,M as e,p as o,q as p,N as c,V as l,a0 as u,Q as n,t as s}from"./framework-5411b43d.js";const i={},r=u('<h2 id="多页面应用-mpa" tabindex="-1"><a class="header-anchor" href="#多页面应用-mpa" aria-hidden="true">#</a> 多页面应用(MPA)</h2><p>每次页面跳转的时候，后台服务器都会返回一个新的 html 文档，这种类型的网站就是多页网站，也叫做多页面应用。</p><ul><li>优点 <ul><li>页面直接解耦</li><li>对 SEO 友好</li></ul></li><li>缺点 <ul><li>每次新增或删除页面需要修改 webpack 配置</li></ul></li></ul><h3 id="打包通用方案" tabindex="-1"><a class="header-anchor" href="#打包通用方案" aria-hidden="true">#</a> 打包通用方案</h3><p>动态获取 entry 和设置 html-webpack-plugin 数量</p><p>利用 glob.sync</p><p><code>entry: glob.sync(path.join(__dirname, &#39;./src/*/index.js&#39;))</code></p>',7),k=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"setMPA"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" entry "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" htmlWebpackPlugins "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" entryFiles "),n("span",{class:"token operator"},"="),s(" glob"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sync"),n("span",{class:"token punctuation"},"("),s("path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'./src/*/index.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  entryFiles`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"entryFile"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" matched "),n("span",{class:"token operator"},"="),s(" entryFile"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"match"),n("span",{class:"token punctuation"},"("),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"Webpack\\/src\\/(.*)\\/index\\.js$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" pageName "),n("span",{class:"token operator"},"="),s(" matched "),n("span",{class:"token operator"},"&&"),s(" matched"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    entry`),n("span",{class:"token punctuation"},"["),s("pageName"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" entryFile"),n("span",{class:"token punctuation"},";"),s(`
    htmlWebpackPlugins`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"HtmlWebpackPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"template"),n("span",{class:"token operator"},":"),s(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"src/"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("pageName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"/index.html"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("pageName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},".html"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"chunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s("pageName"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"inject"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"minify"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"html5"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"collapseWhitespace"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"preserveLineBreaks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"minifyCSS"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"minifyJS"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"removeComments"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
    entry`),n("span",{class:"token punctuation"},","),s(`
    htmlWebpackPlugins`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" entry"),n("span",{class:"token punctuation"},","),s(" htmlWebpackPlugins "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"setMPA"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  entry`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token comment"},"// ...,"),s(`
  `),n("span",{class:"token literal-property property"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"MiniCssExtractPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'[name]_[contenthash:8].css'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"OptimizeCssAssetsWebpackPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"assetNameRegExp"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.css$"),n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-flags"},"g")]),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"cssProcessor"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'cssnano'"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"CleanWebpackPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"..."),s("htmlWebpackPlugins"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"HTMLInlineCssWebpackPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1);function m(y,g){const a=e("CodeTool");return o(),p("div",null,[r,c(a,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"const%20setMPA%20%3D%20()%20%3D%3E%20%7B%0A%20%20const%20entry%20%3D%20%7B%7D%3B%0A%20%20const%20htmlWebpackPlugins%20%3D%20%5B%5D%3B%0A%0A%20%20const%20entryFiles%20%3D%20glob.sync(path.join(__dirname%2C%20'.%2Fsrc%2F*%2Findex.js'))%3B%0A%0A%20%20entryFiles.forEach(entryFile%20%3D%3E%20%7B%0A%20%20%20%20const%20matched%20%3D%20entryFile.match(%2FWebpack%5C%2Fsrc%5C%2F(.*)%5C%2Findex%5C.js%24%2F)%3B%0A%20%20%20%20const%20pageName%20%3D%20matched%20%26%26%20matched%5B1%5D%3B%0A%20%20%20%20entry%5BpageName%5D%20%3D%20entryFile%3B%0A%20%20%20%20htmlWebpackPlugins.push(new%20HtmlWebpackPlugin(%7B%0A%20%20%20%20%20%20template%3A%20path.join(__dirname%2C%20%60src%2F%24%7BpageName%7D%2Findex.html%60)%2C%0A%20%20%20%20%20%20filename%3A%20%60%24%7BpageName%7D.html%60%2C%0A%20%20%20%20%20%20chunks%3A%20%5BpageName%5D%2C%0A%20%20%20%20%20%20inject%3A%20true%2C%0A%20%20%20%20%20%20minify%3A%20%7B%0A%20%20%20%20%20%20%20%20html5%3A%20true%2C%0A%20%20%20%20%20%20%20%20collapseWhitespace%3A%20true%2C%0A%20%20%20%20%20%20%20%20preserveLineBreaks%3A%20false%2C%0A%20%20%20%20%20%20%20%20minifyCSS%3A%20true%2C%0A%20%20%20%20%20%20%20%20minifyJS%3A%20true%2C%0A%20%20%20%20%20%20%20%20removeComments%3A%20false%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D))%3B%0A%20%20%7D)%3B%0A%20%20return%20%7B%0A%20%20%20%20entry%2C%0A%20%20%20%20htmlWebpackPlugins%2C%0A%20%20%7D%3B%0A%7D%0A%0Aconst%20%7B%20entry%2C%20htmlWebpackPlugins%20%7D%20%3D%20setMPA()%3B%0A%0Amodule.exports%20%3D%20%7B%0A%20%20entry%2C%0A%20%20%2F%2F%20...%2C%0A%20%20plugins%3A%20%5B%0A%20%20%20%20new%20MiniCssExtractPlugin(%7B%0A%20%20%20%20%20%20filename%3A%20'%5Bname%5D_%5Bcontenthash%3A8%5D.css'%2C%0A%20%20%20%20%7D)%2C%0A%20%20%20%20new%20OptimizeCssAssetsWebpackPlugin(%7B%0A%20%20%20%20%20%20assetNameRegExp%3A%20%2F%5C.css%24%2Fg%2C%0A%20%20%20%20%20%20cssProcessor%3A%20require('cssnano')%0A%20%20%20%20%7D)%2C%0A%20%20%20%20new%20CleanWebpackPlugin()%2C%0A%20%20%20%20...htmlWebpackPlugins%2C%0A%20%20%20%20new%20HTMLInlineCssWebpackPlugin()%0A%20%20%5D%0A%7D%0A",ext:"javascript"},{default:l(()=>[k]),_:1})])}const A=t(i,[["render",m],["__file","mpa.html.vue"]]);export{A as default};
