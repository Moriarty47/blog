import{_ as i,M as c,p as r,q as p,Q as n,t as e,N as a,V as l,a0 as t}from"./framework-5411b43d.js";const u="/blog/assets/kyt-8a69f8e1.png",d="/blog/assets/nwb-739d26eb.png",k="/blog/assets/function-b1b96171.png",h="/blog/assets/gitcommit-94215ace.png",g={},_=t('<h2 id="编写可维护的-webpack-构建配置" tabindex="-1"><a class="header-anchor" href="#编写可维护的-webpack-构建配置" aria-hidden="true">#</a> 编写可维护的 Webpack 构建配置</h2><h3 id="意义" tabindex="-1"><a class="header-anchor" href="#意义" aria-hidden="true">#</a> 意义</h3><ul><li>通用性 <ul><li>业务开发者无需关注构建配置</li><li>统一团队构架脚本</li></ul></li><li>可维护性 <ul><li>构建配置合理的拆分</li><li>README 文档、ChangeLog 文档等</li></ul></li><li>质量 <ul><li>冒烟测试、单元测试、测试覆盖率</li><li>持续集成</li></ul></li></ul><h3 id="可选方案" tabindex="-1"><a class="header-anchor" href="#可选方案" aria-hidden="true">#</a> 可选方案</h3><p>团队规模大选择方案 3，团队规模小选择方案 1，2</p>',5),m=n("li",null,[e("通过多个配置文件管理不同环境的构建，"),n("code",null,"webpack --config"),e(" 参数进行控制")],-1),b={href:"https://github.com/HenrikJoreteg/hjs-webpack",target:"_blank",rel:"noopener noreferrer"},f={href:"https://github.com/neutrinojs/neutrino",target:"_blank",rel:"noopener noreferrer"},A={href:"https://github.com/andywer/webpack-blocks",target:"_blank",rel:"noopener noreferrer"},C=n("li",null,"抽成一个工具进行管理，如：",-1),y={href:"https://github.com/facebook/create-react-app",target:"_blank",rel:"noopener noreferrer"},x={href:"https://github.com/nytimes/kyt",target:"_blank",rel:"noopener noreferrer"},E=n("img",{src:u,alt:"kty"},null,-1),j={href:"https://github.com/insin/nwb",target:"_blank",rel:"noopener noreferrer"},v=n("img",{src:d,alt:"nwb"},null,-1),w=t('<ol start="4"><li>将所有的配置放在一个文件中，通过 <code>--env</code> 参数控制分支选择</li></ol><h3 id="构建配置包设计" tabindex="-1"><a class="header-anchor" href="#构建配置包设计" aria-hidden="true">#</a> 构建配置包设计</h3><p>通过多个配置文件管理不同环境的 webpack 配置</p><ul><li>基础配置 <code>webpack.base.js</code></li><li>开发环境 <code>webpack.dev.js</code></li><li>生产环境 <code>webpack.prod.js</code></li><li>SSR 环境 <code>webpack.ssr.js</code></li><li>PWA 环境 <code>webpack.pwa.js</code></li><li>...</li></ul>',4),B={class:"custom-container tip"},D=n("p",{class:"custom-container-title"},"配置拆分后组合",-1),N={href:"https://github.com/survivejs/webpack-merge",target:"_blank",rel:"noopener noreferrer"},L=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),e(" merge "),n("span",{class:"token operator"},"="),e(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"webpack-merge"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),e(`

`),n("span",{class:"token function"},"merge"),n("span",{class:"token punctuation"},"("),e(`
  `),n("span",{class:"token punctuation"},"{"),e(),n("span",{class:"token literal-property property"},"a"),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token literal-property property"},"b"),n("span",{class:"token operator"},":"),e(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token literal-property property"},"c"),n("span",{class:"token operator"},":"),e(),n("span",{class:"token number"},"20"),e(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),e(`
  `),n("span",{class:"token punctuation"},"{"),e(),n("span",{class:"token literal-property property"},"a"),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token literal-property property"},"b"),n("span",{class:"token operator"},":"),e(),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token literal-property property"},"d"),n("span",{class:"token operator"},":"),e(),n("span",{class:"token number"},"421"),e(),n("span",{class:"token punctuation"},"}"),e(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),e(`

`),n("span",{class:"token comment"},"// { a: [ 1, 2 ], b: 10, c: 20, d: 421 }"),e(`
`)])],-1),I=n("p",null,[e("合并配置 "),n("code",null,"module.exports = merge(baseConfig, devConfig);")],-1),G=t('<p>抽离成一个 npm 包统一管理</p><ul><li>规范： Git commit 日志、README、ESLint 规范、Semver 规范</li><li>质量：冒烟测试、单元测试、测试覆盖率、CI</li></ul><h4 id="构建包功能设计" tabindex="-1"><a class="header-anchor" href="#构建包功能设计" aria-hidden="true">#</a> 构建包功能设计</h4><p><img src="'+k+'" alt="构建包功能设计"></p><h4 id="目录结构设计" tabindex="-1"><a class="header-anchor" href="#目录结构设计" aria-hidden="true">#</a> 目录结构设计</h4><br>',6),q=n("pre",{class:"language-yaml"},[n("code",null,[n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`/test
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`/lib
  `),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`webpack.base.js
  `),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`webpack.dev.js
  `),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`webpack.prod.js
  `),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`webpack.ssr.js
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`index.js
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`package.json
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`.babelrc
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`.eslintrc
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`CHANGELOG.md
`),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"-"),e(`README.md
`)])],-1),S=n("h3",{id:"使用-eslint-规范构建脚本",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#使用-eslint-规范构建脚本","aria-hidden":"true"},"#"),e(" 使用 ESLint 规范构建脚本")],-1),T=n("p",null,"使用 eslint-config-airbnb-base 基础包规范",-1),F=n("pre",{class:"language-json"},[n("code",null,[n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token property"},'"parser"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"babel-eslint"'),n("span",{class:"token punctuation"},","),e(`
  `),n("span",{class:"token property"},'"env"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token property"},'"browser"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),e(`
    `),n("span",{class:"token property"},'"node"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token boolean"},"false"),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),e(`
  `),n("span",{class:"token property"},'"extends"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"airbnb-base"'),n("span",{class:"token punctuation"},","),e(`
  `),n("span",{class:"token property"},'"rules"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token property"},'"indent"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"error"'),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},"]"),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),e(`
  `),n("span",{class:"token property"},'"ignorePatterns"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"dist"'),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token string"},'"node_modules"'),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token string"},'"packages"'),n("span",{class:"token punctuation"},"]"),e(`
`),n("span",{class:"token punctuation"},"}"),e(`
`)])],-1),M=t('<div class="custom-container tip"><p class="custom-container-title">提示</p><p><code>eslint --fix</code> 可以自动处理空格、间距等格式报错</p></div><h3 id="冒烟测试-smoke-testing" tabindex="-1"><a class="header-anchor" href="#冒烟测试-smoke-testing" aria-hidden="true">#</a> 冒烟测试(Smoke Testing)</h3><p>冒烟测试是指对提交测试的软件在进行详细深入的测试之前而进行的预测试，这种预测试的主要目的是暴漏导致软件需重新发布的基本功能失效等严重问题。</p><ul><li>构建是否成功</li><li>每次构建成功 build 目录是否有内容输出，判断基本功能是否正常，如编写 mocha 测试用例 <ul><li>是否有 JS、CSS 等静态资源文件</li><li>是否有 HTML 文件</li></ul></li></ul><h3 id="单元测试-unit-testing" tabindex="-1"><a class="header-anchor" href="#单元测试-unit-testing" aria-hidden="true">#</a> 单元测试(Unit Testing)</h3><h4 id="单元测试与测试覆盖率" tabindex="-1"><a class="header-anchor" href="#单元测试与测试覆盖率" aria-hidden="true">#</a> 单元测试与测试覆盖率</h4>',6),R={href:"https://github.com/mochajs/mocha",target:"_blank",rel:"noopener noreferrer"},H={href:"https://github.com/avajs/ava",target:"_blank",rel:"noopener noreferrer"},V={href:"https://github.com/chaijs/chai",target:"_blank",rel:"noopener noreferrer"},O={href:"https://github.com/shouldjs/should.js",target:"_blank",rel:"noopener noreferrer"},J={href:"https://github.com/mjackson/expect",target:"_blank",rel:"noopener noreferrer"},P={href:"https://github.com/tj/better-assert",target:"_blank",rel:"noopener noreferrer"},K={href:"https://github.com/jasmine/jasmine",target:"_blank",rel:"noopener noreferrer"},U={href:"https://github.com/jestjs/jest",target:"_blank",rel:"noopener noreferrer"},W=n("h4",{id:"编写单元测试用例",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#编写单元测试用例","aria-hidden":"true"},"#"),e(" 编写单元测试用例")],-1),Z=n("p",null,"技术选型：Mocha + chai",-1),z=n("p",null,[e("测试代码："),n("code",null,"describe，it，except")],-1),Q=n("p",null,[e("测试命令："),n("code",null,"mocha add.test.js")],-1),X={class:"custom-container tip"},Y=n("p",{class:"custom-container-title"},"示例",-1),$=n("p",null,"add.test.js",-1),nn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),e(" expect "),n("span",{class:"token operator"},"="),e(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'chai'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),e("expect"),n("span",{class:"token punctuation"},";"),e(`
`),n("span",{class:"token keyword"},"const"),e(" add "),n("span",{class:"token operator"},"="),e(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'../src/add'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),e(`

`),n("span",{class:"token function"},"describe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'use expect: src/add.js'"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token operator"},"=>"),e(),n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'add(1, 2) === 3'"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token operator"},"=>"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),e("to"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"equal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),e(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),e(`
`)])],-1),en=t('<h4 id="单元测试接入" tabindex="-1"><a class="header-anchor" href="#单元测试接入" aria-hidden="true">#</a> 单元测试接入</h4><ol><li>安装 <code>mocha</code>， <code>chai</code>；</li><li>新建 test 目录，并增加 xxx.test.js 测试文件；</li><li>在 package.json 中的 scripts 字段增加 test 命令， <code>&quot;test&quot;: &quot;node_modules/mocha/bin/_mocha&quot;</code>；</li><li>执行测试命令。</li></ol><h3 id="持续集成" tabindex="-1"><a class="header-anchor" href="#持续集成" aria-hidden="true">#</a> 持续集成</h3><ul><li>作用 <ul><li>快速发现错误</li><li>防止分支大幅偏离主干</li></ul></li><li>核心措施：代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。</li></ul><h3 id="github-最流行的-ci" tabindex="-1"><a class="header-anchor" href="#github-最流行的-ci" aria-hidden="true">#</a> github 最流行的 CI</h3>',5),an={href:"https://travis-ci.org/",target:"_blank",rel:"noopener noreferrer"},sn={href:"https://circleci.com/",target:"_blank",rel:"noopener noreferrer"},tn={href:"https://jenkins.io/",target:"_blank",rel:"noopener noreferrer"},on={href:"https://www.appveyor.com/",target:"_blank",rel:"noopener noreferrer"},ln={href:"https://codeship.com/",target:"_blank",rel:"noopener noreferrer"},cn={href:"http://try.drone.io/",target:"_blank",rel:"noopener noreferrer"},rn={href:"https://semaphoreci.com/",target:"_blank",rel:"noopener noreferrer"},pn={href:"https://buildkite.com/",target:"_blank",rel:"noopener noreferrer"},un={href:"http://www.wercker.com/",target:"_blank",rel:"noopener noreferrer"},dn={href:"https://www.jetbrains.com/teamcity/",target:"_blank",rel:"noopener noreferrer"},kn=n("h3",{id:"接入-travis-ci",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#接入-travis-ci","aria-hidden":"true"},"#"),e(" 接入 Travis CI")],-1),hn={href:"https://travis-ci.org/",target:"_blank",rel:"noopener noreferrer"},gn={href:"https://travis-ci.org/account/repositories",target:"_blank",rel:"noopener noreferrer"},_n=n("li",null,"项目根目录下新增 .travis.yml",-1),mn=n("pre",{class:"language-yaml"},[n("code",null,[n("span",{class:"token key atrule"},"language"),n("span",{class:"token punctuation"},":"),e(` node_js

`),n("span",{class:"token key atrule"},"sudo"),n("span",{class:"token punctuation"},":"),e(),n("span",{class:"token boolean important"},"false"),e(`

`),n("span",{class:"token key atrule"},"cache"),n("span",{class:"token punctuation"},":"),e(`
  `),n("span",{class:"token key atrule"},"apt"),n("span",{class:"token punctuation"},":"),e(),n("span",{class:"token boolean important"},"true"),e(`
  `),n("span",{class:"token key atrule"},"directories"),n("span",{class:"token punctuation"},":"),e(`
    `),n("span",{class:"token punctuation"},"-"),e(` node_modules

`),n("span",{class:"token key atrule"},"node_js"),n("span",{class:"token punctuation"},":"),e(" stable "),n("span",{class:"token comment"},"# 设置相应的node版本"),e(`

`),n("span",{class:"token key atrule"},"install"),n("span",{class:"token punctuation"},":"),e(`
  `),n("span",{class:"token punctuation"},"-"),e(" npm install "),n("span",{class:"token punctuation"},"-"),e("D "),n("span",{class:"token comment"},"# 安装构建器版本"),e(`
  `),n("span",{class:"token punctuation"},"-"),e(" cd ./test/template"),n("span",{class:"token punctuation"},"-"),e(`project
  `),n("span",{class:"token punctuation"},"-"),e(" npm install "),n("span",{class:"token punctuation"},"-"),e("D "),n("span",{class:"token comment"},"# 安装模板项目依赖"),e(`

`),n("span",{class:"token key atrule"},"script"),n("span",{class:"token punctuation"},":"),e(`
  `),n("span",{class:"token punctuation"},"-"),e(` npm test
`)])],-1),bn=t('<h3 id="发布构建包到-npm-社区" tabindex="-1"><a class="header-anchor" href="#发布构建包到-npm-社区" aria-hidden="true">#</a> 发布构建包到 npm 社区</h3><ul><li>清除非必要文件，如 dist 目录等</li><li>登录 <code>npm login</code><ul><li>输入 Username, Password, Email</li></ul></li><li>添加用户 <code>npm adduser</code></li><li>升级版本 <ul><li>升级补丁版本号 <code>npm version patch</code></li><li>升级小版本号 <code>npm version minor</code></li><li>升级大版本号 <code>npm version major</code></li></ul></li><li>发布版本 <code>npm publish</code></li></ul><h3 id="git-commit-规范和-changelog-生成" tabindex="-1"><a class="header-anchor" href="#git-commit-规范和-changelog-生成" aria-hidden="true">#</a> Git commit 规范和 Changelog 生成</h3><h4 id="优点" tabindex="-1"><a class="header-anchor" href="#优点" aria-hidden="true">#</a> 优点</h4><ul><li>加快 Code review 的流程</li><li>根据 Git commit 的元数据生成 changelog</li><li>后续维护者可以知道 Feature 被修改的原因</li></ul><h4 id="技术方案" tabindex="-1"><a class="header-anchor" href="#技术方案" aria-hidden="true">#</a> 技术方案</h4><p><img src="'+h+'" alt="Git commit规范"></p><h4 id="提交格式要求" tabindex="-1"><a class="header-anchor" href="#提交格式要求" aria-hidden="true">#</a> 提交格式要求</h4>',8),fn=n("pre",{class:"language-xml"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),e("type")]),n("span",{class:"token punctuation"},">")]),e("("),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),e("scrope")]),n("span",{class:"token punctuation"},">")]),e("): "),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),e("subject")]),n("span",{class:"token punctuation"},">")]),e(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),e("BLANK_LINE")]),n("span",{class:"token punctuation"},">")]),e(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),e("body")]),n("span",{class:"token punctuation"},">")]),e(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),e("BLANK_LINE")]),n("span",{class:"token punctuation"},">")]),e(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),e("footer")]),n("span",{class:"token punctuation"},">")]),e(`
`)])],-1),An=t('<ul><li><code>type</code> 代表某次提交的类型，具体类型如下： <ul><li><code>feat</code> 新增 feature</li><li><code>fix</code> 修复 bug</li><li><code>docs</code> 只修改了文档，如 README，CHANGELOG，CONTRIBUTE 等</li><li><code>style</code> 只修改了空格、格式缩进，逗号等，不改变代码逻辑</li><li><code>refactor</code> 代码重构，没有加新功能或者修复 bug</li><li><code>perf</code> 优化相关，如提升性能，体验等</li><li><code>test</code> 测试用例，如单元测试、集成测试等</li><li><code>chore</code> 改变构建流程、增加依赖库、工具等</li><li><code>revert</code> 回退到上一个版本</li></ul></li></ul><h4 id="本地开发阶段增加-precommit-钩子" tabindex="-1"><a class="header-anchor" href="#本地开发阶段增加-precommit-钩子" aria-hidden="true">#</a> 本地开发阶段增加 precommit 钩子</h4><p>安装 husky，通过 commitmsg 钩子校验信息</p>',3),Cn=n("pre",{class:"language-json"},[n("code",null,[n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token property"},'"scripts"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token property"},'"commitmsg"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"validate-commit-msg"'),n("span",{class:"token punctuation"},","),e(`
    `),n("span",{class:"token property"},'"changelog"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"conventional-changelog -p angular -i CHANGELOG.md -s -r 0"'),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),e(`
  `),n("span",{class:"token property"},'"devDependencies"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token property"},'"validate-commit-msg"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"^2.11.1"'),n("span",{class:"token punctuation"},","),e(`
    `),n("span",{class:"token property"},'"conventional-changelog-cli"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"^1.2.0"'),n("span",{class:"token punctuation"},","),e(`
    `),n("span",{class:"token property"},'"husky"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"^0.13.1"'),e(`
  `),n("span",{class:"token punctuation"},"}"),e(`
`),n("span",{class:"token punctuation"},"}"),e(`
`)])],-1),yn=t('<h3 id="语义化版本-semantic-versioning" tabindex="-1"><a class="header-anchor" href="#语义化版本-semantic-versioning" aria-hidden="true">#</a> 语义化版本(Semantic Versioning)</h3><p>开源项目版本信息案例</p><ul><li>软件的版本通常由三位组成，形如：<code>X.Y.Z</code></li><li>版本是严格递增的，<code>16.2.0</code> -&gt; <code>16.3.0</code> -&gt; <code>16.3.1</code></li><li>在发布重要版本时，可以发布 <code>alpha</code>，<code>rc(release candidate)</code> 等先行版本</li><li><code>alpha</code> 和 <code>rc</code> 等修饰版本的关键字后面可以带上次数和 <code>meta</code> 信息</li></ul><h4 id="规范格式" tabindex="-1"><a class="header-anchor" href="#规范格式" aria-hidden="true">#</a> 规范格式</h4><ul><li>主版本号：当做了不兼容的 API 修改时</li><li>次版本号：当做了向下兼容的功能性新增</li><li>修订号：当做了向下兼容的问题修正 <ul><li>先行版本号：作为发布正式版之前的版本，格式是在修订版本号后面加上一个连接号(-)，再加上一连串以点(.)分割的标识符，标识符可以由英文、数字和连接号([0-9A-Za-z-])组成。 <ul><li>alpha：内部测试版，一般不向外部发布，会有很多 bug，一般只有测试人员使用</li><li>beta：测试版，这个阶段版本会一直加入新的功能，在 alpha 版之后推出</li><li>rc：release candidate。系统平台上就是发行候选版本，rc 版不会加入新的功能，主要着重于排错</li></ul></li></ul></li></ul><h4 id="遵守-semver-规范的优势" tabindex="-1"><a class="header-anchor" href="#遵守-semver-规范的优势" aria-hidden="true">#</a> 遵守 semver 规范的优势</h4><ul><li>避免出现循环依赖</li><li>依赖冲突减少</li></ul>',7);function xn(En,jn){const s=c("ExternalLinkIcon"),o=c("CodeTool");return r(),p("div",null,[_,n("ol",null,[m,n("li",null,[e("将构建配置设计成一个库，如："),n("a",b,[e("hjs-webpack"),a(s)]),e("、"),n("a",f,[e("Neutrino"),a(s)]),e("、"),n("a",A,[e("webpack-blocks"),a(s)])]),C]),n("ul",null,[n("li",null,[n("a",y,[e("create-react-app"),a(s)])]),n("li",null,[n("a",x,[e("kyt"),a(s)]),E]),n("li",null,[n("a",j,[e("nwb"),a(s)]),v])]),w,n("div",B,[D,n("p",null,[e("通过 "),n("a",N,[e("webpack-merge"),a(s)]),e(" 组合配置")]),a(o,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"const%20merge%20%3D%20require(%22webpack-merge%22)%3B%0A%0Amerge(%0A%20%20%7B%20a%3A%20%5B1%5D%2C%20b%3A%205%2C%20c%3A%2020%20%7D%2C%0A%20%20%7B%20a%3A%20%5B2%5D%2C%20b%3A%2010%2C%20d%3A%20421%20%7D%0A)%3B%0A%0A%2F%2F%20%7B%20a%3A%20%5B%201%2C%202%20%5D%2C%20b%3A%2010%2C%20c%3A%2020%2C%20d%3A%20421%20%7D%0A",ext:"javascript"},{default:l(()=>[L]),_:1}),I]),G,a(o,{class:"language-yaml","data-ext":"yml",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%7C-%2Ftest%0A%7C-%2Flib%0A%20%20%7C-webpack.base.js%0A%20%20%7C-webpack.dev.js%0A%20%20%7C-webpack.prod.js%0A%20%20%7C-webpack.ssr.js%0A%7C-index.js%0A%7C-package.json%0A%7C-.babelrc%0A%7C-.eslintrc%0A%7C-CHANGELOG.md%0A%7C-README.md%0A",ext:"yaml"},{default:l(()=>[q]),_:1}),S,T,a(o,{class:"language-json","data-ext":"json",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%7B%0A%20%20%22parser%22%3A%20%22babel-eslint%22%2C%0A%20%20%22env%22%3A%20%7B%0A%20%20%20%20%22browser%22%3A%20true%2C%0A%20%20%20%20%22node%22%3A%20false%0A%20%20%7D%2C%0A%20%20%22extends%22%3A%20%22airbnb-base%22%2C%0A%20%20%22rules%22%3A%20%7B%0A%20%20%20%20%22indent%22%3A%20%5B%22error%22%2C%202%5D%0A%20%20%7D%2C%0A%20%20%22ignorePatterns%22%3A%20%5B%22dist%22%2C%20%22node_modules%22%2C%20%22packages%22%5D%0A%7D%0A",ext:"json"},{default:l(()=>[F]),_:1}),M,n("ul",null,[n("li",null,[e("单纯的测试框架，需要断言库 "),n("ul",null,[n("li",null,[n("a",R,[e("mocha"),a(s)])]),n("li",null,[n("a",H,[e("ava"),a(s)])]),n("li",null,[n("a",V,[e("chai"),a(s)])]),n("li",null,[n("a",O,[e("should.js"),a(s)])]),n("li",null,[n("a",J,[e("expect"),a(s)])]),n("li",null,[n("a",P,[e("better-assert"),a(s)])])])]),n("li",null,[e("集成框架，开箱即用 "),n("ul",null,[n("li",null,[n("a",K,[e("Jasmine"),a(s)])]),n("li",null,[n("a",U,[e("Jest"),a(s)])])])])]),W,Z,z,Q,n("div",X,[Y,$,a(o,{class:"language-javascript","data-ext":"js",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"const%20expect%20%3D%20require('chai').expect%3B%0Aconst%20add%20%3D%20require('..%2Fsrc%2Fadd')%3B%0A%0Adescribe('use%20expect%3A%20src%2Fadd.js'%2C%20()%20%3D%3E%20%7B%0A%20%20it('add(1%2C%202)%20%3D%3D%3D%203'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20expect(add(1%2C%202)).to.equal(3)%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A",ext:"javascript"},{default:l(()=>[nn]),_:1})]),en,n("ul",null,[n("li",null,[n("p",null,[n("a",an,[e("Travis CI"),a(s)])])]),n("li",null,[n("p",null,[n("a",sn,[e("Circle CI"),a(s)])])]),n("li",null,[n("p",null,[n("a",tn,[e("Jenkins"),a(s)])])]),n("li",null,[n("p",null,[n("a",on,[e("AppVeyor"),a(s)])])]),n("li",null,[n("p",null,[n("a",ln,[e("CodeShip"),a(s)])])]),n("li",null,[n("p",null,[n("a",cn,[e("Drone"),a(s)])])]),n("li",null,[n("p",null,[n("a",rn,[e("Semaphore CI"),a(s)])])]),n("li",null,[n("p",null,[n("a",pn,[e("Buildkite"),a(s)])])]),n("li",null,[n("p",null,[n("a",un,[e("Wercker"),a(s)])])]),n("li",null,[n("p",null,[n("a",dn,[e("TeamCity"),a(s)])])])]),kn,n("ol",null,[n("li",null,[n("a",hn,[e("Travis CI"),a(s)]),e("使用 github 账号登录")]),n("li",null,[e("在"),n("a",gn,[e("Travis CI Repositories"),a(s)]),e("为项目开启")]),_n]),a(o,{class:"language-yaml","data-ext":"yml",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"language%3A%20node_js%0A%0Asudo%3A%20false%0A%0Acache%3A%0A%20%20apt%3A%20true%0A%20%20directories%3A%0A%20%20%20%20-%20node_modules%0A%0Anode_js%3A%20stable%20%23%20%E8%AE%BE%E7%BD%AE%E7%9B%B8%E5%BA%94%E7%9A%84node%E7%89%88%E6%9C%AC%0A%0Ainstall%3A%0A%20%20-%20npm%20install%20-D%20%23%20%E5%AE%89%E8%A3%85%E6%9E%84%E5%BB%BA%E5%99%A8%E7%89%88%E6%9C%AC%0A%20%20-%20cd%20.%2Ftest%2Ftemplate-project%0A%20%20-%20npm%20install%20-D%20%23%20%E5%AE%89%E8%A3%85%E6%A8%A1%E6%9D%BF%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%0A%0Ascript%3A%0A%20%20-%20npm%20test%0A",ext:"yaml"},{default:l(()=>[mn]),_:1}),bn,a(o,{class:"language-xml","data-ext":"xml",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%3Ctype%3E(%3Cscrope%3E)%3A%20%3Csubject%3E%0A%3CBLANK_LINE%3E%0A%3Cbody%3E%0A%3CBLANK_LINE%3E%0A%3Cfooter%3E%0A",ext:"xml"},{default:l(()=>[fn]),_:1}),An,a(o,{class:"language-json","data-ext":"json",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"false",async:"undefined",content:"%7B%0A%20%20%22scripts%22%3A%20%7B%0A%20%20%20%20%22commitmsg%22%3A%20%22validate-commit-msg%22%2C%0A%20%20%20%20%22changelog%22%3A%20%22conventional-changelog%20-p%20angular%20-i%20CHANGELOG.md%20-s%20-r%200%22%0A%20%20%7D%2C%0A%20%20%22devDependencies%22%3A%20%7B%0A%20%20%20%20%22validate-commit-msg%22%3A%20%22%5E2.11.1%22%2C%0A%20%20%20%20%22conventional-changelog-cli%22%3A%20%22%5E1.2.0%22%2C%0A%20%20%20%20%22husky%22%3A%20%22%5E0.13.1%22%0A%20%20%7D%0A%7D%0A",ext:"json"},{default:l(()=>[Cn]),_:1}),yn])}const wn=i(g,[["render",xn],["__file","package.html.vue"]]);export{wn as default};
