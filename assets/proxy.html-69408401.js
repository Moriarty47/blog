import{_ as i,M as p,p as u,q as r,N as t,V as a,Q as n,t as s,a0 as o}from"./framework-5411b43d.js";const d={},k=n("h2",{id:"proxy",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#proxy","aria-hidden":"true"},"#"),s(" Proxy")],-1),m=n("p",null,"用于创建一个 Proxy 对象，可理解为代理对象。这个 Proxy 对象允许创建一个可以用来代替原始对象的新对象，但这个新对象可能会重新定义基本的对象操作，例如获取、设置和定义属性值等。代理对象通常用于记录属性访问、验证、格式化或者清除输入等操作。",-1),y=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("ProxyHandler<T>"),n("span",{class:"token punctuation"},"}"),s(` handler 代理配置对象，每个被代理的操作，都需要提供一个对应的处理函数，用于拦截对应的操作。
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(`
 */`)]),s(`
`),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},[s("Proxy"),n("span",{class:"token operator"},"<"),n("span",{class:"token constant"},"T"),s(),n("span",{class:"token keyword"},"extends"),s(" object"),n("span",{class:"token operator"},">")]),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" handler"),n("span",{class:"token operator"},":"),s(" ProxyHandler"),n("span",{class:"token operator"},"<"),n("span",{class:"token constant"},"T"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),b=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),A=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" obj "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" proxyObj "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("obj"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},","),s(" receiver"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"get "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("prop"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},","),s(" receiver"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},","),s(" receiver"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"set "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("prop"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},","),s(" receiver"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
proxyObj`),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// set value"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"++"),s("proxyObj"),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// get value"),s(`
`),n("span",{class:"token comment"},"// set value"),s(`
`),n("span",{class:"token comment"},"// 2"),s(`
`)])],-1),g=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),v={class:"custom-container tip"},f=n("p",{class:"custom-container-title"},"提示",-1),B=n("code",null,"Reflect",-1),E=o('<h3 id="_13-种捕捉器-拦截操作" tabindex="-1"><a class="header-anchor" href="#_13-种捕捉器-拦截操作" aria-hidden="true">#</a> 13 种捕捉器(拦截操作)</h3><table><thead><tr><th style="text-align:left;">操作</th><th style="text-align:left;">详情</th></tr></thead><tbody><tr><td style="text-align:left;"><a href="#get-target-prop-receiver"><code>get(target, prop, receiver)</code></a></td><td style="text-align:left;">拦截对象属性的读取</td></tr><tr><td style="text-align:left;"><a href="#set-target-prop-value-receiver"><code>set(target, prop, value, receiver)</code></a></td><td style="text-align:left;">拦截对象属性的设置</td></tr><tr><td style="text-align:left;"><a href="#has-target-prop"><code>has(target, prop)</code></a></td><td style="text-align:left;">拦截 <code>prop in proxy</code> 操作，返回布尔值</td></tr><tr><td style="text-align:left;"><a href="#defineproperty-target-prop-descriptor"><code>defineProperty(target, prop, descriptor)</code></a></td><td style="text-align:left;">拦截<code>Object.defineProperty(proxy, prop, descriptor)</code>、<code>Object.defineProperties(proxy, descriptors)</code>，返回布尔值</td></tr><tr><td style="text-align:left;"><a href="#deleteproperty-target-prop"><code>deleteProperty(target, prop)</code></a></td><td style="text-align:left;">拦截<code>delete proxy[prop]</code>操作，返回布尔值</td></tr><tr><td style="text-align:left;"><a href="#getprototypeof-target"><code>getPrototypeOf(target)</code></a></td><td style="text-align:left;">拦截<code>Object.getPrototypeOf(proxy)</code>，返回一个对象</td></tr><tr><td style="text-align:left;"><a href="#setprototypeof-target-proto"><code>setPrototypeOf(target, proto)</code></a></td><td style="text-align:left;">拦截<code>Object.setPrototypeOf(proxy, proto)</code>，返回布尔值</td></tr><tr><td style="text-align:left;"><a href="#getownpropertydescriptor-target-prop"><code>getOwnPropertyDescriptor(target, prop)</code></a></td><td style="text-align:left;">拦截<code>getOwnPropertyDescriptor(proxy, prop)</code>，返回属性的描述对象</td></tr><tr><td style="text-align:left;"><a href="#ownkeys-target"><code>ownKeys(target)</code></a></td><td style="text-align:left;">拦截<code>Object.getOwnPropertyNames(proxy)</code>、<code>Object.getOwnPropertySymbols(proxy)</code>、<code>Object.keys(proxy)</code>、<code>for...in</code>，返回一个数组</td></tr><tr><td style="text-align:left;"><a href="#preventextensions-target"><code>preventExtensions(target)</code></a></td><td style="text-align:left;">拦截<code>Object.preventExtensions(proxy)</code>，返回布尔值</td></tr><tr><td style="text-align:left;"><a href="#isextensible-target"><code>isExtensible(target)</code></a></td><td style="text-align:left;">拦截<code>Object.isExtensible(proxy)</code>，返回布尔值</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;">当 <code>target</code> 为函数时，有下面两种额外操作可拦截</td></tr><tr><td style="text-align:left;"><a href="#apply-target-object-args"><code>apply(target, object, args)</code></a></td><td style="text-align:left;">拦截 Proxy 实例作为函数调用的操作，如<code>proxy(..args)</code>、<code>proxy.call(object, ...args)</code>、<code>proxy.apply(...args)</code></td></tr><tr><td style="text-align:left;"><a href="#construct-target-args"><code>construct(target, args)</code></a></td><td style="text-align:left;">拦截 Proxy 实例作为构造函数调用的操作，如<code>new proxy(...args)</code></td></tr></tbody></table><h4 id="get-target-prop-receiver" tabindex="-1"><a class="header-anchor" href="#get-target-prop-receiver" aria-hidden="true">#</a> <code>get(target, prop, receiver)</code></h4><p>get 捕捉器用于拦截属性的读取操作。<em>该方法可以被继承。</em></p>',4),x=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("string | symbol"),n("span",{class:"token punctuation"},"}"),s(` prop 目标属性名称
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("any"),n("span",{class:"token punctuation"},"}"),s(` receiver  如果目标属性是一个 getter 访问器属性，则 receiver 就是本次读取属性所在的 this 对象。通常，这就是 proxy 对象本身（或者，如果我们从 proxy 继承，则是从该 proxy 继承的对象）
 */`)]),s(`
`),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token builtin"},"symbol"),n("span",{class:"token punctuation"},","),s(" receiver"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),h=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),_=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'Foo'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("prop "),n("span",{class:"token keyword"},"in"),s(" target"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"return"),s(" target"),n("span",{class:"token punctuation"},"["),s("prop"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},"'Not exist'"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 'Foo'"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},"."),s("age"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 'Not exist'"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},"."),s("gender"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 'Not exist'"),s(`
`)])],-1),w=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),D=n("p",null,[s("如果拦截的属性描述为不可配置("),n("code",null,"configurable: false"),s(")并且不可写("),n("code",null,"writable: false"),s(")，则 Proxy 不能代理该属性。")],-1),C=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" obj "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"defineProperty"),n("span",{class:"token punctuation"},"("),s("obj"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'name'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'Foo'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"writable"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"configurable"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("obj"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},"'Bar'"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: 'get' on proxy: property 'name' is a read-only and non-configurable data property on the proxy target but the proxy did not return its actual value (expected 'Foo' but got 'Bar')"),s(`
`)])],-1),F=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),j=n("p",null,"示例：实现数组读取负数索引",-1),P=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},","),s(" receiver"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),s(" prop "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'string'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"let"),s(" index "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("prop"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),n("span",{class:"token function"},"isNaN"),n("span",{class:"token punctuation"},"("),s("index"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("index "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
          prop `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"String"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},"."),s("length "),n("span",{class:"token operator"},"+"),s(" index"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("prop "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'push'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token operator"},"..."),s("rest")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
          target`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),s("rest"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},","),s(" receiver"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
proxy`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},"["),n("span",{class:"token operator"},"-"),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 4"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},"["),n("span",{class:"token operator"},"-"),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 3"),s(`
`)])],-1),O=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),T=n("h4",{id:"set-target-prop-value-receiver",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#set-target-prop-value-receiver","aria-hidden":"true"},"#"),s(),n("code",null,"set(target, prop, value, receiver)")],-1),H=n("p",null,[s("set 捕捉器用于拦截属性的赋值操作。"),n("em",null,"该方法可以被继承。")],-1),N=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("string | symbol"),n("span",{class:"token punctuation"},"}"),s(` prop 目标属性名称
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("any"),n("span",{class:"token punctuation"},"}"),s(` newValue 目标属性的值
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("any"),n("span",{class:"token punctuation"},"}"),s(` receiver 与get捕捉器类似，仅与setter访问器属性相关
 * `),n("span",{class:"token keyword"},"@returns"),s(` 如果写入操作成功，应返回true，否则返回false(触发TypeError)
 */`)]),s(`
`),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token builtin"},"symbol"),n("span",{class:"token punctuation"},","),s(" newValue"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},","),s(" receiver"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"boolean"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),K=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),M=n("p",null,[s("使用 "),n("code",null,"set"),s(" 捕捉器可以实现数据验证或者数据绑定。")],-1),R=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" numbers "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("numbers"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},","),s(" val"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),s(" val "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'number'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      target`),n("span",{class:"token punctuation"},"["),s("prop"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" val"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

proxy`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
proxy`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
proxy`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'3'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: 'set' on proxy: trap returned falsish for property '2'"),s(`
`)])],-1),S=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),V=o('<div class="custom-container warning"><p class="custom-container-title">注意</p><p>对于 <code>set</code> 操作，必须在写入操作成功时返回 <code>true</code>。</p><p>如果返回任何<code>falsy</code>值，则该操作将触发<code>TypeError</code>。</p></div><h4 id="has-target-prop" tabindex="-1"><a class="header-anchor" href="#has-target-prop" aria-hidden="true">#</a> <code>has(target, prop)</code></h4><p><code>has</code>捕捉器用来拦截<code>HasProperty</code>操作。如<code>in</code>操作符(<code>for...in</code>循环除外)</p>',3),G=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("string | symbol"),n("span",{class:"token punctuation"},"}"),s(` prop 需检查的目标属性名称
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}"),s(` 返回布尔值
 */`)]),s(`
`),n("span",{class:"token function"},"has"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token builtin"},"symbol"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"boolean"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),L=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),U=o('<div class="custom-container warning"><p class="custom-container-title">注意</p><p><code>has()</code>方法拦截<code>HasProperty</code>操作，而不是<code>HasOwnProperty</code>操作，即该方法不判断一个属性是对象自身属性还是继承属性。</p><p>目标对象不可扩展(<code>Object.isExtensible(proxy)为false</code>)或其属性不可配置(<code>configurable: false</code>)，则<code>has()</code>报错。</p></div>',1),$=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 隐藏某些属性"),s(`
`),n("span",{class:"token keyword"},"const"),s(" proxy1 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"__privateKey"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'private'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"has"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("target"),n("span",{class:"token punctuation"},","),s(" prop")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("prop"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"startsWith"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'__'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token keyword"},"return"),s(" prop "),n("span",{class:"token keyword"},"in"),s(" target"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'__privateKey'"),s(),n("span",{class:"token keyword"},"in"),s(" proxy1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// false"),s(`

`),n("span",{class:"token keyword"},"const"),s(" nonExtensionObj "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"foo"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'foo'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"preventExtensions"),n("span",{class:"token punctuation"},"("),s("nonExtensionObj"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" proxy2 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("nonExtensionObj"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"has"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("target"),n("span",{class:"token punctuation"},","),s(" prop")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'foo'"),s(),n("span",{class:"token keyword"},"in"),s(" proxy2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: 'has' on proxy: trap returned falsish for property 'foo' but the proxy target is not extensible"),s(`
`)])],-1),I=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),W=n("h4",{id:"defineproperty-target-prop-descriptor",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#defineproperty-target-prop-descriptor","aria-hidden":"true"},"#"),s(),n("code",null,"defineProperty(target, prop, descriptor)")],-1),q=n("p",null,[n("code",null,"defineProperty"),s("捕捉器用于拦截"),n("code",null,"Object.defineProperty()"),s("操作。")],-1),J=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("string | symbol"),n("span",{class:"token punctuation"},"}"),s(` prop 目标属性名称
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("PropertyDescriptor"),n("span",{class:"token punctuation"},"}"),s(` attributes 目标属性描述对象
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}"),s(` 返回布尔值
 */`)]),s(`
`),n("span",{class:"token function"},"defineProperty"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token builtin"},"symbol"),n("span",{class:"token punctuation"},","),s(" attributes"),n("span",{class:"token operator"},":"),s(" PropertyDescriptor"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"boolean"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),Q=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),z=o('<div class="custom-container warning"><p class="custom-container-title">注意</p><p>目标对象不可扩展(<code>Object.isExtensible(proxy)为false</code>)，则<code>defineProperty()</code>不能增加目标对象上不存在的属性。</p><p>目标对象的属性不可写(<code>writable: false</code>)或不可配置(<code>configurable: false</code>)，则<code>defineProperty()</code>不可改变该属性描述。</p></div>',1),X=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"defineProperty"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},","),s(" attributes")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

proxy`),n("span",{class:"token punctuation"},"."),s("prop "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'no'"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// won't work!"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},"."),s("prop"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// undefined"),s(`
`)])],-1),Y=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Z=n("h4",{id:"deleteproperty-target-prop",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#deleteproperty-target-prop","aria-hidden":"true"},"#"),s(),n("code",null,"deleteProperty(target, prop)")],-1),nn=n("p",null,[n("code",null,"deleteProperty"),s(" 捕捉器用于拦截"),n("code",null,"delete"),s("操作，当返回"),n("code",null,"false"),s("或抛出错误时，"),n("code",null,"delete"),s("命令将无法正确执行。")],-1),sn=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("string | symbol"),n("span",{class:"token punctuation"},"}"),s(` prop 目标属性名称
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}"),s(` 返回布尔值
 */`)]),s(`
`),n("span",{class:"token function"},"deleteProperty"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token builtin"},"symbol"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"boolean"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),tn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),an=n("div",{class:"custom-container warning"},[n("p",{class:"custom-container-title"},"注意"),n("p",null,[s("目标对象自身的不可配置("),n("code",null,"configurable: false"),s(")属性，不能被"),n("code",null,"deleteProperty"),s("方法删除。")])],-1),en=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"__privateKey"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'private'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"deleteProperty"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("target"),n("span",{class:"token punctuation"},","),s(" prop")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("prop"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"startsWith"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'__'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Error"),n("span",{class:"token punctuation"},"("),s(`
          `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},'Invalid attempt to delete private property "'),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("prop"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},'".'),n("span",{class:"token template-punctuation string"},"`")]),s(`
        `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token keyword"},"delete"),s(" target"),n("span",{class:"token punctuation"},"["),s("prop"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"delete"),s(" proxy"),n("span",{class:"token punctuation"},"."),s("__privateKey"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},'// Error: Invalid attempt to delete private property "__privateKey".'),s(`
`)])],-1),on=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),cn=o('<h4 id="getprototypeof-target" tabindex="-1"><a class="header-anchor" href="#getprototypeof-target" aria-hidden="true">#</a> <code>getPrototypeOf(target)</code></h4><p><code>getPrototypeOf</code>捕捉器用来拦截获取对象的原型。拦截以下操作：</p><ul><li><code>Object.prototype.__proto__</code></li><li><code>Object.prototype.isPrototypeOf()</code></li><li><code>Object.getPrototypeOf()</code></li><li><code>Reflect.getPrototypeOf()</code></li><li><code>instanceof</code></li></ul>',3),pn=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("object | null"),n("span",{class:"token punctuation"},"}"),s(` 返回值必须是对象或null
 */`)]),s(`
`),n("span",{class:"token function"},"getPrototypeOf"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(" object "),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),ln=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),un=n("div",{class:"custom-container warning"},[n("p",{class:"custom-container-title"},"注意"),n("p",null,[s("目标对象不可拓展，则"),n("code",null,"getPropertyOf()"),s("必须返回目标对象的原型对象。")])],-1),rn=n("h4",{id:"setprototypeof-target-proto",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#setprototypeof-target-proto","aria-hidden":"true"},"#"),s(),n("code",null,"setPrototypeOf(target, proto)")],-1),dn=n("p",null,[n("code",null,"setPrototypeOf"),s("捕捉器用来拦截设置对象的原型。")],-1),kn=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("object | null"),n("span",{class:"token punctuation"},"}"),s(` newPrototype 新的原型对象或null
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}"),s(` 返回布尔值
 */`)]),s(`
`),n("span",{class:"token function"},"setPrototypeOf"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" v"),n("span",{class:"token operator"},":"),s(" object "),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"boolean"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),mn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),yn=n("div",{class:"custom-container warning"},[n("p",{class:"custom-container-title"},"注意"),n("p",null,[s("目标对象不可拓展，则"),n("code",null,"setPropertyOf()"),s("不可改变目标对象的原型。")])],-1),bn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" nonExtensionObj "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"foo"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'foo'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"preventExtensions"),n("span",{class:"token punctuation"},"("),s("nonExtensionObj"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("nonExtensionObj"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"setPropertyOf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("target"),n("span",{class:"token punctuation"},","),s(" v")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" proto "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setPrototypeOf"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},","),s(" proto"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: #<Object> is not extensible"),s(`
`)])],-1),An=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),gn=n("h4",{id:"getownpropertydescriptor-target-prop",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#getownpropertydescriptor-target-prop","aria-hidden":"true"},"#"),s(),n("code",null,"getOwnPropertyDescriptor(target, prop)")],-1),vn=n("p",null,[n("code",null,"getOwnPropertyDescriptor"),s(" 捕捉器用于拦截"),n("code",null,"Object.getOwnPropertyDescriptor()"),s("操作。")],-1),fn=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("string | symbol"),n("span",{class:"token punctuation"},"}"),s(` prop 目标属性名称
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("PropertyDescriptor | undefined"),n("span",{class:"token punctuation"},"}"),s(` 返回属性描述对象或undefined
 */`)]),s(`
`),n("span",{class:"token function"},"getOwnPropertyDescriptor"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token builtin"},"symbol"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(" PropertyDescriptor "),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"undefined"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),Bn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),En=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"__privateKey"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'private'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"key"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'public'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"getOwnPropertyDescriptor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("target"),n("span",{class:"token punctuation"},","),s(" prop")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("prop"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"startsWith"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'__'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"return"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"return"),s(" Object"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getOwnPropertyDescriptor"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("Object"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getOwnPropertyDescriptor"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'a'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// undefined"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("Object"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getOwnPropertyDescriptor"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'__privateKey'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// undefined"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("Object"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getOwnPropertyDescriptor"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'key'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// { value: 'public', writable: true, enumerable: true, configurable: true }"),s(`
`)])],-1),xn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),hn=n("h4",{id:"ownkeys-target",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ownkeys-target","aria-hidden":"true"},"#"),s(),n("code",null,"ownKeys(target)")],-1),_n=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("ArrayLike<string | symbol>"),n("span",{class:"token punctuation"},"}"),s(`
 */`)]),s(`
`),n("span",{class:"token function"},"ownKeys"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(" ArrayLike"),n("span",{class:"token operator"},"<"),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token builtin"},"symbol"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),wn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Dn=o('<p><code>ownKeys</code>捕捉器拦截对象自身属性的读取操作。拦截以下操作：</p><ul><li><code>Object.getOwnPropertyNames()</code></li><li><code>Object.getOwnPropertySymbols()</code></li><li><code>Object.keys()</code></li><li><code>for...in</code>循环</li></ul><div class="custom-container warning"><p class="custom-container-title">注意</p><p>其返回的数组成员，只能是字符串或者<code>Symbol</code>值，否则报错。</p><p>目标对象包含不可配置(<code>configurable: false</code>)属性，则该属性必须被返回，否则报错。</p><p>目标对象不可扩展(<code>Object.isExtensible(proxy)为false</code>)，则返回的数组成员必须包含原对象的所有属性，且不能包含多余的属性，否则报错。</p></div>',3),Cn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy1 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"ownKeys"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"target"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"undefined"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getOwnPropertyNames"),n("span",{class:"token punctuation"},"("),s("proxy1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: true is not a valid property name"),s(`
`)])],-1),Fn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),jn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" obj1 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"defineProperty"),n("span",{class:"token punctuation"},"("),s("obj1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'a'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"configurable"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"enumerable"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" proxy2 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("obj1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"ownKeys"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"target"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'b'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getOwnPropertyNames"),n("span",{class:"token punctuation"},"("),s("proxy2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: 'ownKeys' on proxy: trap result did not include 'a'"),s(`
`)])],-1),Pn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),On=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" obj2 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"a"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"preventExtensions"),n("span",{class:"token punctuation"},"("),s("obj2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" proxy3 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("obj2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"ownKeys"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"target"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'a'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'b'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getOwnPropertyNames"),n("span",{class:"token punctuation"},"("),s("proxy3"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: 'ownKeys' on proxy: trap returned extra keys but proxy target is non-extensible"),s(`
`)])],-1),Tn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Hn=n("h4",{id:"preventextensions-target",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#preventextensions-target","aria-hidden":"true"},"#"),s(),n("code",null,"preventExtensions(target)")],-1),Nn=n("p",null,[n("code",null,"preventExtensions"),s("捕捉器用于拦截"),n("code",null,"Object.preventExtensions()"),s("操作。")],-1),Kn=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}"),s(` 返回布尔值
 */`)]),s(`
`),n("span",{class:"token function"},"preventExtensions"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"boolean"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),Mn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Rn=n("div",{class:"custom-container warning"},[n("p",{class:"custom-container-title"},"注意"),n("p",null,[s("目标对象不可扩展("),n("code",null,"Object.isExtensible(proxy)为false"),s(")，则"),n("code",null,"preventExtensions"),s("才能返回"),n("code",null,"true"),s("，否则报错。")])],-1),Sn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy1 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"preventExtensions"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"target"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"preventExtensions"),n("span",{class:"token punctuation"},"("),s("proxy1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: 'preventExtensions' on proxy: trap returned truish but the proxy target is extensible"),s(`
`)])],-1),Vn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Gn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy2 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"preventExtensions"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"target"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"preventExtensions"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// Need to invoke."),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("Object"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"preventExtensions"),n("span",{class:"token punctuation"},"("),s("proxy2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// Proxy {}"),s(`
`)])],-1),Ln=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Un=n("h4",{id:"isextensible-target",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#isextensible-target","aria-hidden":"true"},"#"),s(),n("code",null,"isExtensible(target)")],-1),$n=n("p",null,[n("code",null,"isExtensible"),s("捕捉器用于拦截"),n("code",null,"Object.isExtensible()"),s("操作。")],-1),In=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}"),s(` 返回布尔值
 */`)]),s(`
`),n("span",{class:"token function"},"isExtensible"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"boolean"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),Wn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),qn=n("div",{class:"custom-container warning"},[n("p",{class:"custom-container-title"},"注意"),n("p",null,[s("返回值必须与目标对象的 "),n("code",null,"isExtension"),s(" 属性保持一致，否则报错。")])],-1),Jn=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function-variable function"},"isExtensible"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"target"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"isExtensible"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: 'isExtensible' on proxy: trap result does not reflect extensibility of proxy target (which is 'true')"),s(`
`)])],-1),Qn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),zn=n("h4",{id:"apply-target-object-args",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#apply-target-object-args","aria-hidden":"true"},"#"),s(),n("code",null,"apply(target, object, args)")],-1),Xn=n("p",null,[n("code",null,"apply"),s(" 捕捉器能使代理以函数的方式被调用。")],-1),Yn=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("any"),n("span",{class:"token punctuation"},"}"),s(` thisArg this的值
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("any[]"),n("span",{class:"token punctuation"},"}"),s(` argArray 参数列表
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("any"),n("span",{class:"token punctuation"},"}"),s(`
 */`)]),s(`
`),n("span",{class:"token function"},"apply"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" thisArg"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},","),s(" argArray"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),Zn=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),ns=n("p",null,"当使用原始函数实现一个包装器时：",-1),ss=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"delay"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("fn"),n("span",{class:"token punctuation"},","),s(" ms")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token operator"},"..."),s("rest")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"setTimeout"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"fn"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"apply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},","),s(" rest"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" ms"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"_sayHi"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"name"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Hello, "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("name"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"!"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("_sayHi"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 1"),s(`

`),n("span",{class:"token keyword"},"const"),s(" sayHi "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"delay"),n("span",{class:"token punctuation"},"("),s("_sayHi"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3000"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("sayHi"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 0"),s(`

`),n("span",{class:"token function"},"sayHi"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Moriarty'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// (3秒后输出), Hello, Moriarty!"),s(`
`)])],-1),ts=n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{id:"code-apply-11",for:"code-apply-11",class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("div",{id:"code-apply-15",for:"code-apply-15",class:"highlight-line"}," "),n("br"),n("br")],-1),as=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),es=n("code",null,"11",-1),os=n("code",null,"15",-1),cs=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"delay"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("fn"),n("span",{class:"token punctuation"},","),s(" ms")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("fn"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"apply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("target"),n("span",{class:"token punctuation"},","),s(" thisArg"),n("span",{class:"token punctuation"},","),s(" args")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token function"},"setTimeout"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"target"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"apply"),n("span",{class:"token punctuation"},"("),s("thisArg"),n("span",{class:"token punctuation"},","),s(" args"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" ms"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"_sayHi"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"name"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Hello, "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("name"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"!"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("_sayHi"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 1"),s(`

`),n("span",{class:"token keyword"},"const"),s(" sayHi "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"delay"),n("span",{class:"token punctuation"},"("),s("_sayHi"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3000"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("sayHi"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 1"),s(`

`),n("span",{class:"token function"},"sayHi"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Moriarty'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// (3秒后输出), Hello, Moriarty!"),s(`
`)])],-1),ps=n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{id:"code-proxy-apply-13",for:"code-proxy-apply-13",class:"highlight-line"}," "),n("br"),n("div",{id:"code-proxy-apply-15",for:"code-proxy-apply-15",class:"highlight-line"}," "),n("div",{for:"code-proxy-apply-15",class:"highlight-line"}," "),n("div",{for:"code-proxy-apply-15",class:"highlight-line"}," "),n("br"),n("br")],-1),ls=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),is=n("code",null,"13",-1),us=n("code",null,"15",-1),rs=n("h4",{id:"construct-target-args",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#construct-target-args","aria-hidden":"true"},"#"),s(),n("code",null,"construct(target, args)")],-1),ds=n("p",null,[n("code",null,"construct"),s(" 捕捉器用于拦截"),n("code",null,"new"),s("命令。")],-1),ks=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("any[]"),n("span",{class:"token punctuation"},"}"),s(` argArray 参数列表
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("Function"),n("span",{class:"token punctuation"},"}"),s(` newTarget new调用的原始构造器
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("object"),n("span",{class:"token punctuation"},"}"),s(` 必须返回一个对象
 */`)]),s(`
`),n("span",{class:"token function"},"construct"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" argArray"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" newTarget"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"Function"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(" object"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),ms=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),ys=n("p",null,[n("code",null,"construct()"),s("方法中的"),n("code",null,"this"),s("指向的是"),n("code",null,"handler"),s("，而不是实例对象。")],-1),bs=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"Animal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token keyword"},"const"),s(" handler "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"construct"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("target"),n("span",{class:"token punctuation"},","),s(" args")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"this === handler : "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),n("span",{class:"token keyword"},"this"),s(),n("span",{class:"token operator"},"==="),s(" handler"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"called: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("args"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"', '"),n("span",{class:"token punctuation"},")"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("args"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," has been proxied."),n("span",{class:"token template-punctuation string"},"`")]),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" AnimalProxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("Animal"),n("span",{class:"token punctuation"},","),s(" handler"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"AnimalProxy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Animal'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// this === handler : true"),s(`
`),n("span",{class:"token comment"},"// called: Animal"),s(`
`),n("span",{class:"token comment"},"// { value: 'Animal has been proxied.' }"),s(`
`)])],-1),As=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),gs=n("h3",{id:"proxy-revocable",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#proxy-revocable","aria-hidden":"true"},"#"),s(),n("code",null,"Proxy.revocable()")],-1),vs=n("p",null,"一个 可撤销 的代理是可以被禁用的代理。",-1),fs=n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("T"),n("span",{class:"token punctuation"},"}"),s(` target 被代理的原始对象
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("ProxyHandler<T>"),n("span",{class:"token punctuation"},"}"),s(` handler 代理配置对象，每个被代理的操作，都需要提供一个对应的处理函数，用于拦截对应的操作。
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(" proxy: T, revoke: () => void "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
 */`)]),s(`
Proxy`),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"revocable"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),n("span",{class:"token constant"},"T"),s(),n("span",{class:"token keyword"},"extends"),s(" object"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" handler"),n("span",{class:"token operator"},":"),s(" ProxyHandler"),n("span",{class:"token operator"},"<"),n("span",{class:"token constant"},"T"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(" proxy"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token function-variable function"},"revoke"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1),Bs=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Es=n("p",null,"假设我们有一个资源，并且想随时关闭对该资源的访问。我们可以做的是将它包装成可一个撤销的代理，没有任何捕捉器。这样的代理会将操作转发给对象，并且我们可以随时将其禁用。",-1),xs=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" obj "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"data"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'foo'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" proxy"),n("span",{class:"token punctuation"},","),s(" revoke "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(" Proxy"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"revocable"),n("span",{class:"token punctuation"},"("),s("obj"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// foo"),s(`
`),n("span",{class:"token function"},"revoke"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: Cannot perform 'get' on a proxy that has been revoked"),s(`
`)])],-1),hs=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),_s=o('<h3 id="proxy-的局限性" tabindex="-1"><a class="header-anchor" href="#proxy-的局限性" aria-hidden="true">#</a> Proxy 的局限性</h3><h4 id="内建对象-内部插槽-internal-slot" tabindex="-1"><a class="header-anchor" href="#内建对象-内部插槽-internal-slot" aria-hidden="true">#</a> 内建对象 -&gt; 内部插槽(Internal Slot)</h4><p>许多内建对象，例如 <code>Map</code>，<code>Set</code>，<code>Date</code>，<code>Promise</code> 等，都使用了所谓的“内部插槽(Internal Slot)”。类似于属性，但仅限于内部使用，仅用于规范目的。例如，<code>Map</code>将项目(item)存储在<code>[[MapData]]</code>中。内建方法可以直接访问它们，而不通过<code>[[Get]]/[[Set]]</code>内部方法。所以<code>Proxy</code>无法拦截它们。</p>',3),ws=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
proxy`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'foo'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: Method map.prototype.set called on incompatible receiver #<Map>"),s(`
`)])],-1),Ds=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Cs=o("<p>在内部，一个 <code>Map</code> 将所有数据存储在其 <code>[[MapData]]</code>内部插槽中。代理对象没有这样的插槽。内建方法 <code>Map.prototype.set</code> 方法试图访问内部属性 <code>this.[[MapData]]</code>，但由于 <code>this=proxy</code>，在 <code>proxy</code> 中无法找到它，因此抛错。</p><p>但是，将代码如下修改：</p>",2),Fs=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" proxy "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},","),s(" receiver"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" value "),n("span",{class:"token operator"},"="),s(" Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),s("arguments"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"typeof"),s(" value "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'function'"),s(),n("span",{class:"token operator"},"?"),s(),n("span",{class:"token function"},"value"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"bind"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},":"),s(" value"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
proxy`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'foo'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("proxy"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'foo'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 1"),s(`
`)])],-1),js=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Ps=o('<p>现在它正常工作了，因为 <code>get</code> 捕捉器将函数属性（例如 <code>map.set</code>）绑定到了目标对象(<code>map</code>)本身。</p><p>与前面的示例不同，<code>proxy.set(...)</code> 内部 <code>this</code> 的值并不是 <code>proxy</code>，而是原始的 <code>map</code>。因此，当 <code>set</code> 捕捉器的内部实现尝试访问 <code>this.[[MapData]]</code> 内部插槽时，成功执行。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>出于历史原因，内建 <code>Array</code> 没有使用内部插槽。所以，代理数组时没有上述问题。</p></div><h4 id="类的私有字段" tabindex="-1"><a class="header-anchor" href="#类的私有字段" aria-hidden="true">#</a> 类的私有字段</h4><p>类的私有字段也是通过内部插槽实现的，不通过<code>[[Get]]/[[Set]]</code>内部方法访问。</p>',5),Os=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"User"),s(),n("span",{class:"token punctuation"},"{"),s(`
  #name `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'Guest'"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token function"},"getName"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("#name"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token keyword"},"const"),s(" user "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"User"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
user`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getName"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// TypeError: Cannot read private member #name from an object whose class did not declare it"),s(`
`)])],-1),Ts=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Hs=n("p",null,[s("上面代码在调用"),n("code",null,"getName()"),s("是，"),n("code",null,"this"),s("的值是代理后的"),n("code",null,"user"),s("实例，它没有带有私有字段的内部插槽。")],-1),Ns=n("p",null,[s("使用"),n("code",null,"bind"),s("方案即可恢复正常。")],-1),Ks=n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"User"),s(),n("span",{class:"token punctuation"},"{"),s(`
  #name `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'Guest'"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token function"},"getName"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("#name"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token keyword"},"const"),s(" user "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"User"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" prop"),n("span",{class:"token punctuation"},","),s(" receiver"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" value "),n("span",{class:"token operator"},"="),s(" Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),s("arguments"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"typeof"),s(" value "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'function'"),s(),n("span",{class:"token operator"},"?"),s(),n("span",{class:"token function"},"value"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"bind"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},":"),s(" value"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("user"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getName"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 'Guest'"),s(`
`)])],-1),Ms=n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})],-1),Rs=n("div",{class:"custom-container warning"},[n("p",{class:"custom-container-title"},"注意"),n("p",null,[n("code",null,"bind"),s("方案也有缺点： 它将原始对象暴露给该方法，可能使其进一步传递并破坏其他代理功能。")])],-1);function Ss(Vs,Gs){const e=p("CodeTool"),l=p("RouterLink"),c=p("CodeLink");return u(),r("div",null,[k,m,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7BProxyHandler%3CT%3E%7D%20handler%20%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%AF%8F%E4%B8%AA%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E6%93%8D%E4%BD%9C%EF%BC%8C%E9%83%BD%E9%9C%80%E8%A6%81%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E5%AF%B9%E5%BA%94%E7%9A%84%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%8C%E7%94%A8%E4%BA%8E%E6%8B%A6%E6%88%AA%E5%AF%B9%E5%BA%94%E7%9A%84%E6%93%8D%E4%BD%9C%E3%80%82%0A%20*%20%40returns%20%7BT%7D%0A%20*%2F%0Anew%20Proxy%3CT%20extends%20object%3E(target%3A%20T%2C%20handler%3A%20ProxyHandler%3CT%3E)%3A%20T%3B%0A",ext:"typescript"},{default:a(()=>[y,b]),_:1}),t(e,{id:"proxy-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20obj%20%3D%20%7B%7D%3B%0Aconst%20proxyObj%20%3D%20new%20Proxy(obj%2C%20%7B%0A%20%20get(target%2C%20prop%2C%20receiver)%20%7B%0A%20%20%20%20console.log(%60get%20%24%7Bprop%7D%60)%3B%0A%20%20%20%20return%20Reflect.get(target%2C%20prop%2C%20receiver)%3B%0A%20%20%7D%2C%0A%20%20set(target%2C%20prop%2C%20receiver)%20%7B%0A%20%20%20%20console.log(%60set%20%24%7Bprop%7D%60)%3B%0A%20%20%20%20return%20Reflect.set(target%2C%20prop%2C%20receiver)%3B%0A%20%20%7D%2C%0A%7D)%3B%0AproxyObj.value%20%3D%201%3B%20%2F%2F%20set%20value%0Aconsole.log(%2B%2BproxyObj.value)%3B%0A%2F%2F%20get%20value%0A%2F%2F%20set%20value%0A%2F%2F%202%0A",ext:"javascript"},{default:a(()=>[A,g]),_:1}),n("div",v,[f,n("p",null,[t(l,{to:"/JSBooks/ECMAScript/ES6/reflect.html"},{default:a(()=>[B]),_:1}),s("用于获取操作的默认行为。")])]),E,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7Bstring%20%7C%20symbol%7D%20prop%20%E7%9B%AE%E6%A0%87%E5%B1%9E%E6%80%A7%E5%90%8D%E7%A7%B0%0A%20*%20%40param%20%7Bany%7D%20receiver%20%20%E5%A6%82%E6%9E%9C%E7%9B%AE%E6%A0%87%E5%B1%9E%E6%80%A7%E6%98%AF%E4%B8%80%E4%B8%AA%20getter%20%E8%AE%BF%E9%97%AE%E5%99%A8%E5%B1%9E%E6%80%A7%EF%BC%8C%E5%88%99%20receiver%20%E5%B0%B1%E6%98%AF%E6%9C%AC%E6%AC%A1%E8%AF%BB%E5%8F%96%E5%B1%9E%E6%80%A7%E6%89%80%E5%9C%A8%E7%9A%84%20this%20%E5%AF%B9%E8%B1%A1%E3%80%82%E9%80%9A%E5%B8%B8%EF%BC%8C%E8%BF%99%E5%B0%B1%E6%98%AF%20proxy%20%E5%AF%B9%E8%B1%A1%E6%9C%AC%E8%BA%AB%EF%BC%88%E6%88%96%E8%80%85%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%88%91%E4%BB%AC%E4%BB%8E%20proxy%20%E7%BB%A7%E6%89%BF%EF%BC%8C%E5%88%99%E6%98%AF%E4%BB%8E%E8%AF%A5%20proxy%20%E7%BB%A7%E6%89%BF%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%89%0A%20*%2F%0Aget(target%3A%20T%2C%20prop%3A%20string%20%7C%20symbol%2C%20receiver%3A%20any)%3A%20any%3B%0A",ext:"typescript"},{default:a(()=>[x,h]),_:1}),t(e,{id:"get-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy%20%3D%20new%20Proxy(%0A%20%20%7B%20name%3A%20'Foo'%20%7D%2C%0A%20%20%7B%0A%20%20%20%20get(target%2C%20prop)%20%7B%0A%20%20%20%20%20%20if%20(prop%20in%20target)%20return%20target%5Bprop%5D%3B%0A%20%20%20%20%20%20return%20'Not%20exist'%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D%0A)%3B%0A%0Aconsole.log(proxy.name)%3B%20%2F%2F%20'Foo'%0Aconsole.log(proxy.age)%3B%20%2F%2F%20'Not%20exist'%0Aconsole.log(proxy.gender)%3B%20%2F%2F%20'Not%20exist'%0A",ext:"javascript"},{default:a(()=>[_,w]),_:1}),D,t(e,{id:"get-example2",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20obj%20%3D%20%7B%7D%3B%0AObject.defineProperty(obj%2C%20'name'%2C%20%7B%0A%20%20value%3A%20'Foo'%2C%0A%20%20writable%3A%20false%2C%0A%20%20configurable%3A%20false%2C%0A%7D)%3B%0A%0Aconst%20proxy%20%3D%20new%20Proxy(obj%2C%20%7B%0A%20%20get(target%2C%20prop)%20%7B%0A%20%20%20%20return%20'Bar'%3B%0A%20%20%7D%2C%0A%7D)%3B%0Aconsole.log(proxy.name)%3B%0A%2F%2F%20TypeError%3A%20'get'%20on%20proxy%3A%20property%20'name'%20is%20a%20read-only%20and%20non-configurable%20data%20property%20on%20the%20proxy%20target%20but%20the%20proxy%20did%20not%20return%20its%20actual%20value%20(expected%20'Foo'%20but%20got%20'Bar')%0A",ext:"javascript"},{default:a(()=>[C,F]),_:1}),j,t(e,{id:"get-example3",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy%20%3D%20new%20Proxy(%5B%5D%2C%20%7B%0A%20%20get(target%2C%20prop%2C%20receiver)%20%7B%0A%20%20%20%20if%20(typeof%20prop%20%3D%3D%3D%20'string')%20%7B%0A%20%20%20%20%20%20let%20index%20%3D%20Number(prop)%3B%0A%20%20%20%20%20%20if%20(!isNaN(index))%20%7B%0A%20%20%20%20%20%20%20%20if%20(index%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20prop%20%3D%20String(target.length%20%2B%20index)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(prop%20%3D%3D%3D%20'push')%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20(...rest)%20%7B%0A%20%20%20%20%20%20%20%20%20%20target.push(...rest)%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20Reflect.get(target%2C%20prop%2C%20receiver)%3B%0A%20%20%7D%2C%0A%7D)%3B%0Aproxy.push(1%2C%202%2C%203%2C%204)%3B%0Aconsole.log(proxy%5B-1%5D)%3B%20%2F%2F%204%0Aconsole.log(proxy%5B-2%5D)%3B%20%2F%2F%203%0A",ext:"javascript"},{default:a(()=>[P,O]),_:1}),T,H,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7Bstring%20%7C%20symbol%7D%20prop%20%E7%9B%AE%E6%A0%87%E5%B1%9E%E6%80%A7%E5%90%8D%E7%A7%B0%0A%20*%20%40param%20%7Bany%7D%20newValue%20%E7%9B%AE%E6%A0%87%E5%B1%9E%E6%80%A7%E7%9A%84%E5%80%BC%0A%20*%20%40param%20%7Bany%7D%20receiver%20%E4%B8%8Eget%E6%8D%95%E6%8D%89%E5%99%A8%E7%B1%BB%E4%BC%BC%EF%BC%8C%E4%BB%85%E4%B8%8Esetter%E8%AE%BF%E9%97%AE%E5%99%A8%E5%B1%9E%E6%80%A7%E7%9B%B8%E5%85%B3%0A%20*%20%40returns%20%E5%A6%82%E6%9E%9C%E5%86%99%E5%85%A5%E6%93%8D%E4%BD%9C%E6%88%90%E5%8A%9F%EF%BC%8C%E5%BA%94%E8%BF%94%E5%9B%9Etrue%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9Efalse(%E8%A7%A6%E5%8F%91TypeError)%0A%20*%2F%0Aset(target%3A%20T%2C%20prop%3A%20string%20%7C%20symbol%2C%20newValue%3A%20any%2C%20receiver%3A%20any)%3A%20boolean%3B%0A",ext:"typescript"},{default:a(()=>[N,K]),_:1}),M,t(e,{id:"set-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20numbers%20%3D%20%5B%5D%3B%0Aconst%20proxy%20%3D%20new%20Proxy(numbers%2C%20%7B%0A%20%20set(target%2C%20prop%2C%20val)%20%7B%0A%20%20%20%20if%20(typeof%20val%20%3D%3D%3D%20'number')%20%7B%0A%20%20%20%20%20%20target%5Bprop%5D%20%3D%20val%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%7D)%3B%0A%0Aproxy.push(1)%3B%0Aproxy.push(2)%3B%0Aproxy.push('3')%3B%0A%2F%2F%20TypeError%3A%20'set'%20on%20proxy%3A%20trap%20returned%20falsish%20for%20property%20'2'%0A",ext:"javascript"},{default:a(()=>[R,S]),_:1}),V,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7Bstring%20%7C%20symbol%7D%20prop%20%E9%9C%80%E6%A3%80%E6%9F%A5%E7%9A%84%E7%9B%AE%E6%A0%87%E5%B1%9E%E6%80%A7%E5%90%8D%E7%A7%B0%0A%20*%20%40returns%20%7Bboolean%7D%20%E8%BF%94%E5%9B%9E%E5%B8%83%E5%B0%94%E5%80%BC%0A%20*%2F%0Ahas(target%3A%20T%2C%20prop%3A%20string%20%7C%20symbol)%3A%20boolean%3B%0A",ext:"typescript"},{default:a(()=>[G,L]),_:1}),U,t(e,{id:"has-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"%2F%2F%20%E9%9A%90%E8%97%8F%E6%9F%90%E4%BA%9B%E5%B1%9E%E6%80%A7%0Aconst%20proxy1%20%3D%20new%20Proxy(%0A%20%20%7B%20__privateKey%3A%20'private'%20%7D%2C%0A%20%20%7B%0A%20%20%20%20has(target%2C%20prop)%20%7B%0A%20%20%20%20%20%20if%20(prop.startsWith('__'))%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20prop%20in%20target%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D%0A)%3B%0Aconsole.log('__privateKey'%20in%20proxy1)%3B%20%2F%2F%20false%0A%0Aconst%20nonExtensionObj%20%3D%20%7B%20foo%3A%20'foo'%20%7D%3B%0AObject.preventExtensions(nonExtensionObj)%3B%0A%0Aconst%20proxy2%20%3D%20new%20Proxy(nonExtensionObj%2C%20%7B%0A%20%20has(target%2C%20prop)%20%7B%0A%20%20%20%20return%20false%3B%0A%20%20%7D%2C%0A%7D)%3B%0Aconsole.log('foo'%20in%20proxy2)%3B%0A%2F%2F%20TypeError%3A%20'has'%20on%20proxy%3A%20trap%20returned%20falsish%20for%20property%20'foo'%20but%20the%20proxy%20target%20is%20not%20extensible%0A",ext:"javascript"},{default:a(()=>[$,I]),_:1}),W,q,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7Bstring%20%7C%20symbol%7D%20prop%20%E7%9B%AE%E6%A0%87%E5%B1%9E%E6%80%A7%E5%90%8D%E7%A7%B0%0A%20*%20%40param%20%7BPropertyDescriptor%7D%20attributes%20%E7%9B%AE%E6%A0%87%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E5%AF%B9%E8%B1%A1%0A%20*%20%40returns%20%7Bboolean%7D%20%E8%BF%94%E5%9B%9E%E5%B8%83%E5%B0%94%E5%80%BC%0A%20*%2F%0AdefineProperty(target%3A%20T%2C%20prop%3A%20string%20%7C%20symbol%2C%20attributes%3A%20PropertyDescriptor)%3A%20boolean%3B%0A",ext:"typescript"},{default:a(()=>[J,Q]),_:1}),z,t(e,{id:"defineproperty-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy%20%3D%20new%20Proxy(%0A%20%20%7B%7D%2C%0A%20%20%7B%0A%20%20%20%20defineProperty(target%2C%20prop%2C%20attributes)%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D%0A)%3B%0A%0Aproxy.prop%20%3D%20'no'%3B%20%2F%2F%20won't%20work!%0Aconsole.log(proxy.prop)%3B%20%2F%2F%20undefined%0A",ext:"javascript"},{default:a(()=>[X,Y]),_:1}),Z,nn,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7Bstring%20%7C%20symbol%7D%20prop%20%E7%9B%AE%E6%A0%87%E5%B1%9E%E6%80%A7%E5%90%8D%E7%A7%B0%0A%20*%20%40returns%20%7Bboolean%7D%20%E8%BF%94%E5%9B%9E%E5%B8%83%E5%B0%94%E5%80%BC%0A%20*%2F%0AdeleteProperty(target%3A%20T%2C%20prop%3A%20string%20%7C%20symbol)%3A%20boolean%3B%0A",ext:"typescript"},{default:a(()=>[sn,tn]),_:1}),an,t(e,{id:"deleteproperty-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy%20%3D%20new%20Proxy(%0A%20%20%7B%20__privateKey%3A%20'private'%20%7D%2C%0A%20%20%7B%0A%20%20%20%20deleteProperty(target%2C%20prop)%20%7B%0A%20%20%20%20%20%20if%20(prop.startsWith('__'))%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error(%0A%20%20%20%20%20%20%20%20%20%20%60Invalid%20attempt%20to%20delete%20private%20property%20%22%24%7Bprop%7D%22.%60%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20delete%20target%5Bprop%5D%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D%0A)%3B%0Adelete%20proxy.__privateKey%3B%0A%2F%2F%20Error%3A%20Invalid%20attempt%20to%20delete%20private%20property%20%22__privateKey%22.%0A",ext:"javascript"},{default:a(()=>[en,on]),_:1}),cn,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40returns%20%7Bobject%20%7C%20null%7D%20%E8%BF%94%E5%9B%9E%E5%80%BC%E5%BF%85%E9%A1%BB%E6%98%AF%E5%AF%B9%E8%B1%A1%E6%88%96null%0A%20*%2F%0AgetPrototypeOf(target%3A%20T)%3A%20object%20%7C%20null%3B%0A",ext:"typescript"},{default:a(()=>[pn,ln]),_:1}),un,rn,dn,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7Bobject%20%7C%20null%7D%20newPrototype%20%E6%96%B0%E7%9A%84%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1%E6%88%96null%0A%20*%20%40returns%20%7Bboolean%7D%20%E8%BF%94%E5%9B%9E%E5%B8%83%E5%B0%94%E5%80%BC%0A%20*%2F%0AsetPrototypeOf(target%3A%20T%2C%20v%3A%20object%20%7C%20null)%3A%20boolean%3B%0A",ext:"typescript"},{default:a(()=>[kn,mn]),_:1}),yn,t(e,{id:"setprototypeof-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20nonExtensionObj%20%3D%20%7B%20foo%3A%20'foo'%20%7D%3B%0AObject.preventExtensions(nonExtensionObj)%3B%0A%0Aconst%20proxy%20%3D%20new%20Proxy(nonExtensionObj%2C%20%7B%0A%20%20setPropertyOf(target%2C%20v)%20%7B%0A%20%20%20%20return%20true%3B%0A%20%20%7D%2C%0A%7D)%3B%0Aconst%20proto%20%3D%20%7B%7D%3B%0AObject.setPrototypeOf(proxy%2C%20proto)%3B%0A%2F%2F%20TypeError%3A%20%23%3CObject%3E%20is%20not%20extensible%0A",ext:"javascript"},{default:a(()=>[bn,An]),_:1}),gn,vn,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7Bstring%20%7C%20symbol%7D%20prop%20%E7%9B%AE%E6%A0%87%E5%B1%9E%E6%80%A7%E5%90%8D%E7%A7%B0%0A%20*%20%40returns%20%7BPropertyDescriptor%20%7C%20undefined%7D%20%E8%BF%94%E5%9B%9E%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E5%AF%B9%E8%B1%A1%E6%88%96undefined%0A%20*%2F%0AgetOwnPropertyDescriptor(target%3A%20T%2C%20prop%3A%20string%20%7C%20symbol)%3A%20PropertyDescriptor%20%7C%20undefined%3B%0A",ext:"typescript"},{default:a(()=>[fn,Bn]),_:1}),t(e,{id:"getownpropertydescriptor-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy%20%3D%20new%20Proxy(%0A%20%20%7B%20__privateKey%3A%20'private'%2C%20key%3A%20'public'%20%7D%2C%0A%20%20%7B%0A%20%20%20%20getOwnPropertyDescriptor(target%2C%20prop)%20%7B%0A%20%20%20%20%20%20if%20(prop.startsWith('__'))%20return%3B%0A%20%20%20%20%20%20return%20Object.getOwnPropertyDescriptor(target%2C%20prop)%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D%0A)%3B%0A%0Aconsole.log(Object.getOwnPropertyDescriptor(proxy%2C%20'a'))%3B%20%2F%2F%20undefined%0Aconsole.log(Object.getOwnPropertyDescriptor(proxy%2C%20'__privateKey'))%3B%20%2F%2F%20undefined%0Aconsole.log(Object.getOwnPropertyDescriptor(proxy%2C%20'key'))%3B%0A%2F%2F%20%7B%20value%3A%20'public'%2C%20writable%3A%20true%2C%20enumerable%3A%20true%2C%20configurable%3A%20true%20%7D%0A",ext:"javascript"},{default:a(()=>[En,xn]),_:1}),hn,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40returns%20%7BArrayLike%3Cstring%20%7C%20symbol%3E%7D%0A%20*%2F%0AownKeys(target%3A%20T)%3A%20ArrayLike%3Cstring%20%7C%20symbol%3E%3B%0A",ext:"typescript"},{default:a(()=>[_n,wn]),_:1}),Dn,t(e,{id:"ownkeys-example1",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy1%20%3D%20new%20Proxy(%0A%20%20%7B%7D%2C%0A%20%20%7B%0A%20%20%20%20ownKeys(target)%20%7B%0A%20%20%20%20%20%20return%20%5Btrue%2C%20undefined%2C%20null%2C%20%7B%7D%2C%20%5B%5D%5D%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D%0A)%3B%0A%0AObject.getOwnPropertyNames(proxy1)%3B%0A%2F%2F%20TypeError%3A%20true%20is%20not%20a%20valid%20property%20name%0A",ext:"javascript"},{default:a(()=>[Cn,Fn]),_:1}),t(e,{id:"ownkeys-example2",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20obj1%20%3D%20%7B%7D%3B%0AObject.defineProperty(obj1%2C%20'a'%2C%20%7B%0A%20%20configurable%3A%20false%2C%0A%20%20enumerable%3A%20true%2C%0A%20%20value%3A%2010%2C%0A%7D)%3B%0A%0Aconst%20proxy2%20%3D%20new%20Proxy(obj1%2C%20%7B%0A%20%20ownKeys(target)%20%7B%0A%20%20%20%20return%20%5B'b'%5D%3B%0A%20%20%7D%2C%0A%7D)%3B%0A%0AObject.getOwnPropertyNames(proxy2)%3B%0A%2F%2F%20TypeError%3A%20'ownKeys'%20on%20proxy%3A%20trap%20result%20did%20not%20include%20'a'%0A",ext:"javascript"},{default:a(()=>[jn,Pn]),_:1}),t(e,{id:"ownkeys-example3",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20obj2%20%3D%20%7B%20a%3A%201%20%7D%3B%0A%0AObject.preventExtensions(obj2)%3B%0A%0Aconst%20proxy3%20%3D%20new%20Proxy(obj2%2C%20%7B%0A%20%20ownKeys(target)%20%7B%0A%20%20%20%20return%20%5B'a'%2C%20'b'%5D%3B%0A%20%20%7D%2C%0A%7D)%3B%0A%0AObject.getOwnPropertyNames(proxy3)%3B%0A%2F%2F%20TypeError%3A%20'ownKeys'%20on%20proxy%3A%20trap%20returned%20extra%20keys%20but%20proxy%20target%20is%20non-extensible%0A",ext:"javascript"},{default:a(()=>[On,Tn]),_:1}),Hn,Nn,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40returns%20%7Bboolean%7D%20%E8%BF%94%E5%9B%9E%E5%B8%83%E5%B0%94%E5%80%BC%0A%20*%2F%0ApreventExtensions(target%3A%20T)%3A%20boolean%3B%0A",ext:"typescript"},{default:a(()=>[Kn,Mn]),_:1}),Rn,t(e,{id:"preventextensions-example1",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy1%20%3D%20new%20Proxy(%0A%20%20%7B%7D%2C%0A%20%20%7B%0A%20%20%20%20preventExtensions(target)%20%7B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D%0A)%3B%0AObject.preventExtensions(proxy1)%3B%0A%2F%2F%20TypeError%3A%20'preventExtensions'%20on%20proxy%3A%20trap%20returned%20truish%20but%20the%20proxy%20target%20is%20extensible%0A",ext:"javascript"},{default:a(()=>[Sn,Vn]),_:1}),t(e,{id:"preventextensions-example2",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy2%20%3D%20new%20Proxy(%0A%20%20%7B%7D%2C%0A%20%20%7B%0A%20%20%20%20preventExtensions(target)%20%7B%0A%20%20%20%20%20%20Object.preventExtensions(target)%3B%20%2F%2F%20Need%20to%20invoke.%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D%0A)%3B%0Aconsole.log(Object.preventExtensions(proxy2))%3B%20%2F%2F%20Proxy%20%7B%7D%0A",ext:"javascript"},{default:a(()=>[Gn,Ln]),_:1}),Un,$n,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40returns%20%7Bboolean%7D%20%E8%BF%94%E5%9B%9E%E5%B8%83%E5%B0%94%E5%80%BC%0A%20*%2F%0AisExtensible(target%3A%20T)%3A%20boolean%3B%0A",ext:"typescript"},{default:a(()=>[In,Wn]),_:1}),qn,t(e,{id:"isextensible-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy%20%3D%20new%20Proxy(%0A%20%20%7B%7D%2C%0A%20%20%7B%0A%20%20%20%20isExtensible%3A%20function%20(target)%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D%0A)%3B%0A%0AObject.isExtensible(proxy)%3B%0A%2F%2F%20TypeError%3A%20'isExtensible'%20on%20proxy%3A%20trap%20result%20does%20not%20reflect%20extensibility%20of%20proxy%20target%20(which%20is%20'true')%0A",ext:"javascript"},{default:a(()=>[Jn,Qn]),_:1}),zn,Xn,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7Bany%7D%20thisArg%20this%E7%9A%84%E5%80%BC%0A%20*%20%40param%20%7Bany%5B%5D%7D%20argArray%20%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8%0A%20*%20%40returns%20%7Bany%7D%0A%20*%2F%0Aapply(target%3A%20T%2C%20thisArg%3A%20any%2C%20argArray%3A%20any%5B%5D)%3A%20any%3B%0A",ext:"typescript"},{default:a(()=>[Yn,Zn]),_:1}),ns,t(e,{id:"code-apply",class:"language-javascript line-numbers-mode","data-ext":"js",hl_lines:"11,15","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"function%20delay(fn%2C%20ms)%20%7B%0A%20%20return%20function%20(...rest)%20%7B%0A%20%20%20%20setTimeout(()%20%3D%3E%20fn.apply(this%2C%20rest)%2C%20ms)%3B%0A%20%20%7D%3B%0A%7D%0A%0Afunction%20_sayHi(name)%20%7B%0A%20%20console.log(%60Hello%2C%20%24%7Bname%7D!%60)%3B%0A%7D%0A%0Aconsole.log(_sayHi.length)%3B%20%2F%2F%201%0A%0Aconst%20sayHi%20%3D%20delay(_sayHi%2C%203000)%3B%0A%0Aconsole.log(sayHi.length)%3B%20%2F%2F%200%0A%0AsayHi('Moriarty')%3B%20%2F%2F%20(3%E7%A7%92%E5%90%8E%E8%BE%93%E5%87%BA)%2C%20Hello%2C%20Moriarty!%0A",ext:"javascript"},{default:a(()=>[ss,ts,as]),_:1}),n("p",null,[s("但是包装函数不会转发属性读取/写入操作或者任何其他操作。包装后，失去了对原始函数属性的访问，如上段代码"),t(c,{to:"code-apply-11"},{default:a(()=>[es]),_:1}),s("与"),t(c,{to:"code-apply-15"},{default:a(()=>[os]),_:1}),s("行。")]),t(e,{id:"code-proxy-apply",class:"language-javascript line-numbers-mode","data-ext":"js",hl_lines:"13,15-17","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"function%20delay(fn%2C%20ms)%20%7B%0A%20%20return%20new%20Proxy(fn%2C%20%7B%0A%20%20%20%20apply(target%2C%20thisArg%2C%20args)%20%7B%0A%20%20%20%20%20%20setTimeout(()%20%3D%3E%20target.apply(thisArg%2C%20args)%2C%20ms)%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D)%3B%0A%7D%0A%0Afunction%20_sayHi(name)%20%7B%0A%20%20console.log(%60Hello%2C%20%24%7Bname%7D!%60)%3B%0A%7D%0A%0Aconsole.log(_sayHi.length)%3B%20%2F%2F%201%0A%0Aconst%20sayHi%20%3D%20delay(_sayHi%2C%203000)%3B%0A%0Aconsole.log(sayHi.length)%3B%20%2F%2F%201%0A%0AsayHi('Moriarty')%3B%20%2F%2F%20(3%E7%A7%92%E5%90%8E%E8%BE%93%E5%87%BA)%2C%20Hello%2C%20Moriarty!%0A",ext:"javascript"},{default:a(()=>[cs,ps,ls]),_:1}),n("p",null,[s("使用 Proxy 可以将所有内容都转发到目标对象。可以看到"),t(c,{to:"code-proxy-apply-13"},{default:a(()=>[is]),_:1}),s("与"),t(c,{to:"code-proxy-apply-15"},{default:a(()=>[us]),_:1}),s("行的参数结果相同。不仅仅是调用，代理的所有操作都能被转发到原始函数。")]),rs,ds,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7Bany%5B%5D%7D%20argArray%20%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8%0A%20*%20%40param%20%7BFunction%7D%20newTarget%20new%E8%B0%83%E7%94%A8%E7%9A%84%E5%8E%9F%E5%A7%8B%E6%9E%84%E9%80%A0%E5%99%A8%0A%20*%20%40returns%20%7Bobject%7D%20%E5%BF%85%E9%A1%BB%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%0A%20*%2F%0Aconstruct(target%3A%20T%2C%20argArray%3A%20any%5B%5D%2C%20newTarget%3A%20Function)%3A%20object%3B%0A",ext:"typescript"},{default:a(()=>[ks,ms]),_:1}),ys,t(e,{id:"construct-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"function%20Animal()%20%7B%7D%0Aconst%20handler%20%3D%20%7B%0A%20%20construct(target%2C%20args)%20%7B%0A%20%20%20%20console.log(%60this%20%3D%3D%3D%20handler%20%3A%20%24%7Bthis%20%3D%3D%3D%20handler%7D%60)%3B%0A%20%20%20%20console.log(%60called%3A%20%24%7Bargs.join('%2C%20')%7D%60)%3B%0A%20%20%20%20return%20%7B%20value%3A%20%60%24%7Bargs%5B0%5D%7D%20has%20been%20proxied.%60%20%7D%3B%0A%20%20%7D%2C%0A%7D%3B%0Aconst%20AnimalProxy%20%3D%20new%20Proxy(Animal%2C%20handler)%3B%0A%0Aconsole.log(new%20AnimalProxy('Animal'))%3B%0A%2F%2F%20this%20%3D%3D%3D%20handler%20%3A%20true%0A%2F%2F%20called%3A%20Animal%0A%2F%2F%20%7B%20value%3A%20'Animal%20has%20been%20proxied.'%20%7D%0A",ext:"javascript"},{default:a(()=>[bs,As]),_:1}),gs,vs,t(e,{class:"language-typescript line-numbers-mode","data-ext":"ts",fullscreen:"undefined",steps:"undefined",action:"undefined",winCtrl:"undefined",async:"undefined",content:"%2F**%0A%20*%20%40param%20%7BT%7D%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%0A%20*%20%40param%20%7BProxyHandler%3CT%3E%7D%20handler%20%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%AF%8F%E4%B8%AA%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E6%93%8D%E4%BD%9C%EF%BC%8C%E9%83%BD%E9%9C%80%E8%A6%81%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E5%AF%B9%E5%BA%94%E7%9A%84%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%8C%E7%94%A8%E4%BA%8E%E6%8B%A6%E6%88%AA%E5%AF%B9%E5%BA%94%E7%9A%84%E6%93%8D%E4%BD%9C%E3%80%82%0A%20*%20%40returns%20%7B%7B%20proxy%3A%20T%2C%20revoke%3A%20()%20%3D%3E%20void%20%7D%7D%0A%20*%2F%0AProxy.revocable%3CT%20extends%20object%3E(target%3A%20T%2C%20handler%3A%20ProxyHandler%3CT%3E)%3A%20%7B%20proxy%3A%20T%3B%20revoke%3A%20()%20%3D%3E%20void%3B%20%7D%3B%0A",ext:"typescript"},{default:a(()=>[fs,Bs]),_:1}),Es,t(e,{id:"proxy-revocable-example",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20obj%20%3D%20%7B%20data%3A%20'foo'%20%7D%3B%0Aconst%20%7B%20proxy%2C%20revoke%20%7D%20%3D%20Proxy.revocable(obj%2C%20%7B%7D)%3B%0Aconsole.log(proxy.data)%3B%20%2F%2F%20foo%0Arevoke()%3B%0Aconsole.log(proxy.data)%3B%0A%2F%2F%20TypeError%3A%20Cannot%20perform%20'get'%20on%20a%20proxy%20that%20has%20been%20revoked%0A",ext:"javascript"},{default:a(()=>[xs,hs]),_:1}),_s,t(e,{id:"internal-slot-example1",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy%20%3D%20new%20Proxy(new%20Map()%2C%20%7B%7D)%3B%0Aproxy.set('foo'%2C%201)%3B%0A%2F%2F%20TypeError%3A%20Method%20map.prototype.set%20called%20on%20incompatible%20receiver%20%23%3CMap%3E%0A",ext:"javascript"},{default:a(()=>[ws,Ds]),_:1}),Cs,t(e,{id:"internal-slot-example2",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"const%20proxy%20%3D%20new%20Proxy(new%20Map()%2C%20%7B%0A%20%20get(target%2C%20prop%2C%20receiver)%20%7B%0A%20%20%20%20const%20value%20%3D%20Reflect.get(...arguments)%3B%0A%20%20%20%20return%20typeof%20value%20%3D%3D%3D%20'function'%20%3F%20value.bind(target)%20%3A%20value%3B%0A%20%20%7D%2C%0A%7D)%3B%0Aproxy.set('foo'%2C%201)%3B%0Aconsole.log(proxy.get('foo'))%3B%20%2F%2F%201%0A",ext:"javascript"},{default:a(()=>[Fs,js]),_:1}),Ps,t(e,{id:"class-private-example1",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"class%20User%20%7B%0A%20%20%23name%20%3D%20'Guest'%3B%0A%0A%20%20getName()%20%7B%0A%20%20%20%20return%20this.%23name%3B%0A%20%20%7D%0A%7D%0Aconst%20user%20%3D%20new%20Proxy(new%20User()%2C%20%7B%7D)%3B%0Auser.getName()%3B%0A%2F%2F%20TypeError%3A%20Cannot%20read%20private%20member%20%23name%20from%20an%20object%20whose%20class%20did%20not%20declare%20it%0A",ext:"javascript"},{default:a(()=>[Os,Ts]),_:1}),Hs,Ns,t(e,{id:"class-private-example2",class:"language-javascript line-numbers-mode","data-ext":"js","data-action":"run",fullscreen:"undefined",steps:"undefined",action:"run",winCtrl:"undefined",async:"undefined",content:"class%20User%20%7B%0A%20%20%23name%20%3D%20'Guest'%3B%0A%0A%20%20getName()%20%7B%0A%20%20%20%20return%20this.%23name%3B%0A%20%20%7D%0A%7D%0Aconst%20user%20%3D%20new%20Proxy(new%20User()%2C%20%7B%0A%20%20get(target%2C%20prop%2C%20receiver)%20%7B%0A%20%20%20%20const%20value%20%3D%20Reflect.get(...arguments)%3B%0A%20%20%20%20return%20typeof%20value%20%3D%3D%3D%20'function'%20%3F%20value.bind(target)%20%3A%20value%3B%0A%20%20%7D%2C%0A%7D)%3B%0Aconsole.log(user.getName())%3B%20%2F%2F%20'Guest'%0A",ext:"javascript"},{default:a(()=>[Ks,Ms]),_:1}),Rs])}const Us=i(d,[["render",Ss],["__file","proxy.html.vue"]]);export{Us as default};
